import{S as Re,i as ve,s as Se,I as Ne,v as U,e as y,a as F,c as Z,w as Oe,b as h,d as T,f as k,C as Q,m as $,l as ee,g as v,h as re,k as oe,j as H,o as z,p as x,x as ie,q as ce,_ as Te,r as ze,u as He,F as pe,B as he,L as Be,T as De,H as Fe,M as Ie,J as Pe,K as Je,W as Ke,N as Ue,y as Ve,$ as We,t as ae,n as fe,a0 as Ge,a1 as de,z as me,A as be,U as Qe}from"./index-13d4ac78.js";import"./pt-607305e9.js";import{P as Xe}from"./Pagination-a0736574.js";function ge(e,s,t){const l=e.slice();return l[32]=s[t],l[33]=s,l[34]=t,l}function we(e,s,t){const l=e.slice();return l[35]=s[t],l[36]=s,l[37]=t,l}function ke(e,s,t){const l=e.slice();return l[38]=s[t],l}function ye(e,s,t){const l=e.slice();return l[35]=s[t],l}function Ye(e){var l,o;let s=(((o=(l=e[10])==null?void 0:l[e[35]])==null?void 0:o.label)||e[9].t(`crud.${e[35]}`))+"",t;return{c(){t=ae(s)},m(r,n){T(r,t,n)},p(r,n){var f,_;n[0]&512&&s!==(s=(((_=(f=r[10])==null?void 0:f[r[35]])==null?void 0:_.label)||r[9].t(`crud.${r[35]}`))+"")&&fe(t,s)},d(r){r&&z(t)}}}function Ze(e){var u,C;let s,t,l,o,r,n,f=(((C=(u=e[10])==null?void 0:u[e[35]])==null?void 0:C.label)||e[9].t(`crud.${e[35]}`))+"",_,w,m;function b(...j){return e[18](e[35],...j)}function p(...j){return e[19](e[35],...j)}function c(...j){return e[20](e[35],...j)}return{c(){s=y("div"),t=y("label"),l=y("input"),n=y("span"),_=ae(f),h(l,"type","checkbox"),h(l,"id",`${e[35]}`),h(l,"class","checkbox checkbox-sm mr-2"),l.checked=o=(e[4]||[]).length===(e[4]||[]).filter(b).length,l.indeterminate=r=(e[4]||[]).length!==(e[4]||[]).filter(p).length,h(n,"class","label-text"),h(t,"class","label cursor-pointer justify-start p-0"),h(t,"for",`${e[35]}`),h(s,"class","form-control w-full max-w-xs m-auto p-0")},m(j,R){T(j,s,R),k(s,t),k(t,l),k(t,n),k(n,_),w||(m=ee(l,"change",c),w=!0)},p(j,R){var A,B;e=j,R[0]&1040&&o!==(o=(e[4]||[]).length===(e[4]||[]).filter(b).length)&&(l.checked=o),R[0]&1040&&r!==(r=(e[4]||[]).length!==(e[4]||[]).filter(p).length)&&(l.indeterminate=r),R[0]&512&&f!==(f=(((B=(A=e[10])==null?void 0:A[e[35]])==null?void 0:B.label)||e[9].t(`crud.${e[35]}`))+"")&&fe(_,f)},d(j){j&&z(s),w=!1,m()}}}function je(e){let s;function t(r,n){var f,_;return((_=(f=r[10])==null?void 0:f[r[35]])==null?void 0:_.type)==="boolean"?Ze:Ye}let o=t(e)(e);return{c(){var r,n;s=y("th"),o.c(),h(s,"class","normal-case "+(((n=(r=e[10])==null?void 0:r[e[35]])==null?void 0:n.width)||""))},m(r,n){T(r,s,n),o.m(s,null)},p(r,n){o.p(r,n)},d(r){r&&z(s),o.d()}}}function $e(e){let s,t,l,o;function r(){e[25].call(t,e[35],e[33],e[34])}return{c(){var n,f,_,w;s=y("td"),t=y("input"),h(t,"type","text"),h(t,"class","input input-sm p-0 "+(((f=(n=e[10])==null?void 0:n[e[35]])==null?void 0:f.width)||"w-full")+" bg-transparent"),h(s,"class",((w=(_=e[10])==null?void 0:_[e[35]])==null?void 0:w.width)||"")},m(n,f){T(n,s,f),k(s,t),Q(t,e[32][e[35]]),l||(o=ee(t,"input",r),l=!0)},p(n,f){e=n,f[0]&1054&&t.value!==e[32][e[35]]&&Q(t,e[32][e[35]])},d(n){n&&z(s),l=!1,o()}}}function xe(e){var _,w;let s,t,l,o,r=U(((w=(_=e[10])==null?void 0:_[e[35]])==null?void 0:w.options)||[]),n=[];for(let m=0;m<r.length;m+=1)n[m]=Le(ke(e,r,m));function f(){e[24].call(t,e[35],e[33],e[34])}return{c(){var m,b,p,c;s=y("td"),t=y("select");for(let u=0;u<n.length;u+=1)n[u].c();h(t,"class","select select-sm p-0.5 "+(((b=(m=e[10])==null?void 0:m[e[35]])==null?void 0:b.width)||"w-full bg-transparent")),e[32][e[35]]===void 0&&Ge(f),h(s,"class","p-0 "+(((c=(p=e[10])==null?void 0:p[e[35]])==null?void 0:c.width)||""))},m(m,b){T(m,s,b),k(s,t);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(t,null);de(t,e[32][e[35]],!0),l||(o=ee(t,"change",f),l=!0)},p(m,b){var p,c;if(e=m,b[0]&1024){r=U(((c=(p=e[10])==null?void 0:p[e[35]])==null?void 0:c.options)||[]);let u;for(u=0;u<r.length;u+=1){const C=ke(e,r,u);n[u]?n[u].p(C,b):(n[u]=Le(C),n[u].c(),n[u].m(t,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=r.length}b[0]&1054&&de(t,e[32][e[35]])},d(m){m&&z(s),ie(n,m),l=!1,o()}}}function et(e){let s,t,l,o;function r(){e[23].call(t,e[35],e[33],e[34])}return{c(){var n,f,_,w;s=y("td"),t=y("textarea"),h(t,"rows",1),h(t,"class","textarea textarea-sm p-1 min-h-5 "+(((f=(n=e[10])==null?void 0:n[e[35]])==null?void 0:f.width)||"w-full bg-transparent")),h(s,"class","p-0 "+(((w=(_=e[10])==null?void 0:_[e[35]])==null?void 0:w.width)||""))},m(n,f){T(n,s,f),k(s,t),Q(t,e[32][e[35]]),l||(o=ee(t,"input",r),l=!0)},p(n,f){e=n,f[0]&1054&&Q(t,e[32][e[35]])},d(n){n&&z(s),l=!1,o()}}}function tt(e){let s,t,l,o;function r(){e[22].call(t,e[35],e[33],e[34])}return{c(){var n,f;s=y("td"),t=y("input"),h(t,"type","checkbox"),h(t,"class","checkbox checkbox-sm"),h(s,"class","p-0.5 text-center "+(((f=(n=e[10])==null?void 0:n[e[35]])==null?void 0:f.width)||""))},m(n,f){T(n,s,f),k(s,t),t.checked=e[32][e[35]],l||(o=ee(t,"change",r),l=!0)},p(n,f){e=n,f[0]&1054&&(t.checked=e[32][e[35]])},d(n){n&&z(s),l=!1,o()}}}function lt(e){let s,t,l=me(e[32][e[35]],30)+"",o,r;return{c(){var n,f;s=y("td"),t=y("span"),o=ae(l),h(t,"title",r=be(e[32][e[35]],30)),h(s,"class","normal-case "+(((f=(n=e[10])==null?void 0:n[e[35]])==null?void 0:f.width)||""))},m(n,f){T(n,s,f),k(s,t),k(t,o)},p(n,f){f[0]&30&&l!==(l=me(n[32][n[35]],30)+"")&&fe(o,l),f[0]&1054&&r!==(r=be(n[32][n[35]],30))&&h(t,"title",r)},d(n){n&&z(s)}}}function Le(e){let s,t=e[38].label+"",l;return{c(){s=y("option"),l=ae(t),s.__value=e[38].value,Q(s,s.__value)},m(o,r){T(o,s,r),k(s,l)},p:Qe,d(o){o&&z(s)}}}function Ce(e){let s;function t(r,n){var f,_,w,m,b,p,c,u;return((_=(f=r[10])==null?void 0:f[r[35]])==null?void 0:_.editable)!==!0?lt:((m=(w=r[10])==null?void 0:w[r[35]])==null?void 0:m.type)==="boolean"?tt:((p=(b=r[10])==null?void 0:b[r[35]])==null?void 0:p.type)==="text2"?et:((u=(c=r[10])==null?void 0:c[r[35]])==null?void 0:u.type)==="select"?xe:$e}let o=t(e)(e);return{c(){o.c(),s=Oe()},m(r,n){o.m(r,n),T(r,s,n)},p(r,n){o.p(r,n)},d(r){r&&z(s),o.d(r)}}}function Ee(e){let s,t,l,o,r,n,f,_,w,m,b=U(Object.keys(e[10])),p=[];for(let c=0;c<b.length;c+=1)p[c]=Ce(we(e,b,c));return n=new Ne({props:{type:"outline",icon:"key",path:"icons"}}),{c(){var c,u,C;s=y("tr");for(let j=0;j<p.length;j+=1)p[j].c();t=F(),l=y("td"),o=y("button"),r=y("span"),Z(n.$$.fragment),w=F(),h(r,"class","w-6"),h(o,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),o.disabled=f=!((c=e[32])!=null&&c.requires_rla),h(l,"class","p-0.5 w-8 text-right"),h(l,"title",_=e[9].t("crud.row_level_access")),he(l,"display",((C=(u=e[0])==null?void 0:u.data)==null?void 0:C.profile)===!0?null:"none")},m(c,u){T(c,s,u);for(let C=0;C<p.length;C+=1)p[C]&&p[C].m(s,null);k(s,t),k(s,l),k(l,o),k(o,r),$(n,r,null),k(s,w),m=!0},p(c,u){var C,j,R;if(u[0]&1054){b=U(Object.keys(c[10]));let A;for(A=0;A<b.length;A+=1){const B=we(c,b,A);p[A]?p[A].p(B,u):(p[A]=Ce(B),p[A].c(),p[A].m(s,t))}for(;A<p.length;A+=1)p[A].d(1);p.length=b.length}(!m||u[0]&1054&&f!==(f=!((C=c[32])!=null&&C.requires_rla)))&&(o.disabled=f),(!m||u[0]&512&&_!==(_=c[9].t("crud.row_level_access")))&&h(l,"title",_),u[0]&1&&he(l,"display",((R=(j=c[0])==null?void 0:j.data)==null?void 0:R.profile)===!0?null:"none")},i(c){m||(v(n.$$.fragment,c),m=!0)},o(c){H(n.$$.fragment,c),m=!1},d(c){c&&z(s),ie(p,c),x(n)}}}function qe(e){let s,t;return s=new Be({props:{open:e[7]}}),{c(){Z(s.$$.fragment)},m(l,o){$(s,l,o),t=!0},p(l,o){const r={};o[0]&128&&(r.open=l[7]),s.$set(r)},i(l){t||(v(s.$$.fragment,l),t=!0)},o(l){H(s.$$.fragment,l),t=!1},d(l){x(s,l)}}}function Ae(e){let s,t;return s=new De({props:{open:e[5].open,type:e[5].type,msg:e[5].msg,timer:2e4}}),s.$on("dismiss",e[27]),{c(){Z(s.$$.fragment)},m(l,o){$(s,l,o),t=!0},p(l,o){const r={};o[0]&32&&(r.open=l[5].open),o[0]&32&&(r.type=l[5].type),o[0]&32&&(r.msg=l[5].msg),s.$set(r)},i(l){t||(v(s.$$.fragment,l),t=!0)},o(l){H(s.$$.fragment,l),t=!1},d(l){x(s,l)}}}function Me(e){let s,t;const l=[e[6]];let o={};for(let r=0;r<l.length;r+=1)o=Fe(o,l[r]);return s=new Ie({props:o}),s.$on("dismiss",e[28]),{c(){Z(s.$$.fragment)},m(r,n){$(s,r,n),t=!0},p(r,n){const f=n[0]&64?Pe(l,[Je(r[6])]):{};s.$set(f)},i(r){t||(v(s.$$.fragment,r),t=!0)},o(r){H(s.$$.fragment,r),t=!1},d(r){x(s,r)}}}function nt(e){var L,q;let s,t,l,o,r,n,f,_,w,m,b,p,c,u,C,j,R,A,B,D,X,P,V,W,G,te,ne;w=new Ne({props:{type:"outline",icon:"search",path:"icons"}});let J=U(Object.keys(e[10])),S=[];for(let i=0;i<J.length;i+=1)S[i]=je(ye(e,J,i));let I=U((e[4]||[]).filter(e[21]).slice((e[3]||0)*(e[2]||10),(e[3]||0)*(e[2]||10)+(e[2]||10))),E=[];for(let i=0;i<I.length;i+=1)E[i]=Ee(ge(e,I,i));const ue=i=>H(E[i],1,1,()=>{E[i]=null});D=new Xe({props:{lang:(L=e[8])==null?void 0:L.lang,conf:(q=e[8])==null?void 0:q.conf,rows_per_page:e[2]||10,page:e[3]||0,total_rows:(e[4]||[]).length}}),D.$on("pageChange",e[26]);let M=e[7]&&qe(e),N=e[5].open&&Ae(e),a=e[6].open&&Me(e);return{c(){s=y("div"),t=y("div"),l=y("div"),o=y("input"),n=F(),f=y("button"),_=y("span"),Z(w.$$.fragment),m=F(),b=y("div"),p=y("table"),c=y("thead"),u=y("tr");for(let i=0;i<S.length;i+=1)S[i].c();C=F(),j=y("th"),j.innerHTML="",R=F(),A=y("tbody");for(let i=0;i<E.length;i+=1)E[i].c();B=F(),Z(D.$$.fragment),X=F(),M&&M.c(),P=F(),N&&N.c(),V=F(),a&&a.c(),W=Oe(),h(o,"type","text"),h(o,"name","search"),h(o,"placeholder",r=e[9].t("crud.filter")),h(o,"class","grow input pr-8 input-bordered w-60 input-sm"),h(o,"autocomplete","off"),h(o,"autocorrect","off"),h(_,"class","w-5 h-5"),h(f,"class","btn btn-square btn-ghost btn-sm -ml-8 z-[1]"),h(l,"class","flex w-60"),h(t,"class","w-full pl-1 pb-2"),h(j,"class","p-0.5 w-8 text-right"),h(j,"colspan","3"),h(p,"class","table table-zebra w-[98%] normal-case table-xs"),h(b,"class","w-full overflow-x-auto"),h(s,"class","--flex --flex-col")},m(i,g){T(i,s,g),k(s,t),k(t,l),k(l,o),Q(o,e[1]),k(l,n),k(l,f),k(f,_),$(w,_,null),k(s,m),k(s,b),k(b,p),k(p,c),k(c,u);for(let O=0;O<S.length;O+=1)S[O]&&S[O].m(u,null);k(u,C),k(u,j),k(p,R),k(p,A);for(let O=0;O<E.length;O+=1)E[O]&&E[O].m(A,null);k(s,B),$(D,s,null),T(i,X,g),M&&M.m(i,g),T(i,P,g),N&&N.m(i,g),T(i,V,g),a&&a.m(i,g),T(i,W,g),G=!0,te||(ne=ee(o,"input",e[17]),te=!0)},p(i,g){var Y,le;if((!G||g[0]&512&&r!==(r=i[9].t("crud.filter")))&&h(o,"placeholder",r),g[0]&1026&&o.value!==i[1]&&Q(o,i[1]),g[0]&9744){J=U(Object.keys(i[10]));let d;for(d=0;d<J.length;d+=1){const K=ye(i,J,d);S[d]?S[d].p(K,g):(S[d]=je(K),S[d].c(),S[d].m(u,C))}for(;d<S.length;d+=1)S[d].d(1);S.length=J.length}if(g[0]&1567){I=U((i[4]||[]).filter(i[21]).slice((i[3]||0)*(i[2]||10),(i[3]||0)*(i[2]||10)+(i[2]||10)));let d;for(d=0;d<I.length;d+=1){const K=ge(i,I,d);E[d]?(E[d].p(K,g),v(E[d],1)):(E[d]=Ee(K),E[d].c(),v(E[d],1),E[d].m(A,null))}for(re(),d=I.length;d<E.length;d+=1)ue(d);oe()}const O={};g[0]&256&&(O.lang=(Y=i[8])==null?void 0:Y.lang),g[0]&256&&(O.conf=(le=i[8])==null?void 0:le.conf),g[0]&4&&(O.rows_per_page=i[2]||10),g[0]&8&&(O.page=i[3]||0),g[0]&16&&(O.total_rows=(i[4]||[]).length),D.$set(O),i[7]?M?(M.p(i,g),g[0]&128&&v(M,1)):(M=qe(i),M.c(),v(M,1),M.m(P.parentNode,P)):M&&(re(),H(M,1,1,()=>{M=null}),oe()),i[5].open?N?(N.p(i,g),g[0]&32&&v(N,1)):(N=Ae(i),N.c(),v(N,1),N.m(V.parentNode,V)):N&&(re(),H(N,1,1,()=>{N=null}),oe()),i[6].open?a?(a.p(i,g),g[0]&64&&v(a,1)):(a=Me(i),a.c(),v(a,1),a.m(W.parentNode,W)):a&&(re(),H(a,1,1,()=>{a=null}),oe())},i(i){if(!G){v(w.$$.fragment,i);for(let g=0;g<I.length;g+=1)v(E[g]);v(D.$$.fragment,i),v(M),v(N),v(a),G=!0}},o(i){H(w.$$.fragment,i),E=E.filter(Boolean);for(let g=0;g<E.length;g+=1)H(E[g]);H(D.$$.fragment,i),H(M),H(N),H(a),G=!1},d(i){i&&(z(s),z(X),z(P),z(V),z(W)),x(w),ie(S,i),ie(E,i),x(D),M&&M.d(i),N&&N.d(i),a&&a.d(i),te=!1,ne()}}}let st="role_row_level_access";function rt(e,s,t){let l,o;ce(e,Te,a=>t(8,l=a)),ce(e,ze,a=>t(9,o=a));let{table:r}=s,{data:n}=s,{option:f={}}=s,{action:_={}}=s,w="",m=10,b=0,p={},c=[],u={open:!1,msg:null,type:null},C={open:!1,width:12,heigth:85,header:!0,title:"Dialog Title",header_actions:[],component:null},j={row_id:{type:"string",width:"w-10",label:o.t("crud.id"),editable:!1,disabled:"true"},label:{type:"string",width:"w-auto",label:o.t("crud.label"),editable:!1,disabled:"true"},table:{type:"string",width:"w-10",label:o.t("crud.table"),editable:!1,disabled:"true"},db:{type:"string",width:"w-40",label:o.t("crud.db"),editable:!1,disabled:"true"},read:{type:"boolean",width:"w-10",label:o.t("crud.read"),editable:!0},update:{type:"boolean",width:"w-10",label:o.t("crud.update"),editable:!0},delete:{type:"boolean",width:"w-10",label:o.t("crud.delete"),editable:!0},share:{type:"boolean",width:"w-10",label:o.t("crud.share"),editable:!0}},R=!1;const A=async a=>{let L=c||[];t(7,R=!0);const q={lang:l==null?void 0:l.lang,conf:l==null?void 0:l.conf,token:l==null?void 0:l.token,app:l==null?void 0:l.selected_app,table:a.table||st,data:a.data||L};if(!q.data||!q.table)return t(7,R=!1),null;const i=await Ke(q);i.success===!0?(t(5,u.open=!0,u),t(5,u.type="success",u),t(5,u.msg=i.msg,u),B({})):(t(5,u.open=!0,u),t(5,u.type="error",u),t(5,u.msg=i.msg,u)),t(7,R=!1)},B=async a=>{var i,g,O;a.no_loding||t(7,R=!0);const L={lang:l==null?void 0:l.lang,conf:l==null?void 0:l.conf,token:l==null?void 0:l.token,app:l==null?void 0:l.selected_app,table:a.table||a.tables||[r,"role_row_level_access"],filters:[{field:"app_id",cond:"=",value:(n==null?void 0:n.app_id)||((i=a==null?void 0:a.app)==null?void 0:i.app_id)||((g=l==null?void 0:l.selected_app)==null?void 0:g.app_id)},{field:"table_id",cond:"=",value:n==null?void 0:n.table_id},{field:"role_id",cond:"=",value:n==null?void 0:n.role_id}],apply_only_to:{role_row_level_access:!0},limit:-1,join:"none"},q=await Ue(L);q.success===!0&&q.data?(p=q.data,t(4,c=(((O=p==null?void 0:p[r])==null?void 0:O.data)||[]).map(Y=>{var _e;const le=Object.keys(Y);let d={row_id:Y[le[0]],label:Y[le[1]]};d.role_id=n==null?void 0:n.role_id,d.table_id=n==null?void 0:n.table_id,d.table=n==null?void 0:n.table_table,d.app_id=n==null?void 0:n.app_id,d.db=n==null?void 0:n.app_db,d.menu_id=n==null?void 0:n.menu_id;const K=(((_e=p==null?void 0:p.role_row_level_access)==null?void 0:_e.data)||[]).filter(se=>se.role_id===(n==null?void 0:n.role_id)&&se.table_id===(n==null?void 0:n.table_id)&&se.app_id===(n==null?void 0:n.app_id)&&se.row_id===d.row_id);return K.length>0&&(d={...d,...K[0]}),d._table="role_row_level_access",Ve.cloneDeep(d)}))):(t(5,u.open=!0,u),t(5,u.type="error",u),t(5,u.msg=q.msg,u)),t(7,R=!1)},D=a=>{a.detail.type==="next"?t(3,b+=1):a.detail.type==="back"?t(3,b-=1):a.detail.type==="first"?t(3,b=0):a.detail.type==="last"?t(3,b=Math.ceil(m/((a==null?void 0:a.length)||m))):a.detail.type==="rows_per_page"&&(t(2,m=a.detail.rows_per_page),t(3,b=0))},X=a=>{t(6,C.open=!1,C)},P=(a,L)=>{const q=c.map(i=>(i[L]=a.target.checked,i));t(4,c=[...q])};He(async()=>{o.changeLanguage(l==null?void 0:l.lang);try{pe.locale(l==null?void 0:l.lang)}catch{pe.locale("en-us")}console.log("Row Level Access:",{table:r,data:n,option:f}),(async()=>await B({}))()});function V(){w=this.value,t(1,w),t(10,j)}const W=(a,L)=>L[a]===!0,G=(a,L)=>L[a]===!0,te=(a,L)=>P(L,a),ne=a=>{let L=!0;if(w){if(w.length>3)try{L=!1;const q=new RegExp(w,"i"),i=a.label.match(q);i&&i.length>0&&(L=!0)}catch{}}return L};function J(a,L,q){L[q][a]=this.checked,t(4,c),t(1,w),t(3,b),t(2,m),t(10,j)}function S(a,L,q){L[q][a]=this.value,t(4,c),t(1,w),t(3,b),t(2,m),t(10,j)}function I(a,L,q){L[q][a]=We(this),t(4,c),t(1,w),t(3,b),t(2,m),t(10,j)}function E(a,L,q){L[q][a]=this.value,t(4,c),t(1,w),t(3,b),t(2,m),t(10,j)}const ue=a=>D({detail:a.detail,length:(c||[]).length}),M=a=>{t(5,u.open=!1,u)},N=a=>X(a.detail);return e.$$set=a=>{"table"in a&&t(14,r=a.table),"data"in a&&t(15,n=a.data),"option"in a&&t(0,f=a.option),"action"in a&&t(16,_=a.action)},e.$$.update=()=>{e.$$.dirty[0]&16384&&console.log({table:r}),e.$$.dirty[0]&65536&&((_==null?void 0:_.name)=="CANCEL"&&(_==null||_.action()),(_==null?void 0:_.name)=="SAVE"&&(console.log(_),A({})),(_==null?void 0:_.name)=="REFRESH"&&(console.log(_),B({})))},[f,w,m,b,c,u,C,R,l,o,j,D,X,P,r,n,_,V,W,G,te,ne,J,S,I,E,ue,M,N]}class ut extends Re{constructor(s){super(),ve(this,s,rt,nt,Se,{table:14,data:15,option:0,action:16},null,[-1,-1])}}export{ut as default};
