import{S as SvelteComponent,i as init,s as safe_not_equal,F as hooks,v as ensure_array_like,e as element,a as space,t as text,b as attr,B as set_style,d as insert,f as append,g as transition_in,h as group_outros,k as check_outros,n as set_data,j as transition_out,o as detach,x as destroy_each,q as component_subscribe,_ as _global,r as i18n,u as onMount,y as lodashExports,z as string_ellipsis,A as string_ellipsis_title,l as listen,G as prevent_default,w as empty,L as Loadingv2,c as create_component,m as mount_component,p as destroy_component,T as Toast,H as assign,M as Modal,J as get_spread_update,K as get_spread_object,W as create_update,N as read,P as __vitePreload,a9 as upload,$ as select_value,a5 as gbl_api_call,X as format_number,I as Icons,C as set_input_value,D as run_all,U as noop,a3 as HtmlTag,a6 as get_upload_api,a0 as add_render_callback,a1 as select_option}from"./index-13d4ac78.js";import"./pt-607305e9.js";import{P as Pagination}from"./Pagination-a0736574.js";function get_each_context(e,t,n){const l=e.slice();return l[81]=t[n],l[82]=t,l[83]=n,l}function get_each_context_2(e,t,n){const l=e.slice();return l[84]=t[n],l[87]=t,l[88]=n,l}function get_each_context_3(e,t,n){const l=e.slice();return l[89]=t[n],l[90]=t,l[91]=n,l}function get_each_context_4(e,t,n){const l=e.slice();return l[92]=t[n],l}function get_each_context_5(e,t,n){const l=e.slice();return l[89]=t[n],l[95]=t,l[96]=n,l}function get_each_context_6(e,t,n){const l=e.slice();return l[97]=t[n],l}function get_each_context_1(e,t,n){const l=e.slice();return l[84]=t[n],l}function get_each_context_7(e,t,n){const l=e.slice();return l[81]=t[n],l[83]=n,l}function create_each_block_7(e){let t,n,l=string_ellipsis(e[81].label,30)+"",i,r,a,o,_;function s(){return e[33](e[83])}return{c(){var c;t=element("li"),n=element("b"),i=text(l),attr(t,"class",r="step step-lifted text-sm cursor-pointer "+(e[5]>=e[83]?" step-primary ":"")),attr(t,"title",a=string_ellipsis_title(e[81].label,30)),set_style(t,"display",e[16](((c=e[81])==null?void 0:c.show)||"true",e[81],null,e[1])?null:"none")},m(c,u){insert(c,t,u),append(t,n),append(n,i),o||(_=listen(t,"click",prevent_default(s)),o=!0)},p(c,u){var m;e=c,u[0]&4&&l!==(l=string_ellipsis(e[81].label,30)+"")&&set_data(i,l),u[0]&32&&r!==(r="step step-lifted text-sm cursor-pointer "+(e[5]>=e[83]?" step-primary ":""))&&attr(t,"class",r),u[0]&4&&a!==(a=string_ellipsis_title(e[81].label,30))&&attr(t,"title",a),u[0]&6&&set_style(t,"display",e[16](((m=e[81])==null?void 0:m.show)||"true",e[81],null,e[1])?null:"none")},d(c){c&&detach(t),o=!1,_()}}}function create_if_block_3(e){let t,n,l,i,r;const a=[create_if_block_4,create_else_block],o=[];function _(s,c){var u,m;return((u=s[81])==null?void 0:u.table)==="etl_rb_reconcilia"&&((m=s[81])!=null&&m.show_html)?0:1}return n=_(e),l=o[n]=a[n](e),{c(){t=element("div"),l.c(),i=space(),attr(t,"class","w-full p-2")},m(s,c){insert(s,t,c),o[n].m(t,null),append(t,i),r=!0},p(s,c){let u=n;n=_(s),n===u?o[n].p(s,c):(group_outros(),transition_out(o[u],1,1,()=>{o[u]=null}),check_outros(),l=o[n],l?l.p(s,c):(l=o[n]=a[n](s),l.c()),transition_in(l,1),l.m(t,i))},i(s){r||(transition_in(l),r=!0)},o(s){transition_out(l),r=!1},d(s){s&&detach(t),o[n].d()}}}function create_else_block(e){var x,y,D,P,K,ne,le,ie,ae,F,ee,re,_e,oe,ce,ue,de,fe,me,be,h,W,te,H,ke;let t,n,l,i,r,a,o,_,s,c,u,m,b,f,$,p,k,w,g,O,T,L,Y,S,J,X,C=(e[5]===0||((x=e[81])==null?void 0:x.date_ref))&&create_if_block_30(e);a=new Icons({props:{type:"outline",icon:"search",path:"icons"}});function U(){e[38].call(_,e[82],e[83])}let z=ensure_array_like(((y=e[81])==null?void 0:y.pre_filters)||[]),I=[];for(let M=0;M<z.length;M+=1)I[M]=create_each_block_6(get_each_context_6(e,z,M));let j=((D=e[81])==null?void 0:D.dates_refs)&&create_if_block_29(e),v=((P=e[81])==null?void 0:P.table)==="etl_report_base_log"&&((ie=(le=(ne=e[4])==null?void 0:ne[(K=e[81])==null?void 0:K.table])==null?void 0:le.data)==null?void 0:ie.length)>0&&create_if_block_28(e),B=ensure_array_like(((ae=e[81])==null?void 0:ae.fields)||[]),q=[];for(let M=0;M<B.length;M+=1)q[M]=create_each_block_5(get_each_context_5(e,B,M));const V=M=>transition_out(q[M],1,1,()=>{q[M]=null});let R=ensure_array_like(e[11](e[81],(re=(ee=e[4])==null?void 0:ee[(F=e[81])==null?void 0:F.table])==null?void 0:re.data).slice((((_e=e[81])==null?void 0:_e.offset)||0)*(((oe=e[81])==null?void 0:oe.limit)||10),(((ce=e[81])==null?void 0:ce.offset)||0)*(((ue=e[81])==null?void 0:ue.limit)||10)+(((de=e[81])==null?void 0:de.limit)||10))),A=[];for(let M=0;M<R.length;M+=1)A[M]=create_each_block_2(get_each_context_2(e,R,M));const Q=M=>transition_out(A[M],1,1,()=>{A[M]=null});function Z(...M){return e[64](e[81],e[83],...M)}return Y=new Pagination({props:{lang:(fe=e[12])==null?void 0:fe.lang,conf:(me=e[12])==null?void 0:me.conf,rows_per_page:((be=e[81])==null?void 0:be.limit)||10,page:((h=e[81])==null?void 0:h.offset)||0,total_rows:(ke=e[11](e[81],(H=(te=e[4])==null?void 0:te[(W=e[81])==null?void 0:W.table])==null?void 0:H.data))==null?void 0:ke.length}}),Y.$on("pageChange",Z),{c(){var M;t=element("div"),C&&C.c(),n=space(),l=element("div"),i=element("button"),r=element("span"),create_component(a.$$.fragment),o=space(),_=element("input"),u=space(),m=element("datalist");for(let E=0;E<I.length;E+=1)I[E].c();b=space(),j&&j.c(),f=space(),v&&v.c(),$=space(),p=element("div"),k=element("table"),w=element("thead"),g=element("tr");for(let E=0;E<q.length;E+=1)q[E].c();O=space(),T=element("tbody");for(let E=0;E<A.length;E+=1)A[E].c();L=space(),create_component(Y.$$.fragment),attr(r,"class","w-5 h-5"),attr(i,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),attr(_,"type","text"),attr(_,"name",s=`${(M=e[81])==null?void 0:M.table}_filter`),attr(_,"placeholder",c=`${e[13].t("crud.filter")} ${e[81].label}`),attr(_,"class","grow input pl-8 input-bordered w-full input-sm"),attr(_,"autocomplete","off"),attr(_,"autocorrect","off"),attr(_,"list",`pre_filter_${e[83]}`),attr(m,"id",`pre_filter_${e[83]}`),attr(l,"class","w-64 flex"),attr(t,"class","p-2 w-full flex flex-row gap-2"),attr(k,"class","table table-zebra w-[98%] normal-case table-xs"),attr(p,"class","w-full overflow-x-auto")},m(M,E){insert(M,t,E),C&&C.m(t,null),append(t,n),append(t,l),append(l,i),append(i,r),mount_component(a,r,null),append(l,o),append(l,_),set_input_value(_,e[81].filter),append(l,u),append(l,m);for(let G=0;G<I.length;G+=1)I[G]&&I[G].m(m,null);append(t,b),j&&j.m(t,null),append(t,f),v&&v.m(t,null),insert(M,$,E),insert(M,p,E),append(p,k),append(k,w),append(w,g);for(let G=0;G<q.length;G+=1)q[G]&&q[G].m(g,null);append(k,O),append(k,T);for(let G=0;G<A.length;G+=1)A[G]&&A[G].m(T,null);insert(M,L,E),mount_component(Y,M,E),S=!0,J||(X=listen(_,"input",U),J=!0)},p(M,E){var $e,he,pe,ge,ve,we,De,Ee,qe,Ye,Te,Oe,Me,Ie,Ne,Le,Pe,je,Ce,Re,Se,Ae,ze,Be,Fe,He;if(e=M,e[5]===0||($e=e[81])!=null&&$e.date_ref?C?(C.p(e,E),E[0]&36&&transition_in(C,1)):(C=create_if_block_30(e),C.c(),transition_in(C,1),C.m(t,n)):C&&(group_outros(),transition_out(C,1,1,()=>{C=null}),check_outros()),(!S||E[0]&4&&s!==(s=`${(he=e[81])==null?void 0:he.table}_filter`))&&attr(_,"name",s),(!S||E[0]&8196&&c!==(c=`${e[13].t("crud.filter")} ${e[81].label}`))&&attr(_,"placeholder",c),E[0]&4&&_.value!==e[81].filter&&set_input_value(_,e[81].filter),E[0]&4){z=ensure_array_like(((pe=e[81])==null?void 0:pe.pre_filters)||[]);let N;for(N=0;N<z.length;N+=1){const se=get_each_context_6(e,z,N);I[N]?I[N].p(se,E):(I[N]=create_each_block_6(se),I[N].c(),I[N].m(m,null))}for(;N<I.length;N+=1)I[N].d(1);I.length=z.length}if((ge=e[81])!=null&&ge.dates_refs?j?(j.p(e,E),E[0]&4&&transition_in(j,1)):(j=create_if_block_29(e),j.c(),transition_in(j,1),j.m(t,f)):j&&(group_outros(),transition_out(j,1,1,()=>{j=null}),check_outros()),((ve=e[81])==null?void 0:ve.table)==="etl_report_base_log"&&((qe=(Ee=(De=e[4])==null?void 0:De[(we=e[81])==null?void 0:we.table])==null?void 0:Ee.data)==null?void 0:qe.length)>0?v?(v.p(e,E),E[0]&20&&transition_in(v,1)):(v=create_if_block_28(e),v.c(),transition_in(v,1),v.m(t,null)):v&&(group_outros(),transition_out(v,1,1,()=>{v=null}),check_outros()),E[0]&302657543){B=ensure_array_like(((Ye=e[81])==null?void 0:Ye.fields)||[]);let N;for(N=0;N<B.length;N+=1){const se=get_each_context_5(e,B,N);q[N]?(q[N].p(se,E),transition_in(q[N],1)):(q[N]=create_each_block_5(se),q[N].c(),transition_in(q[N],1),q[N].m(g,null))}for(group_outros(),N=B.length;N<q.length;N+=1)V(N);check_outros()}if(E[0]&702625822){R=ensure_array_like(e[11](e[81],(Me=(Oe=e[4])==null?void 0:Oe[(Te=e[81])==null?void 0:Te.table])==null?void 0:Me.data).slice((((Ie=e[81])==null?void 0:Ie.offset)||0)*(((Ne=e[81])==null?void 0:Ne.limit)||10),(((Le=e[81])==null?void 0:Le.offset)||0)*(((Pe=e[81])==null?void 0:Pe.limit)||10)+(((je=e[81])==null?void 0:je.limit)||10)));let N;for(N=0;N<R.length;N+=1){const se=get_each_context_2(e,R,N);A[N]?(A[N].p(se,E),transition_in(A[N],1)):(A[N]=create_each_block_2(se),A[N].c(),transition_in(A[N],1),A[N].m(T,null))}for(group_outros(),N=R.length;N<A.length;N+=1)Q(N);check_outros()}const G={};E[0]&4096&&(G.lang=(Ce=e[12])==null?void 0:Ce.lang),E[0]&4096&&(G.conf=(Re=e[12])==null?void 0:Re.conf),E[0]&4&&(G.rows_per_page=((Se=e[81])==null?void 0:Se.limit)||10),E[0]&4&&(G.page=((Ae=e[81])==null?void 0:Ae.offset)||0),E[0]&2068&&(G.total_rows=(He=e[11](e[81],(Fe=(Be=e[4])==null?void 0:Be[(ze=e[81])==null?void 0:ze.table])==null?void 0:Fe.data))==null?void 0:He.length),Y.$set(G)},i(M){if(!S){transition_in(C),transition_in(a.$$.fragment,M),transition_in(j),transition_in(v);for(let E=0;E<B.length;E+=1)transition_in(q[E]);for(let E=0;E<R.length;E+=1)transition_in(A[E]);transition_in(Y.$$.fragment,M),S=!0}},o(M){transition_out(C),transition_out(a.$$.fragment,M),transition_out(j),transition_out(v),q=q.filter(Boolean);for(let E=0;E<q.length;E+=1)transition_out(q[E]);A=A.filter(Boolean);for(let E=0;E<A.length;E+=1)transition_out(A[E]);transition_out(Y.$$.fragment,M),S=!1},d(M){M&&(detach(t),detach($),detach(p),detach(L)),C&&C.d(),destroy_component(a),destroy_each(I,M),j&&j.d(),v&&v.d(),destroy_each(q,M),destroy_each(A,M),destroy_component(Y,M),J=!1,X()}}}function create_if_block_4(e){var a,o,_;let t,n,l=ensure_array_like(e[11](e[81],(_=(o=e[4])==null?void 0:o[(a=e[81])==null?void 0:a.table])==null?void 0:_.data)),i=[];for(let s=0;s<l.length;s+=1)i[s]=create_each_block_1(get_each_context_1(e,l,s));const r=s=>transition_out(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();t=empty()},m(s,c){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(s,c);insert(s,t,c),n=!0},p(s,c){var u,m,b;if(c[0]&134219796){l=ensure_array_like(s[11](s[81],(b=(m=s[4])==null?void 0:m[(u=s[81])==null?void 0:u.table])==null?void 0:b.data));let f;for(f=0;f<l.length;f+=1){const $=get_each_context_1(s,l,f);i[f]?(i[f].p($,c),transition_in(i[f],1)):(i[f]=create_each_block_1($),i[f].c(),transition_in(i[f],1),i[f].m(t.parentNode,t))}for(group_outros(),f=l.length;f<i.length;f+=1)r(f);check_outros()}},i(s){if(!n){for(let c=0;c<l.length;c+=1)transition_in(i[c]);n=!0}},o(s){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)transition_out(i[c]);n=!1},d(s){s&&detach(t),destroy_each(i,s)}}}function create_if_block_30(e){let t,n,l,i,r,a,o,_,s,c,u,m,b,f,$;i=new Icons({props:{type:"outline",icon:"calendar-days",path:"icons"}});function p(){e[35].call(a,e[82],e[83])}function k(...g){return e[36](e[81],...g)}u=new Icons({props:{type:"outline",icon:"arrow-right-on-rectangle",path:"icons"}});function w(...g){return e[37](e[81],...g)}return{c(){t=element("div"),n=element("button"),l=element("span"),create_component(i.$$.fragment),r=space(),a=element("input"),_=space(),s=element("button"),c=element("span"),create_component(u.$$.fragment),attr(l,"class","w-5 h-5"),attr(n,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),attr(a,"type","date"),attr(a,"name","date_ref"),attr(a,"placeholder",o=`${e[13].t("crud.date")} ${e[81].label}`),attr(a,"class","grow input pl-8 input-bordered w-full input-sm"),attr(a,"autocomplete","off"),attr(a,"autocorrect","off"),attr(c,"class","w-5 h-5"),attr(s,"class","btn btn-square btn-ghost btn-sm --ml-8 z-[1]"),attr(s,"title",m=e[13].t("crud.set_date_2_all_steps")),attr(t,"class","w-48 flex")},m(g,O){insert(g,t,O),append(t,n),append(n,l),mount_component(i,l,null),append(t,r),append(t,a),set_input_value(a,e[81].date_ref),append(t,_),append(t,s),append(s,c),mount_component(u,c,null),b=!0,f||($=[listen(a,"input",p),listen(a,"change",k),listen(s,"click",w)],f=!0)},p(g,O){e=g,(!b||O[0]&8196&&o!==(o=`${e[13].t("crud.date")} ${e[81].label}`))&&attr(a,"placeholder",o),O[0]&4&&set_input_value(a,e[81].date_ref),(!b||O[0]&8192&&m!==(m=e[13].t("crud.set_date_2_all_steps")))&&attr(s,"title",m)},i(g){b||(transition_in(i.$$.fragment,g),transition_in(u.$$.fragment,g),b=!0)},o(g){transition_out(i.$$.fragment,g),transition_out(u.$$.fragment,g),b=!1},d(g){g&&detach(t),destroy_component(i),destroy_component(u),f=!1,run_all($)}}}function create_each_block_6(e){let t,n=e[97]+"",l,i;return{c(){t=element("option"),l=text(n),t.__value=i=e[97],set_input_value(t,t.__value)},m(r,a){insert(r,t,a),append(t,l)},p(r,a){a[0]&4&&n!==(n=r[97]+"")&&set_data(l,n),a[0]&4&&i!==(i=r[97])&&(t.__value=i,set_input_value(t,t.__value))},d(r){r&&detach(t)}}}function create_if_block_29(e){let t,n,l,i,r,a,o,_,s,c,u;i=new Icons({props:{type:"outline",icon:"calendar-days",path:"icons"}});function m(){return e[39](e[81])}function b(){return e[42](e[81])}return{c(){var f,$,p,k;t=element("div"),n=element("button"),l=element("span"),create_component(i.$$.fragment),r=space(),a=element("input"),attr(l,"class","w-5 h-5"),attr(n,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),attr(a,"type","text"),attr(a,"class","grow input pl-8 input-bordered w-full input-sm"),attr(a,"title",o=string_ellipsis_title(($=(f=e[81])==null?void 0:f.dates_refs)==null?void 0:$.map(e[40]).join(", "),30)),a.value=_=string_ellipsis((k=(p=e[81])==null?void 0:p.dates_refs)==null?void 0:k.map(e[41]).join(", "),30),attr(t,"class","w-64 flex")},m(f,$){insert(f,t,$),append(t,n),append(n,l),mount_component(i,l,null),append(t,r),append(t,a),s=!0,c||(u=[listen(n,"click",m),listen(a,"focus",b)],c=!0)},p(f,$){var p,k,w,g;e=f,(!s||$[0]&8196&&o!==(o=string_ellipsis_title((k=(p=e[81])==null?void 0:p.dates_refs)==null?void 0:k.map(e[40]).join(", "),30)))&&attr(a,"title",o),(!s||$[0]&8196&&_!==(_=string_ellipsis((g=(w=e[81])==null?void 0:w.dates_refs)==null?void 0:g.map(e[41]).join(", "),30))&&a.value!==_)&&(a.value=_)},i(f){s||(transition_in(i.$$.fragment,f),s=!0)},o(f){transition_out(i.$$.fragment,f),s=!1},d(f){f&&detach(t),destroy_component(i),c=!1,run_all(u)}}}function create_if_block_28(e){let t,n,l,i,r,a,o;l=new Icons({props:{type:"outline",icon:"save",path:"icons"}});function _(){return e[43](e[81])}return{c(){t=element("button"),n=element("span"),create_component(l.$$.fragment),attr(n,"class","w-5 h-5"),attr(t,"class","btn btn-square btn-ghost btn-sm"),attr(t,"title",i=e[13].t("crud.save"))},m(s,c){insert(s,t,c),append(t,n),mount_component(l,n,null),r=!0,a||(o=listen(t,"click",_),a=!0)},p(s,c){e=s,(!r||c[0]&8192&&i!==(i=e[13].t("crud.save")))&&attr(t,"title",i)},i(s){r||(transition_in(l.$$.fragment,s),r=!0)},o(s){transition_out(l.$$.fragment,s),r=!1},d(s){s&&detach(t),destroy_component(l),a=!1,o()}}}function create_else_block_7(e){var l,i,r,a,o,_,s,c,u;let t=(((l=e[89])==null?void 0:l.label)||((c=(s=(o=(a=(i=e[12])==null?void 0:i.tables)==null?void 0:a[(r=e[81])==null?void 0:r.table])==null?void 0:o.fields)==null?void 0:s[(_=e[89])==null?void 0:_.name])==null?void 0:c.comment)||((u=e[89])==null?void 0:u.name))+"",n;return{c(){n=text(t)},m(m,b){insert(m,n,b)},p(m,b){var f,$,p,k,w,g,O,T,L;b[0]&4100&&t!==(t=(((f=m[89])==null?void 0:f.label)||((T=(O=(w=(k=($=m[12])==null?void 0:$.tables)==null?void 0:k[(p=m[81])==null?void 0:p.table])==null?void 0:w.fields)==null?void 0:O[(g=m[89])==null?void 0:g.name])==null?void 0:T.comment)||((L=m[89])==null?void 0:L.name))+"")&&set_data(n,t)},i:noop,o:noop,d(m){m&&detach(n)}}}function create_if_block_27(e){var b,f,$,p,k,w,g,O;let t,n,l,i,r,a=(((b=e[89])==null?void 0:b.label)||((O=(g=(k=(p=(f=e[12])==null?void 0:f.tables)==null?void 0:p[($=e[81])==null?void 0:$.table])==null?void 0:k.fields)==null?void 0:g[(w=e[89])==null?void 0:w.name])==null?void 0:O.comment))+"",o,_,s,c;function u(){e[49].call(l,e[89],e[82],e[83])}function m(...T){return e[50](e[89],e[81],...T)}return{c(){var T,L;t=element("div"),n=element("label"),l=element("input"),r=element("span"),o=text(a),attr(l,"type","checkbox"),attr(l,"id",i=`${e[89].name}-${(T=e[81])==null?void 0:T.table}-${e[96]}`),attr(l,"class","toggle toggle-sm toggle-primary mr-2"),attr(r,"class","label-text font-normal"),attr(n,"class","label cursor-pointer justify-start p-0"),attr(n,"for",_=`${e[89].name}-${(L=e[81])==null?void 0:L.table}-${e[96]}`),attr(t,"class","form-control w-full max-w-xs m-auto p-0")},m(T,L){var Y;insert(T,t,L),append(t,n),append(n,l),l.checked=e[81][(Y=e[89])==null?void 0:Y.name],append(n,r),append(r,o),s||(c=[listen(l,"change",u),listen(l,"change",m)],s=!0)},p(T,L){var Y,S,J,X,C,U,z,I,j,v,B;e=T,L[0]&4&&i!==(i=`${e[89].name}-${(Y=e[81])==null?void 0:Y.table}-${e[96]}`)&&attr(l,"id",i),L[0]&4&&(l.checked=e[81][(S=e[89])==null?void 0:S.name]),L[0]&4100&&a!==(a=(((J=e[89])==null?void 0:J.label)||((v=(j=(z=(U=(X=e[12])==null?void 0:X.tables)==null?void 0:U[(C=e[81])==null?void 0:C.table])==null?void 0:z.fields)==null?void 0:j[(I=e[89])==null?void 0:I.name])==null?void 0:v.comment))+"")&&set_data(o,a),L[0]&4&&_!==(_=`${e[89].name}-${(B=e[81])==null?void 0:B.table}-${e[96]}`)&&attr(n,"for",_)},i:noop,o:noop,d(T){T&&detach(t),s=!1,run_all(c)}}}function create_if_block_19(e){let t,n,l,i;const r=[create_if_block_20,create_if_block_22,create_if_block_23,create_if_block_24,create_else_block_6],a=[];function o(_,s){var c,u,m,b,f,$,p,k;return _[96]===((u=(c=_[81])==null?void 0:c.fields)==null?void 0:u.length)-4?0:_[96]===((b=(m=_[81])==null?void 0:m.fields)==null?void 0:b.length)-3?1:_[96]===(($=(f=_[81])==null?void 0:f.fields)==null?void 0:$.length)-2?2:_[96]===((k=(p=_[81])==null?void 0:p.fields)==null?void 0:k.length)-1?3:4}return t=o(e),n=a[t]=r[t](e),{c(){n.c(),l=empty()},m(_,s){a[t].m(_,s),insert(_,l,s),i=!0},p(_,s){let c=t;t=o(_),t===c?a[t].p(_,s):(group_outros(),transition_out(a[c],1,1,()=>{a[c]=null}),check_outros(),n=a[t],n?n.p(_,s):(n=a[t]=r[t](_),n.c()),transition_in(n,1),n.m(l.parentNode,l))},i(_){i||(transition_in(n),i=!0)},o(_){transition_out(n),i=!1},d(_){_&&detach(l),a[t].d(_)}}}function create_else_block_6(e){let t="",n;return{c(){n=text(t)},m(l,i){insert(l,n,i)},p:noop,i:noop,o:noop,d(l){l&&detach(n)}}}function create_if_block_24(e){let t,n,l,i,r,a;const o=[create_if_block_25,create_if_block_26,create_else_block_5],_=[];function s(c,u){var m,b;return u[0]&4&&(t=null),u[0]&4&&(n=null),t==null&&(t=["data_quality","data_reconcilia","__notify"].indexOf((m=c[81])==null?void 0:m.run_all_action)!==-1),t?0:(n==null&&(n=["notify"].indexOf((b=c[81])==null?void 0:b.run_all_action)!==-1),n?1:2)}return l=s(e,[-1,-1,-1,-1]),i=_[l]=o[l](e),{c(){i.c(),r=empty()},m(c,u){_[l].m(c,u),insert(c,r,u),a=!0},p(c,u){let m=l;l=s(c,u),l===m?_[l].p(c,u):(group_outros(),transition_out(_[m],1,1,()=>{_[m]=null}),check_outros(),i=_[l],i?i.p(c,u):(i=_[l]=o[l](c),i.c()),transition_in(i,1),i.m(r.parentNode,r))},i(c){a||(transition_in(i),a=!0)},o(c){transition_out(i),a=!1},d(c){c&&detach(r),_[l].d(c)}}}function create_if_block_23(e){let t,n,l,i,r,a;l=new Icons({props:{type:"outline",icon:"bolt",path:"icons"}});function o(){return e[46](e[81])}return{c(){t=element("button"),n=element("span"),create_component(l.$$.fragment),attr(n,"class","w-6"),attr(t,"class","btn btn-circle btn-ghost btn-sm text-xs -m-1")},m(_,s){insert(_,t,s),append(t,n),mount_component(l,n,null),i=!0,r||(a=listen(t,"click",o),r=!0)},p(_,s){e=_},i(_){i||(transition_in(l.$$.fragment,_),i=!0)},o(_){transition_out(l.$$.fragment,_),i=!1},d(_){_&&detach(t),destroy_component(l),r=!1,a()}}}function create_if_block_22(e){let t,n,l,i,r,a;l=new Icons({props:{type:"outline",icon:"plus",path:"icons"}});function o(){return e[45](e[81])}return{c(){t=element("button"),n=element("span"),create_component(l.$$.fragment),attr(n,"class","w-6"),attr(t,"class","btn btn-circle btn-ghost btn-sm text-xs -m-1")},m(_,s){insert(_,t,s),append(t,n),mount_component(l,n,null),i=!0,r||(a=listen(t,"click",o),r=!0)},p(_,s){e=_},i(_){i||(transition_in(l.$$.fragment,_),i=!0)},o(_){transition_out(l.$$.fragment,_),i=!1},d(_){_&&detach(t),destroy_component(l),r=!1,a()}}}function create_if_block_20(e){var r;let t=["extract","transform"].indexOf((r=e[81])==null?void 0:r.run_all_action)!==-1,n,l,i=t&&create_if_block_21(e);return{c(){i&&i.c(),n=empty()},m(a,o){i&&i.m(a,o),insert(a,n,o),l=!0},p(a,o){var _;o[0]&4&&(t=["extract","transform"].indexOf((_=a[81])==null?void 0:_.run_all_action)!==-1),t?i?(i.p(a,o),o[0]&4&&transition_in(i,1)):(i=create_if_block_21(a),i.c(),transition_in(i,1),i.m(n.parentNode,n)):i&&(group_outros(),transition_out(i,1,1,()=>{i=null}),check_outros())},i(a){l||(transition_in(i),l=!0)},o(a){transition_out(i),l=!1},d(a){a&&detach(n),i&&i.d(a)}}}function create_else_block_5(e){let t,n,l,i,r,a,o;l=new Icons({props:{type:"outline",icon:"database",path:"icons"}});function _(){return e[48](e[81])}return{c(){t=element("button"),n=element("span"),create_component(l.$$.fragment),attr(n,"class","w-6"),attr(t,"class","btn btn-circle btn-ghost btn-sm text-xs -m-1"),attr(t,"title",i=`${e[13].t("crud.explore_db")}`)},m(s,c){insert(s,t,c),append(t,n),mount_component(l,n,null),r=!0,a||(o=listen(t,"click",_),a=!0)},p(s,c){e=s,(!r||c[0]&8192&&i!==(i=`${e[13].t("crud.explore_db")}`))&&attr(t,"title",i)},i(s){r||(transition_in(l.$$.fragment,s),r=!0)},o(s){transition_out(l.$$.fragment,s),r=!1},d(s){s&&detach(t),destroy_component(l),a=!1,o()}}}function create_if_block_26(e){let t;return{c(){t=element("span")},m(n,l){insert(n,t,l)},p:noop,i:noop,o:noop,d(n){n&&detach(t)}}}function create_if_block_25(e){let t,n,l,i,r,a,o;l=new Icons({props:{type:"outline",icon:"document-arrow-down",path:"icons"}});function _(){return e[47](e[81])}return{c(){t=element("button"),n=element("span"),create_component(l.$$.fragment),attr(n,"class","w-6"),attr(t,"class","btn btn-circle btn-ghost btn-sm text-xs -m-1"),attr(t,"title",i=`${e[13].t("crud.export")}`)},m(s,c){insert(s,t,c),append(t,n),mount_component(l,n,null),r=!0,a||(o=listen(t,"click",_),a=!0)},p(s,c){e=s,(!r||c[0]&8192&&i!==(i=`${e[13].t("crud.export")}`))&&attr(t,"title",i)},i(s){r||(transition_in(l.$$.fragment,s),r=!0)},o(s){transition_out(l.$$.fragment,s),r=!1},d(s){s&&detach(t),destroy_component(l),a=!1,o()}}}function create_if_block_21(e){let t,n,l,i,r,a,o;l=new Icons({props:{type:"outline",icon:"trash",path:"icons"}});function _(){return e[44](e[81])}return{c(){t=element("button"),n=element("span"),create_component(l.$$.fragment),attr(n,"class","w-6"),attr(t,"class","btn btn-circle btn-ghost btn-sm text-xs -m-1"),attr(t,"title",i=`${e[13].t("crud.delete")}`)},m(s,c){insert(s,t,c),append(t,n),mount_component(l,n,null),r=!0,a||(o=listen(t,"click",_),a=!0)},p(s,c){e=s,(!r||c[0]&8192&&i!==(i=`${e[13].t("crud.delete")}`))&&attr(t,"title",i)},i(s){r||(transition_in(l.$$.fragment,s),r=!0)},o(s){transition_out(l.$$.fragment,s),r=!1},d(s){s&&detach(t),destroy_component(l),a=!1,o()}}}function create_each_block_5(e){let t,n,l,i,r,a,o;const _=[create_if_block_19,create_if_block_27,create_else_block_7],s=[];function c(u,m){var b,f;return((b=u[89])==null?void 0:b.type)==="button"?0:((f=u[89])==null?void 0:f.type)==="boolean"?1:2}return n=c(e),l=s[n]=_[n](e),{c(){var u,m,b;t=element("th"),l.c(),i=space(),attr(t,"class",r="normal-case "+(((u=e[89])==null?void 0:u.width)||"")+" "+(((m=e[89])==null?void 0:m.type)==="button"?"p-1":"")),attr(t,"style",a=((b=e[89])==null?void 0:b.style)||"")},m(u,m){insert(u,t,m),s[n].m(t,null),append(t,i),o=!0},p(u,m){var f,$,p;let b=n;n=c(u),n===b?s[n].p(u,m):(group_outros(),transition_out(s[b],1,1,()=>{s[b]=null}),check_outros(),l=s[n],l?l.p(u,m):(l=s[n]=_[n](u),l.c()),transition_in(l,1),l.m(t,i)),(!o||m[0]&4&&r!==(r="normal-case "+(((f=u[89])==null?void 0:f.width)||"")+" "+((($=u[89])==null?void 0:$.type)==="button"?"p-1":"")))&&attr(t,"class",r),(!o||m[0]&4&&a!==(a=((p=u[89])==null?void 0:p.style)||""))&&attr(t,"style",a)},i(u){o||(transition_in(l),o=!0)},o(u){transition_out(l),o=!1},d(u){u&&detach(t),s[n].d()}}}function create_else_block_1(e){var a;let t,n,l=ensure_array_like(((a=e[81])==null?void 0:a.fields)||[]),i=[];for(let o=0;o<l.length;o+=1)i[o]=create_each_block_3(get_each_context_3(e,l,o));const r=o=>transition_out(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=empty()},m(o,_){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(o,_);insert(o,t,_),n=!0},p(o,_){var s;if(_[0]&702625822){l=ensure_array_like(((s=o[81])==null?void 0:s.fields)||[]);let c;for(c=0;c<l.length;c+=1){const u=get_each_context_3(o,l,c);i[c]?(i[c].p(u,_),transition_in(i[c],1)):(i[c]=create_each_block_3(u),i[c].c(),transition_in(i[c],1),i[c].m(t.parentNode,t))}for(group_outros(),c=l.length;c<i.length;c+=1)r(c);check_outros()}},i(o){if(!n){for(let _=0;_<l.length;_+=1)transition_in(i[_]);n=!0}},o(o){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)transition_out(i[_]);n=!1},d(o){o&&detach(t),destroy_each(i,o)}}}function create_if_block_7(e){var p;let t,n,l,i,r,a,o,_,s,c=((p=e[84])==null?void 0:p.html)+"",u,m,b,f;o=new Icons({props:{type:"outline",icon:"x",path:"icons"}});function $(){return e[51](e[84],e[87],e[88])}return{c(){var k,w,g;t=element("td"),n=element("div"),l=element("span"),i=space(),r=element("button"),a=element("span"),create_component(o.$$.fragment),_=space(),s=new HtmlTag(!1),attr(l,"class","grow"),attr(a,"class","w-5"),attr(r,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),set_style(r,"display",(k=e[84])!=null&&k.html?null:"none"),attr(n,"class","flex flex-row z-[2] !-mb-7"),s.a=null,attr(t,"class","normal-case"),attr(t,"colspan",u=(g=(w=e[81])==null?void 0:w.fields)==null?void 0:g.length)},m(k,w){insert(k,t,w),append(t,n),append(n,l),append(n,i),append(n,r),append(r,a),mount_component(o,a,null),append(t,_),s.m(c,t),m=!0,b||(f=listen(r,"click",$),b=!0)},p(k,w){var g,O,T,L;e=k,w[0]&2068&&set_style(r,"display",(g=e[84])!=null&&g.html?null:"none"),(!m||w[0]&2068)&&c!==(c=((O=e[84])==null?void 0:O.html)+"")&&s.p(c),(!m||w[0]&4&&u!==(u=(L=(T=e[81])==null?void 0:T.fields)==null?void 0:L.length))&&attr(t,"colspan",u)},i(k){m||(transition_in(o.$$.fragment,k),m=!0)},o(k){transition_out(o.$$.fragment,k),m=!1},d(k){k&&detach(t),destroy_component(o),b=!1,f()}}}function create_else_block_4(e){let t,n,l,i,r,a,o;function _(){e[63].call(n,e[89],e[87],e[88])}return{c(){var s,c;t=element("td"),n=element("input"),i=space(),attr(n,"type","text"),attr(n,"class",l="input input-sm p-0 "+(((s=e[89])==null?void 0:s.width)||"w-full")+" bg-transparent"),attr(t,"class",r="p-0.5 "+(((c=e[89])==null?void 0:c.width)||""))},m(s,c){var u;insert(s,t,c),append(t,n),set_input_value(n,e[84][(u=e[89])==null?void 0:u.name]),append(t,i),a||(o=listen(n,"input",_),a=!0)},p(s,c){var u,m,b,f;e=s,c[0]&4&&l!==(l="input input-sm p-0 "+(((u=e[89])==null?void 0:u.width)||"w-full")+" bg-transparent")&&attr(n,"class",l),c[0]&2068&&n.value!==e[84][(m=e[89])==null?void 0:m.name]&&set_input_value(n,e[84][(b=e[89])==null?void 0:b.name]),c[0]&4&&r!==(r="p-0.5 "+(((f=e[89])==null?void 0:f.width)||""))&&attr(t,"class",r)},i:noop,o:noop,d(s){s&&detach(t),a=!1,o()}}}function create_if_block_18(e){let t,n,l,i,r,a,o;function _(){e[62].call(n,e[89],e[87],e[88])}return{c(){var s,c;t=element("td"),n=element("input"),i=space(),attr(n,"type","date"),attr(n,"class",l="input input-sm p-0 pl-2 pr-2 "+(((s=e[89])==null?void 0:s.width)||"w-full")+" input-bordered bg-transparent"),attr(t,"class",r="p-0.5 "+(((c=e[89])==null?void 0:c.width)||""))},m(s,c){var u;insert(s,t,c),append(t,n),set_input_value(n,e[84][(u=e[89])==null?void 0:u.name]),append(t,i),a||(o=listen(n,"input",_),a=!0)},p(s,c){var u,m,b;e=s,c[0]&4&&l!==(l="input input-sm p-0 pl-2 pr-2 "+(((u=e[89])==null?void 0:u.width)||"w-full")+" input-bordered bg-transparent")&&attr(n,"class",l),c[0]&2068&&set_input_value(n,e[84][(m=e[89])==null?void 0:m.name]),c[0]&4&&r!==(r="p-0.5 "+(((b=e[89])==null?void 0:b.width)||""))&&attr(t,"class",r)},i:noop,o:noop,d(s){s&&detach(t),a=!1,o()}}}function create_if_block_17(e){let t,n,l,i,r,a,o,_,s,c,u,m,b,f,$,p,k,w,g,O,T,L,Y,S,J;r=new Icons({props:{type:"outline",icon:"link",path:"icons"}});function X(){e[56].call(s,e[89],e[87],e[88])}function C(...v){return e[57](e[89],e[81],e[88],e[84],...v)}function U(...v){return e[58](e[89],...v)}function z(...v){return e[59](e[89],e[81],e[88],e[84],...v)}p=new Icons({props:{type:"outline",icon:"paper-clip",path:"icons"}});function I(...v){return e[60](e[89],e[81],e[83],e[88],...v)}function j(...v){return e[61](e[89],e[81],e[88],e[84],...v)}return{c(){var v,B,q,V,R,A,Q,Z;t=element("td"),n=element("div"),l=element("a"),i=element("span"),create_component(r.$$.fragment),_=space(),s=element("input"),b=space(),f=element("button"),$=element("span"),create_component(p.$$.fragment),w=space(),g=element("input"),T=space(),attr(i,"class","w-5 h-5"),attr(l,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),attr(l,"title",a=e[13].t("crud.download")),attr(l,"target","_blank"),attr(l,"href",o=`${get_upload_api((v=e[12])==null?void 0:v.conf,!0)}/${e[84][e[89].name]}`),set_style(l,"display",e[84][e[89].name]&&!((B=e[84])!=null&&B.save_only_temp)?null:"none"),attr(s,"type","text"),attr(s,"id",c=`${(q=e[81])==null?void 0:q.table}-${e[89].name}-${e[83]}-${e[88]}`),attr(s,"name",u=e[89].name),attr(s,"class",m="grow input "+(e[84][e[89].name]&&!((V=e[84])!=null&&V.save_only_temp)?"pl-8":"")+" pr-8 input-bordered w-full input-sm "+(((A=e[3])==null?void 0:A[(R=e[89])==null?void 0:R.name])||"")),attr(s,"autocomplete","off"),attr(s,"autocorrect","off"),attr($,"class","w-5 h-5"),attr(f,"class","btn btn-square btn-ghost btn-sm -ml-8 z-[1]"),attr(f,"title",k=`${e[13].t("crud.attach")} ${e[13].t("crud.file")}`),attr(g,"type","file"),attr(g,"id",O=`${(Q=e[81])==null?void 0:Q.table}-${e[89].name}-${e[83]}-${e[88]}-file`),set_style(g,"display","none"),attr(n,"class","flex p-0"),attr(t,"class",L="p-0.5 "+(((Z=e[89])==null?void 0:Z.width)||""))},m(v,B){insert(v,t,B),append(t,n),append(n,l),append(l,i),mount_component(r,i,null),append(n,_),append(n,s),set_input_value(s,e[84][e[89].name]),append(n,b),append(n,f),append(f,$),mount_component(p,$,null),append(n,w),append(n,g),append(t,T),Y=!0,S||(J=[listen(s,"input",X),listen(s,"drop",C),listen(s,"dragenter",U),listen(s,"paste",z),listen(f,"click",I),listen(g,"change",j)],S=!0)},p(v,B){var q,V,R,A,Q,Z,x,y;e=v,(!Y||B[0]&8192&&a!==(a=e[13].t("crud.download")))&&attr(l,"title",a),(!Y||B[0]&6164&&o!==(o=`${get_upload_api((q=e[12])==null?void 0:q.conf,!0)}/${e[84][e[89].name]}`))&&attr(l,"href",o),B[0]&2068&&set_style(l,"display",e[84][e[89].name]&&!((V=e[84])!=null&&V.save_only_temp)?null:"none"),(!Y||B[0]&4&&c!==(c=`${(R=e[81])==null?void 0:R.table}-${e[89].name}-${e[83]}-${e[88]}`))&&attr(s,"id",c),(!Y||B[0]&4&&u!==(u=e[89].name))&&attr(s,"name",u),(!Y||B[0]&2076&&m!==(m="grow input "+(e[84][e[89].name]&&!((A=e[84])!=null&&A.save_only_temp)?"pl-8":"")+" pr-8 input-bordered w-full input-sm "+(((Z=e[3])==null?void 0:Z[(Q=e[89])==null?void 0:Q.name])||"")))&&attr(s,"class",m),B[0]&2068&&s.value!==e[84][e[89].name]&&set_input_value(s,e[84][e[89].name]),(!Y||B[0]&8192&&k!==(k=`${e[13].t("crud.attach")} ${e[13].t("crud.file")}`))&&attr(f,"title",k),(!Y||B[0]&4&&O!==(O=`${(x=e[81])==null?void 0:x.table}-${e[89].name}-${e[83]}-${e[88]}-file`))&&attr(g,"id",O),(!Y||B[0]&4&&L!==(L="p-0.5 "+(((y=e[89])==null?void 0:y.width)||"")))&&attr(t,"class",L)},i(v){Y||(transition_in(r.$$.fragment,v),transition_in(p.$$.fragment,v),Y=!0)},o(v){transition_out(r.$$.fragment,v),transition_out(p.$$.fragment,v),Y=!1},d(v){v&&detach(t),destroy_component(r),destroy_component(p),S=!1,run_all(J)}}}function create_if_block_16(e){var m;let t,n,l,i,r,a,o,_,s,c;i=new Icons({props:{type:"outline",icon:(m=e[89])==null?void 0:m.icon,path:"icons"}});function u(){return e[55](e[89],e[84],e[88],e[81])}return{c(){var b,f;t=element("td"),n=element("button"),l=element("span"),create_component(i.$$.fragment),a=space(),attr(l,"class","w-5"),attr(n,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),n.disabled=r=!!e[16](((b=e[89])==null?void 0:b.disabled)||"false",e[84],null,e[1]),attr(t,"class","p-0.5 w-8 text-right"),attr(t,"title",o=(f=e[89])==null?void 0:f.label)},m(b,f){insert(b,t,f),append(t,n),append(n,l),mount_component(i,l,null),append(t,a),_=!0,s||(c=listen(n,"click",u),s=!0)},p(b,f){var p,k,w;e=b;const $={};f[0]&4&&($.icon=(p=e[89])==null?void 0:p.icon),i.$set($),(!_||f[0]&2070&&r!==(r=!!e[16](((k=e[89])==null?void 0:k.disabled)||"false",e[84],null,e[1])))&&(n.disabled=r),(!_||f[0]&4&&o!==(o=(w=e[89])==null?void 0:w.label))&&attr(t,"title",o)},i(b){_||(transition_in(i.$$.fragment,b),_=!0)},o(b){transition_out(i.$$.fragment,b),_=!1},d(b){b&&detach(t),destroy_component(i),s=!1,c()}}}function create_if_block_15(e){var u;let t,n,l,i,r,a,o,_=ensure_array_like(((u=e[89])==null?void 0:u.options)||[]),s=[];for(let m=0;m<_.length;m+=1)s[m]=create_each_block_4(get_each_context_4(e,_,m));function c(){e[54].call(n,e[89],e[87],e[88])}return{c(){var m,b,f;t=element("td"),n=element("select");for(let $=0;$<s.length;$+=1)s[$].c();i=space(),attr(n,"class",l="select select-sm p-0.5 "+(((m=e[89])==null?void 0:m.width)||"w-full bg-transparent")),e[84][(b=e[89])==null?void 0:b.name]===void 0&&add_render_callback(c),attr(t,"class",r="p-0.5 "+(((f=e[89])==null?void 0:f.width)||""))},m(m,b){var f;insert(m,t,b),append(t,n);for(let $=0;$<s.length;$+=1)s[$]&&s[$].m(n,null);select_option(n,e[84][(f=e[89])==null?void 0:f.name],!0),append(t,i),a||(o=listen(n,"change",c),a=!0)},p(m,b){var f,$,p,k;if(e=m,b[0]&4){_=ensure_array_like(((f=e[89])==null?void 0:f.options)||[]);let w;for(w=0;w<_.length;w+=1){const g=get_each_context_4(e,_,w);s[w]?s[w].p(g,b):(s[w]=create_each_block_4(g),s[w].c(),s[w].m(n,null))}for(;w<s.length;w+=1)s[w].d(1);s.length=_.length}b[0]&4&&l!==(l="select select-sm p-0.5 "+((($=e[89])==null?void 0:$.width)||"w-full bg-transparent"))&&attr(n,"class",l),b[0]&2068&&select_option(n,e[84][(p=e[89])==null?void 0:p.name]),b[0]&4&&r!==(r="p-0.5 "+(((k=e[89])==null?void 0:k.width)||""))&&attr(t,"class",r)},i:noop,o:noop,d(m){m&&detach(t),destroy_each(s,m),a=!1,o()}}}function create_if_block_14(e){let t,n,l,i,r,a;function o(){e[53].call(n,e[89],e[87],e[88])}return{c(){var _;t=element("td"),n=element("input"),l=space(),attr(n,"type","checkbox"),attr(n,"class","toggle toggle-sm toggle-primary"),attr(t,"class",i="p-0.5 text-center align-middle "+(((_=e[89])==null?void 0:_.width)||""))},m(_,s){var c;insert(_,t,s),append(t,n),n.checked=e[84][(c=e[89])==null?void 0:c.name],append(t,l),r||(a=listen(n,"change",o),r=!0)},p(_,s){var c,u;e=_,s[0]&2068&&(n.checked=e[84][(c=e[89])==null?void 0:c.name]),s[0]&4&&i!==(i="p-0.5 text-center align-middle "+(((u=e[89])==null?void 0:u.width)||""))&&attr(t,"class",i)},i:noop,o:noop,d(_){_&&detach(t),r=!1,a()}}}function create_if_block_13(e){var c,u,m;let t,n,l=string_ellipsis((((u=e[84])==null?void 0:u[(c=e[89])==null?void 0:c.name])||"").replace(/^\w+\/|.+\//,""),((m=e[89])==null?void 0:m.ellipsis)||30)+"",i,r,a,o,_,s;return{c(){var b,f,$,p,k,w,g;t=element("td"),n=element("a"),i=text(l),o=space(),attr(n,"href",r=`${get_upload_api((b=e[12])==null?void 0:b.conf,!0)}/${e[84][e[89].name]}`),attr(n,"target","_blank"),attr(n,"class","link link-secondary"),attr(n,"title",a=e[84][(f=e[89])==null?void 0:f.tooltip]||string_ellipsis_title((e[84][($=e[89])==null?void 0:$.name]||"").replace(/^\w+\/|.+\//,""),((p=e[89])==null?void 0:p.ellipsis)||30)),set_style(n,"display",e[84][(k=e[89])==null?void 0:k.name]?null:"none"),attr(t,"class",_="normal-case "+(((w=e[89])==null?void 0:w.width)||"")),attr(t,"style",s=((g=e[89])==null?void 0:g.style)||"")},m(b,f){insert(b,t,f),append(t,n),append(n,i),append(t,o)},p(b,f){var $,p,k,w,g,O,T,L,Y,S;f[0]&2068&&l!==(l=string_ellipsis((((p=b[84])==null?void 0:p[($=b[89])==null?void 0:$.name])||"").replace(/^\w+\/|.+\//,""),((k=b[89])==null?void 0:k.ellipsis)||30)+"")&&set_data(i,l),f[0]&6164&&r!==(r=`${get_upload_api((w=b[12])==null?void 0:w.conf,!0)}/${b[84][b[89].name]}`)&&attr(n,"href",r),f[0]&2068&&a!==(a=b[84][(g=b[89])==null?void 0:g.tooltip]||string_ellipsis_title((b[84][(O=b[89])==null?void 0:O.name]||"").replace(/^\w+\/|.+\//,""),((T=b[89])==null?void 0:T.ellipsis)||30))&&attr(n,"title",a),f[0]&2068&&set_style(n,"display",b[84][(L=b[89])==null?void 0:L.name]?null:"none"),f[0]&4&&_!==(_="normal-case "+(((Y=b[89])==null?void 0:Y.width)||""))&&attr(t,"class",_),f[0]&4&&s!==(s=((S=b[89])==null?void 0:S.style)||"")&&attr(t,"style",s)},i:noop,o:noop,d(b){b&&detach(t)}}}function create_if_block_8(e){let t,n,l,i,r,a,o;const _=[create_if_block_9,create_if_block_10,create_if_block_12,create_else_block_3],s=[];function c(u,m){var b,f,$;return u[89].dt_frmt?0:((b=u[89])==null?void 0:b.name)==="value"&&((f=u[81])==null?void 0:f.table)==="etl_report_base_log"?1:($=u[89])!=null&&$.check_first?2:3}return n=c(e),l=s[n]=_[n](e),{c(){var u,m;t=element("td"),l.c(),i=space(),attr(t,"class",r="normal-case "+(((u=e[89])==null?void 0:u.width)||"")),attr(t,"style",a=((m=e[89])==null?void 0:m.style)||"")},m(u,m){insert(u,t,m),s[n].m(t,null),append(t,i),o=!0},p(u,m){var f,$;let b=n;n=c(u),n===b?s[n].p(u,m):(group_outros(),transition_out(s[b],1,1,()=>{s[b]=null}),check_outros(),l=s[n],l?l.p(u,m):(l=s[n]=_[n](u),l.c()),transition_in(l,1),l.m(t,i)),(!o||m[0]&4&&r!==(r="normal-case "+(((f=u[89])==null?void 0:f.width)||"")))&&attr(t,"class",r),(!o||m[0]&4&&a!==(a=(($=u[89])==null?void 0:$.style)||""))&&attr(t,"style",a)},i(u){o||(transition_in(l),o=!0)},o(u){transition_out(l),o=!1},d(u){u&&detach(t),s[n].d()}}}function create_each_block_4(e){let t,n=e[92].label+"",l,i;return{c(){t=element("option"),l=text(n),t.__value=i=e[92].value,set_input_value(t,t.__value)},m(r,a){insert(r,t,a),append(t,l)},p(r,a){a[0]&4&&n!==(n=r[92].label+"")&&set_data(l,n),a[0]&4&&i!==(i=r[92].value)&&(t.__value=i,set_input_value(t,t.__value))},d(r){r&&detach(t)}}}function create_else_block_3(e){var r,a,o;let t,n=string_ellipsis((a=e[84])==null?void 0:a[(r=e[89])==null?void 0:r.name],((o=e[89])==null?void 0:o.ellipsis)||30)+"",l,i;return{c(){var _,s,c;t=element("span"),l=text(n),attr(t,"title",i=e[84][(_=e[89])==null?void 0:_.tooltip]||string_ellipsis_title(e[84][(s=e[89])==null?void 0:s.name],((c=e[89])==null?void 0:c.ellipsis)||30))},m(_,s){insert(_,t,s),append(t,l)},p(_,s){var c,u,m,b,f,$;s[0]&2068&&n!==(n=string_ellipsis((u=_[84])==null?void 0:u[(c=_[89])==null?void 0:c.name],((m=_[89])==null?void 0:m.ellipsis)||30)+"")&&set_data(l,n),s[0]&2068&&i!==(i=_[84][(b=_[89])==null?void 0:b.tooltip]||string_ellipsis_title(_[84][(f=_[89])==null?void 0:f.name],(($=_[89])==null?void 0:$.ellipsis)||30))&&attr(t,"title",i)},i:noop,o:noop,d(_){_&&detach(t)}}}function create_if_block_12(e){var r;let t,n=string_ellipsis(e[29]({d:e[84],field:e[89]}),((r=e[89])==null?void 0:r.ellipsis)||30)+"",l,i;return{c(){var a,o;t=element("span"),l=text(n),attr(t,"title",i=e[84][(a=e[89])==null?void 0:a.tooltip]||string_ellipsis_title(e[29]({d:e[84],field:e[89]}),((o=e[89])==null?void 0:o.ellipsis)||30))},m(a,o){insert(a,t,o),append(t,l)},p(a,o){var _,s,c;o[0]&2068&&n!==(n=string_ellipsis(a[29]({d:a[84],field:a[89]}),((_=a[89])==null?void 0:_.ellipsis)||30)+"")&&set_data(l,n),o[0]&2068&&i!==(i=a[84][(s=a[89])==null?void 0:s.tooltip]||string_ellipsis_title(a[29]({d:a[84],field:a[89]}),((c=a[89])==null?void 0:c.ellipsis)||30))&&attr(t,"title",i)},i:noop,o:noop,d(a){a&&detach(t)}}}function create_if_block_10(e){let t,n,l,i,r,a,o,_,s;l=new Icons({props:{type:"outline",icon:"eye",path:"icons"}});function c(){return e[52](e[84],e[87],e[88])}function u(f,$){var p,k;return $[0]&2068&&(r=null),r==null&&(r=!!(((k=(p=f[84])==null?void 0:p.type)==null?void 0:k.toLowerCase())==="export"&&f[29]({d:f[84],field:f[89]}))),r?create_if_block_11:create_else_block_2}let m=u(e,[-1,-1,-1,-1]),b=m(e);return{c(){var f;t=element("button"),n=element("span"),create_component(l.$$.fragment),i=space(),b.c(),a=empty(),attr(n,"class","w-5"),attr(t,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),set_style(t,"display",(f=e[84])!=null&&f.html?null:"none")},m(f,$){insert(f,t,$),append(t,n),mount_component(l,n,null),insert(f,i,$),b.m(f,$),insert(f,a,$),o=!0,_||(s=listen(t,"click",c),_=!0)},p(f,$){var p;e=f,$[0]&2068&&set_style(t,"display",(p=e[84])!=null&&p.html?null:"none"),m===(m=u(e,$))&&b?b.p(e,$):(b.d(1),b=m(e),b&&(b.c(),b.m(a.parentNode,a)))},i(f){o||(transition_in(l.$$.fragment,f),o=!0)},o(f){transition_out(l.$$.fragment,f),o=!1},d(f){f&&(detach(t),detach(i),detach(a)),destroy_component(l),b.d(f),_=!1,s()}}}function create_if_block_9(e){var l,i;let t=hooks((i=e[84])==null?void 0:i[(l=e[89])==null?void 0:l.name]).format(e[89].dt_frmt)+"",n;return{c(){n=text(t)},m(r,a){insert(r,n,a)},p(r,a){var o,_;a[0]&2068&&t!==(t=hooks((_=r[84])==null?void 0:_[(o=r[89])==null?void 0:o.name]).format(r[89].dt_frmt)+"")&&set_data(n,t)},i:noop,o:noop,d(r){r&&detach(n)}}}function create_else_block_2(e){var r;let t,n=string_ellipsis(e[29]({d:e[84],field:e[89]}),((r=e[89])==null?void 0:r.ellipsis)||30)+"",l,i;return{c(){var a,o;t=element("span"),l=text(n),attr(t,"title",i=e[84][(a=e[89])==null?void 0:a.tooltip]||string_ellipsis_title(e[29]({d:e[84],field:e[89]}),((o=e[89])==null?void 0:o.ellipsis)||30))},m(a,o){insert(a,t,o),append(t,l)},p(a,o){var _,s,c;o[0]&2068&&n!==(n=string_ellipsis(a[29]({d:a[84],field:a[89]}),((_=a[89])==null?void 0:_.ellipsis)||30)+"")&&set_data(l,n),o[0]&2068&&i!==(i=a[84][(s=a[89])==null?void 0:s.tooltip]||string_ellipsis_title(a[29]({d:a[84],field:a[89]}),((c=a[89])==null?void 0:c.ellipsis)||30))&&attr(t,"title",i)},d(a){a&&detach(t)}}}function create_if_block_11(e){var a;let t,n=string_ellipsis((e[29]({d:e[84],field:e[89]})||"").replace(/^\w+\/|.+\//,""),((a=e[89])==null?void 0:a.ellipsis)||30)+"",l,i,r;return{c(){var o,_,s;t=element("a"),l=text(n),attr(t,"href",i=`${get_upload_api((o=e[12])==null?void 0:o.conf,!0)}/${e[29]({d:e[84],field:e[89]})}`),attr(t,"target","_blank"),attr(t,"class","link link-secondary"),attr(t,"title",r=e[84][(_=e[89])==null?void 0:_.tooltip]||string_ellipsis_title((e[29]({d:e[84],field:e[89]})||"").replace(/^\w+\/|.+\//,""),((s=e[89])==null?void 0:s.ellipsis)||30)),set_style(t,"display",e[29]({d:e[84],field:e[89]})?null:"none")},m(o,_){insert(o,t,_),append(t,l)},p(o,_){var s,c,u,m;_[0]&2068&&n!==(n=string_ellipsis((o[29]({d:o[84],field:o[89]})||"").replace(/^\w+\/|.+\//,""),((s=o[89])==null?void 0:s.ellipsis)||30)+"")&&set_data(l,n),_[0]&6164&&i!==(i=`${get_upload_api((c=o[12])==null?void 0:c.conf,!0)}/${o[29]({d:o[84],field:o[89]})}`)&&attr(t,"href",i),_[0]&2068&&r!==(r=o[84][(u=o[89])==null?void 0:u.tooltip]||string_ellipsis_title((o[29]({d:o[84],field:o[89]})||"").replace(/^\w+\/|.+\//,""),((m=o[89])==null?void 0:m.ellipsis)||30))&&attr(t,"title",r),_[0]&2068&&set_style(t,"display",o[29]({d:o[84],field:o[89]})?null:"none")},d(o){o&&detach(t)}}}function create_each_block_3(e){let t,n,l,i;const r=[create_if_block_8,create_if_block_13,create_if_block_14,create_if_block_15,create_if_block_16,create_if_block_17,create_if_block_18,create_else_block_4],a=[];function o(_,s){var c,u,m,b,f,$,p;return((c=_[89])==null?void 0:c.type)==="data"?0:((u=_[89])==null?void 0:u.type)==="link"?1:((m=_[89])==null?void 0:m.type)==="boolean"?2:((b=_[89])==null?void 0:b.type)==="select"?3:((f=_[89])==null?void 0:f.type)==="button"?4:(($=_[89])==null?void 0:$.type)==="file"?5:((p=_[89])==null?void 0:p.type)==="date"?6:7}return t=o(e),n=a[t]=r[t](e),{c(){n.c(),l=empty()},m(_,s){a[t].m(_,s),insert(_,l,s),i=!0},p(_,s){let c=t;t=o(_),t===c?a[t].p(_,s):(group_outros(),transition_out(a[c],1,1,()=>{a[c]=null}),check_outros(),n=a[t],n?n.p(_,s):(n=a[t]=r[t](_),n.c()),transition_in(n,1),n.m(l.parentNode,l))},i(_){i||(transition_in(n),i=!0)},o(_){transition_out(n),i=!1},d(_){_&&detach(l),a[t].d(_)}}}function create_if_block_6(e){let t,n,l,i,r;return{c(){var a;t=element("tr"),n=element("td"),l=element("progress"),r=space(),attr(l,"class","progress progress-primary w-full -mt-1 -mb-1"),set_style(l,"vertical-align","top"),attr(n,"colspan",i=(((a=e[81])==null?void 0:a.fields)||[]).length||1),attr(n,"class","p-0 m-0"),attr(t,"class","p-0")},m(a,o){insert(a,t,o),append(t,n),append(n,l),append(t,r)},p(a,o){var _;o[0]&4&&i!==(i=(((_=a[81])==null?void 0:_.fields)||[]).length||1)&&attr(n,"colspan",i)},d(a){a&&detach(t)}}}function create_each_block_2(e){let t,n,l,i,r,a;const o=[create_if_block_7,create_else_block_1],_=[];function s(u,m){var b;return u[84].show_html&&((b=u[84])!=null&&b.html)?0:1}n=s(e),l=_[n]=o[n](e);let c=e[84].loading___&&create_if_block_6(e);return{c(){t=element("tr"),l.c(),i=space(),c&&c.c(),r=empty(),attr(t,"class","hover"),set_style(t,"display",e[84].excluded?"None":null)},m(u,m){insert(u,t,m),_[n].m(t,null),insert(u,i,m),c&&c.m(u,m),insert(u,r,m),a=!0},p(u,m){let b=n;n=s(u),n===b?_[n].p(u,m):(group_outros(),transition_out(_[b],1,1,()=>{_[b]=null}),check_outros(),l=_[n],l?l.p(u,m):(l=_[n]=o[n](u),l.c()),transition_in(l,1),l.m(t,null)),m[0]&2068&&set_style(t,"display",u[84].excluded?"None":null),u[84].loading___?c?c.p(u,m):(c=create_if_block_6(u),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},i(u){a||(transition_in(l),a=!0)},o(u){transition_out(l),a=!1},d(u){u&&(detach(t),detach(i),detach(r)),_[n].d(),c&&c.d(u)}}}function create_if_block_5(e){var O,T,L,Y,S,J,X,C,U;let t,n,l,i,r,a=string_ellipsis(`${(Y=e[84])==null?void 0:Y[(L=(T=(O=e[81])==null?void 0:O.fields)==null?void 0:T[0])==null?void 0:L.name]} - ${(C=e[84])==null?void 0:C[(X=(J=(S=e[81])==null?void 0:S.fields)==null?void 0:J[1])==null?void 0:X.name]}`,60)+"",o,_,s,c,u,m,b,f=(((U=e[84])==null?void 0:U.html)||" ")+"",$,p,k,w;u=new Icons({props:{type:"outline",icon:"arrow-uturn-left",path:"icons"}});function g(){return e[34](e[81])}return{c(){t=element("div"),n=element("input"),l=space(),i=element("div"),r=element("div"),o=text(a),_=space(),s=element("button"),c=element("span"),create_component(u.$$.fragment),m=space(),b=element("div"),$=space(),attr(n,"type","radio"),attr(n,"name","my-accordion-2"),n.checked="checked",attr(r,"class","flex-grow"),attr(c,"class","w-6"),attr(s,"class","btn btn-circle btn-ghost btn-sm text-xs z-[1]"),attr(i,"class","collapse-title text-md font-medium flex row"),attr(b,"class","collapse-content"),attr(t,"class","collapse collapse-arrow bg-base-200")},m(z,I){insert(z,t,I),append(t,n),append(t,l),append(t,i),append(i,r),append(r,o),append(i,_),append(i,s),append(s,c),mount_component(u,c,null),append(t,m),append(t,b),b.innerHTML=f,append(t,$),p=!0,k||(w=listen(s,"click",g),k=!0)},p(z,I){var j,v,B,q,V,R,A,Q,Z;e=z,(!p||I[0]&2068)&&a!==(a=string_ellipsis(`${(q=e[84])==null?void 0:q[(B=(v=(j=e[81])==null?void 0:j.fields)==null?void 0:v[0])==null?void 0:B.name]} - ${(Q=e[84])==null?void 0:Q[(A=(R=(V=e[81])==null?void 0:V.fields)==null?void 0:R[1])==null?void 0:A.name]}`,60)+"")&&set_data(o,a),(!p||I[0]&2068)&&f!==(f=(((Z=e[84])==null?void 0:Z.html)||" ")+"")&&(b.innerHTML=f)},i(z){p||(transition_in(u.$$.fragment,z),p=!0)},o(z){transition_out(u.$$.fragment,z),p=!1},d(z){z&&detach(t),destroy_component(u),k=!1,w()}}}function create_each_block_1(e){var i;let t,n,l=((i=e[84])==null?void 0:i.html)&&create_if_block_5(e);return{c(){l&&l.c(),t=empty()},m(r,a){l&&l.m(r,a),insert(r,t,a),n=!0},p(r,a){var o;(o=r[84])!=null&&o.html?l?(l.p(r,a),a[0]&2068&&transition_in(l,1)):(l=create_if_block_5(r),l.c(),transition_in(l,1),l.m(t.parentNode,t)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(r){n||(transition_in(l),n=!0)},o(r){transition_out(l),n=!1},d(r){r&&detach(t),l&&l.d(r)}}}function create_each_block(e){var r;let t=e[5]===e[83]&&e[16](((r=e[81])==null?void 0:r.show)||"true",e[81],null,e[1]),n,l,i=t&&create_if_block_3(e);return{c(){i&&i.c(),n=empty()},m(a,o){i&&i.m(a,o),insert(a,n,o),l=!0},p(a,o){var _;o[0]&38&&(t=a[5]===a[83]&&a[16](((_=a[81])==null?void 0:_.show)||"true",a[81],null,a[1])),t?i?(i.p(a,o),o[0]&38&&transition_in(i,1)):(i=create_if_block_3(a),i.c(),transition_in(i,1),i.m(n.parentNode,n)):i&&(group_outros(),transition_out(i,1,1,()=>{i=null}),check_outros())},i(a){l||(transition_in(i),l=!0)},o(a){transition_out(i),l=!1},d(a){a&&detach(n),i&&i.d(a)}}}function create_if_block_2(e){let t,n;return t=new Loadingv2({props:{open:e[8]}}),{c(){create_component(t.$$.fragment)},m(l,i){mount_component(t,l,i),n=!0},p(l,i){const r={};i[0]&256&&(r.open=l[8]),t.$set(r)},i(l){n||(transition_in(t.$$.fragment,l),n=!0)},o(l){transition_out(t.$$.fragment,l),n=!1},d(l){destroy_component(t,l)}}}function create_if_block_1(e){let t,n;return t=new Toast({props:{open:e[6].open,type:e[6].type,msg:e[6].msg,timer:2e4}}),t.$on("dismiss",e[65]),{c(){create_component(t.$$.fragment)},m(l,i){mount_component(t,l,i),n=!0},p(l,i){const r={};i[0]&64&&(r.open=l[6].open),i[0]&64&&(r.type=l[6].type),i[0]&64&&(r.msg=l[6].msg),t.$set(r)},i(l){n||(transition_in(t.$$.fragment,l),n=!0)},o(l){transition_out(t.$$.fragment,l),n=!1},d(l){destroy_component(t,l)}}}function create_if_block(e){let t,n;const l=[e[7]];let i={};for(let r=0;r<l.length;r+=1)i=assign(i,l[r]);return t=new Modal({props:i}),t.$on("dismiss",e[66]),{c(){create_component(t.$$.fragment)},m(r,a){mount_component(t,r,a),n=!0},p(r,a){const o=a[0]&128?get_spread_update(l,[get_spread_object(r[7])]):{};t.$set(o)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){destroy_component(t,r)}}}function create_fragment(e){var A,Q,Z,x,y;let t,n,l,i,r,a,o,_=((A=e[10])==null?void 0:A.type)+"",s,c,u=((Q=e[10])==null?void 0:Q.name)+"",m,b,f,$=hooks((Z=e[10])==null?void 0:Z.ref).format(e[13].t("fmrt.date"))+"",p,k,w=hooks((x=e[10])==null?void 0:x.start).format(e[13].t("fmrt.datetime"))+"",g,O,T=((y=e[10])==null?void 0:y.timer)+"",L,Y,S,J,X,C,U,z=ensure_array_like(e[2]),I=[];for(let D=0;D<z.length;D+=1)I[D]=create_each_block_7(get_each_context_7(e,z,D));let j=ensure_array_like(e[2]),v=[];for(let D=0;D<j.length;D+=1)v[D]=create_each_block(get_each_context(e,j,D));const B=D=>transition_out(v[D],1,1,()=>{v[D]=null});let q=e[8]&&create_if_block_2(e),V=e[6].open&&create_if_block_1(e),R=e[7].open&&create_if_block(e);return{c(){t=element("div"),n=element("ul");for(let D=0;D<I.length;D+=1)I[D].c();l=space();for(let D=0;D<v.length;D+=1)v[D].c();i=space(),r=element("div"),a=element("i"),o=element("b"),s=text(_),c=text("/"),m=text(u),b=text(":"),f=space(),p=text($),k=text(" -> "),g=text(w),O=text(" -> "),L=text(T),Y=space(),q&&q.c(),S=space(),V&&V.c(),J=space(),R&&R.c(),X=space(),C=element("div"),attr(n,"class","steps w-full p-2"),attr(r,"class","pl-2 pr-2 -pt-8"),set_style(r,"font-family","'Courier New', Courier, monospace"),set_style(r,"display",e[9]?null:"none"),attr(t,"class","--flex --flex-col"),attr(C,"class","input-primary input-lg"),set_style(C,"display","none")},m(D,P){insert(D,t,P),append(t,n);for(let K=0;K<I.length;K+=1)I[K]&&I[K].m(n,null);append(t,l);for(let K=0;K<v.length;K+=1)v[K]&&v[K].m(t,null);append(t,i),append(t,r),append(r,a),append(a,o),append(o,s),append(o,c),append(o,m),append(o,b),append(a,f),append(a,p),append(a,k),append(a,g),append(a,O),append(a,L),insert(D,Y,P),q&&q.m(D,P),insert(D,S,P),V&&V.m(D,P),insert(D,J,P),R&&R.m(D,P),insert(D,X,P),insert(D,C,P),U=!0},p(D,P){var K,ne,le,ie,ae;if(P[0]&65574){z=ensure_array_like(D[2]);let F;for(F=0;F<z.length;F+=1){const ee=get_each_context_7(D,z,F);I[F]?I[F].p(ee,P):(I[F]=create_each_block_7(ee),I[F].c(),I[F].m(n,null))}for(;F<I.length;F+=1)I[F].d(1);I.length=z.length}if(P[0]&1072691263){j=ensure_array_like(D[2]);let F;for(F=0;F<j.length;F+=1){const ee=get_each_context(D,j,F);v[F]?(v[F].p(ee,P),transition_in(v[F],1)):(v[F]=create_each_block(ee),v[F].c(),transition_in(v[F],1),v[F].m(t,i))}for(group_outros(),F=j.length;F<v.length;F+=1)B(F);check_outros()}(!U||P[0]&1024)&&_!==(_=((K=D[10])==null?void 0:K.type)+"")&&set_data(s,_),(!U||P[0]&1024)&&u!==(u=((ne=D[10])==null?void 0:ne.name)+"")&&set_data(m,u),(!U||P[0]&9216)&&$!==($=hooks((le=D[10])==null?void 0:le.ref).format(D[13].t("fmrt.date"))+"")&&set_data(p,$),(!U||P[0]&9216)&&w!==(w=hooks((ie=D[10])==null?void 0:ie.start).format(D[13].t("fmrt.datetime"))+"")&&set_data(g,w),(!U||P[0]&1024)&&T!==(T=((ae=D[10])==null?void 0:ae.timer)+"")&&set_data(L,T),P[0]&512&&set_style(r,"display",D[9]?null:"none"),D[8]?q?(q.p(D,P),P[0]&256&&transition_in(q,1)):(q=create_if_block_2(D),q.c(),transition_in(q,1),q.m(S.parentNode,S)):q&&(group_outros(),transition_out(q,1,1,()=>{q=null}),check_outros()),D[6].open?V?(V.p(D,P),P[0]&64&&transition_in(V,1)):(V=create_if_block_1(D),V.c(),transition_in(V,1),V.m(J.parentNode,J)):V&&(group_outros(),transition_out(V,1,1,()=>{V=null}),check_outros()),D[7].open?R?(R.p(D,P),P[0]&128&&transition_in(R,1)):(R=create_if_block(D),R.c(),transition_in(R,1),R.m(X.parentNode,X)):R&&(group_outros(),transition_out(R,1,1,()=>{R=null}),check_outros())},i(D){if(!U){for(let P=0;P<j.length;P+=1)transition_in(v[P]);transition_in(q),transition_in(V),transition_in(R),U=!0}},o(D){v=v.filter(Boolean);for(let P=0;P<v.length;P+=1)transition_out(v[P]);transition_out(q),transition_out(V),transition_out(R),U=!1},d(D){D&&(detach(t),detach(Y),detach(S),detach(J),detach(X),detach(C)),destroy_each(I,D),destroy_each(v,D),q&&q.d(D),V&&V.d(D),R&&R.d(D)}}}function instance($$self,$$props,$$invalidate){let $_global,$i18n;component_subscribe($$self,_global,e=>$$invalidate(12,$_global=e)),component_subscribe($$self,i18n,e=>$$invalidate(13,$i18n=e));let{table}=$$props,{data}=$$props,{option={}}=$$props,{action={}}=$$props,selected_etlrb={};const tables=["etl_report_base","etl_rbase_input","etl_rbase_output","etl_rbase_quality","etl_rb_reconcilia","etl_rb_reconc_dtail","etl_rbase_export","etl_report_base_log","etl_rbase_notify"];let steps=[{table:"etl_rbase_input",label:`${$i18n.t("crud.extract")} | ${$i18n.t("crud.input")}`,date_ref:hooks().subtract(1,"days").format("YYYY-MM-DD"),run_all_action:"extract",fields:[{name:"etl_rbase_input",type:"data",tooltip:"etl_rbase_input_desc",ellipsis:30},{name:"destination_table",type:"data",label:`${$i18n.t("table")}`,ellipsis:30},{name:"date_ref",label:`${$i18n.t("date")}`,type:"date",input:!0},{name:"file",label:`${$i18n.t("crud.file")}`,type:"file",input:!0},{name:"num_rows",label:`${$i18n.t("crud.n_rows")}`,type:"data",input:!0,style:"text-align: right"},{name:"ignore",label:`${$i18n.t("crud.ignore")}`,type:"boolean",input:!0},{name:"btn_extract",label:`${$i18n.t("crud.extract")}`,type:"button",input:!0,action:"extract",icon:"play",width:"w-10",disabled:"!d?.active || !d?.allow_import"},{name:"btn_nrows",label:`${$i18n.t("crud.n_rows")}`,type:"button",input:!0,action:"n_rows",icon:"check",width:"w-10"},{name:"btn_delete",label:`${$i18n.t("crud.delete")}`,type:"button",input:!0,action:"delete",icon:"trash",width:"w-10"},{name:"btn_edit",label:`${$i18n.t("crud.edit")}`,type:"button",input:!0,action:"edit",icon:"pencil",width:"w-10"},{name:"btn_copy",label:`${$i18n.t("crud.clone")}`,type:"button",input:!0,action:"copy",icon:"duplicate",width:"w-10"},{name:"btn_explore",label:`${$i18n.t("crud.explore_db")}`,type:"button",input:!0,action:"explore_db",icon:"table-cells",width:"w-10"}]},{table:"etl_rbase_output",detail_table:"etl_rb_output_field",label:`${$i18n.t("crud.transform")} | ${$i18n.t("crud.output")}`,dates_refs:[hooks().subtract(1,"days").format("YYYY-MM-DD")],run_all_action:"transform",fields:[{name:"etl_rbase_output",type:"data",tooltip:"etl_rbase_output_desc",ellipsis:30},{name:"etl_rbase_output_desc",type:"data",ellipsis:40},{name:"destination_table",type:"data",label:`${$i18n.t("table")}`,ellipsis:30},{name:"num_rows",label:`${$i18n.t("crud.n_rows")}`,type:"data",input:!0,style:"text-align: right"},{name:"ignore",label:`${$i18n.t("crud.ignore")}`,type:"boolean",input:!0},{name:"btn_transform",label:`${$i18n.t("crud.transform")}`,type:"button",input:!0,action:"transform",icon:"play",width:"w-10",disabled:"!d?.active"},{name:"btn_nrows",label:`${$i18n.t("crud.n_rows")}`,type:"button",input:!0,action:"n_rows",icon:"check",width:"w-10"},{name:"btn_details",label:`${$i18n.t("crud.details")}`,type:"button",input:!0,action:"details",icon:"ellipsis-vertical",width:"w-10"},{name:"btn_delete",label:`${$i18n.t("crud.delete")}`,type:"button",input:!0,action:"delete",icon:"trash",width:"w-10"},{name:"btn_edit",label:`${$i18n.t("crud.edit")}`,type:"button",input:!0,action:"edit",icon:"pencil",width:"w-10"},{name:"btn_copy",label:`${$i18n.t("crud.clone")}`,type:"button",input:!0,action:"copy",icon:"duplicate",width:"w-10"},{name:"btn_explore",label:`${$i18n.t("crud.explore_db")}`,type:"button",input:!0,action:"explore_db",icon:"table-cells",width:"w-10"}]},{table:"etl_rbase_quality",label:`${$i18n.t("crud.data_quality")}`,show:"selected_etlrb?.includes_data_quality",dates_refs:[hooks().subtract(1,"days").format("YYYY-MM-DD")],run_all_action:"data_quality",pre_filters:["num_erros_check:\\d{1,}","num_erros_fix:\\d{1,}"],fields:[{name:"etl_rbase_quality",type:"data",tooltip:"etl_rbase_output_desc",ellipsis:30},{name:"etl_rbase_quality_desc",type:"data",ellipsis:40},{name:"num_erros_check",label:`${$i18n.t("crud.num_erros_check")}`,type:"data",input:!0,style:"text-align: right"},{name:"num_erros_fix",label:`${$i18n.t("crud.num_erros_fix")}`,type:"data",input:!0,style:"text-align: right"},{name:"ignore",label:`${$i18n.t("crud.ignore")}`,type:"boolean",input:!0},{name:"btn_check",label:`${$i18n.t("crud.check")}`,type:"button",input:!0,action:"data_quality_check",icon:"check",width:"w-10",disabled:"!d?.active || !d?.sql_quality_check"},{name:"btn_fix",label:`${$i18n.t("crud.fix")}`,type:"button",input:!0,action:"data_quality_fix",icon:"play",width:"w-10",disabled:"!d?.active || !(d?.num_erros_check || d?.num_erros_check > 0) || !d?.sql_quality_fix"},{name:"btn_details",label:`${$i18n.t("crud.details")}`,type:"button",input:!0,action:"err_details",icon:"ellipsis-vertical",width:"w-10",disabled:"!(d?.num_erros_check || d?.num_erros_check > 0)"},{name:"btn_edit",label:`${$i18n.t("crud.edit")}`,type:"button",input:!0,action:"edit",icon:"pencil",width:"w-10"},{name:"btn_copy",label:`${$i18n.t("crud.clone")}`,type:"button",input:!0,action:"copy",icon:"duplicate",width:"w-10"}]},{table:"etl_rb_reconcilia",detail_table:"etl_rb_reconc_dtail",label:`${$i18n.t("crud.reconciliation")}`,show:"selected_etlrb?.includes_data_reconci",dates_refs:[hooks().subtract(1,"days").format("YYYY-MM-DD")],run_all_action:"data_reconcilia",fields:[{name:"etl_rb_reconcilia",type:"data",tooltip:"etl_rbase_output_desc",ellipsis:30},{name:"etl_rb_reconcilia_desc",type:"data",ellipsis:80},{name:"ignore",label:`${$i18n.t("crud.ignore")}`,type:"boolean",input:!0},{name:"btn_check",label:`${$i18n.t("crud.execute")}`,type:"button",input:!0,action:"data_reconcilia",icon:"play",width:"w-10",disabled:"!d?.active"},{name:"btn_preview",label:`${$i18n.t("crud.preview")}`,type:"button",input:!0,action:"data_reconcilia_preview",icon:"eye",width:"w-10",disabled:"!d?.active || !d.html"},{name:"btn_details",label:`${$i18n.t("crud.details")}`,type:"button",input:!0,action:"details",icon:"ellipsis-vertical",width:"w-10"},{name:"btn_edit",label:`${$i18n.t("crud.edit")}`,type:"button",input:!0,action:"edit",icon:"pencil",width:"w-10"},{name:"btn_copy",label:`${$i18n.t("crud.clone")}`,type:"button",input:!0,action:"copy",icon:"duplicate",width:"w-10"}]},{table:"etl_rbase_export",detail_table:"etl_rb_exp_dtail",label:`${$i18n.t("crud.export")} | ${$i18n.t("crud.template")}`,show:"selected_etlrb?.includes_exports",dates_refs:[hooks().subtract(1,"days").format("YYYY-MM-DD")],run_all_action:"export",fields:[{name:"etl_rbase_export",type:"data",tooltip:"etl_rbase_export_desc",ellipsis:30},{name:"etl_rbase_export_desc",type:"data",ellipsis:40},{name:"attach_file_template",type:"link",ellipsis:30},{name:"file",label:`${$i18n.t("crud.file")}`,type:"link",input:!0,ellipsis:30},{name:"ignore",label:`${$i18n.t("crud.ignore")}`,type:"boolean",input:!0},{name:"btn_check",label:`${$i18n.t("crud.execute")}`,type:"button",input:!0,action:"export",icon:"play",width:"w-10",disabled:"!d?.active"},{name:"btn_details",label:`${$i18n.t("crud.details")}`,type:"button",input:!0,action:"details",icon:"ellipsis-vertical",width:"w-10"},{name:"btn_edit",label:`${$i18n.t("crud.edit")}`,type:"button",input:!0,action:"edit",icon:"pencil",width:"w-10"},{name:"btn_copy",label:`${$i18n.t("crud.clone")}`,type:"button",input:!0,action:"copy",icon:"duplicate",width:"w-10"}]},{table:"etl_report_base_log",label:`${$i18n.t("crud.log")}`,order_by_field:"start",fields:[{name:"type",type:"data"},{name:"name",type:"data",ellipsis:30},{name:"ref",type:"data",dt_frmt:`${$i18n.t("fmrt.date")}`,style:"text-align: right"},{name:"start",type:"data",dt_frmt:`${$i18n.t("fmrt.datetime")}`,style:"text-align: right"},{name:"timer",type:"data",style:"text-align: right"},{name:"end",type:"data",dt_frmt:`${$i18n.t("fmrt.datetime")}`,style:"text-align: right"},{name:"success",type:"data"},{name:"msg",type:"data",ellipsis:30},{name:"value",type:"data",ellipsis:30,check_first:["n_rows","num_rows","fname","file","filename","errors","fixes","html"]}]},{table:"etl_rbase_notify",label:`${$i18n.t("crud.alert")} | ${$i18n.t("crud.notify")}`,show:"selected_etlrb?.includes_notify",dates_refs:[hooks().subtract(1,"days").format("YYYY-MM-DD")],run_all_action:"notify",fields:[{name:"notify_subject",type:"data",ellipsis:30},{name:"notify_body",type:"data",ellipsis:40},{name:"notify_to",type:"data",ellipsis:30},{name:"notify_cc",type:"data",ellipsis:30},{name:"ignore",label:`${$i18n.t("crud.ignore")}`,type:"boolean",input:!0},{name:"btn_notify",label:`${$i18n.t("crud.execute")}`,type:"button",input:!0,action:"notify",icon:"play",width:"w-10",disabled:"!d?.active"},{name:"btn_edit",label:`${$i18n.t("crud.edit")}`,type:"button",input:!0,action:"edit",icon:"pencil",width:"w-10"},{name:"btn_copy",label:`${$i18n.t("crud.clone")}`,type:"button",input:!0,action:"copy",icon:"duplicate",width:"w-10"}]}],field_order={};const drag_start_class={};let db_data={},tab=0,toast={open:!1,msg:null,type:null},modal_data={open:!1,width:12,heigth:85,header:!0,title:"Dialog Title",header_actions:[],component:null},loading=!1,loading_level2=!1,log={};const save=async e=>{var r,a,o,_,s,c,u,m;let t=((r=db_data==null?void 0:db_data[e.table])==null?void 0:r.data)||[];const n=lodashExports.cloneDeep(e.data||t);if(Array.isArray(n))n.forEach((b,f)=>{var $,p,k,w,g,O,T;for(const L in(p=($=$_global==null?void 0:$_global.tables)==null?void 0:$[e==null?void 0:e.table])==null?void 0:p.fields)if(Object.hasOwnProperty.call((w=(k=$_global==null?void 0:$_global.tables)==null?void 0:k[e==null?void 0:e.table])==null?void 0:w.fields,L)){const Y=(O=(g=$_global==null?void 0:$_global.tables)==null?void 0:g[e==null?void 0:e.table])==null?void 0:O.fields[L];if(b!=null&&b[Y.name]&&["date","datetime","time","timestamp"].includes((T=Y==null?void 0:Y.type)==null?void 0:T.toLowerCase())){const S=b[Y.name];n[f][Y.name]=hooks(b[Y.name]).format(),console.log(Y.name,S,n[f][Y.name])}}});else if(typeof n=="object"){for(const b in(o=(a=$_global==null?void 0:$_global.tables)==null?void 0:a[e==null?void 0:e.table])==null?void 0:o.fields)if(Object.hasOwnProperty.call((s=(_=$_global==null?void 0:$_global.tables)==null?void 0:_[e==null?void 0:e.table])==null?void 0:s.fields,b)){const f=(u=(c=$_global==null?void 0:$_global.tables)==null?void 0:c[e==null?void 0:e.table])==null?void 0:u.fields[b];n!=null&&n[f.name]&&["date","datetime","time","timestamp"].includes((m=f==null?void 0:f.type)==null?void 0:m.toLowerCase())&&(_aux=n[f.name],n[f.name]=hooks(n[b.name]).format(),console.log(f.name,_aux,n[f.name]))}}console.log({_data:n}),$$invalidate(8,loading=!0);const l={lang:$_global==null?void 0:$_global.lang,conf:$_global==null?void 0:$_global.conf,token:$_global==null?void 0:$_global.token,app:$_global==null?void 0:$_global.selected_app,table:e.table,data:n};if(!l.data||!l.table)return $$invalidate(8,loading=!1),null;const i=await create_update(l);i.success===!0?($$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="success",toast),$$invalidate(6,toast.msg=i.msg,toast),e!=null&&e.do_not_reload?console.log(i):get_data({})):($$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=i.msg,toast)),$$invalidate(8,loading=!1)},get_data=async e=>{var l,i,r,a,o,_;e.no_loding||$$invalidate(8,loading=!0);const t={lang:$_global==null?void 0:$_global.lang,conf:$_global==null?void 0:$_global.conf,token:$_global==null?void 0:$_global.token,app:$_global==null?void 0:$_global.selected_app,table:tables,filters:[{field:"etl_report_base_id",cond:"=",value:(e==null?void 0:e.etl_report_base_id)||(selected_etlrb==null?void 0:selected_etlrb.etl_report_base_id)},{field:"ref",cond:"LIKE",value:hooks((l=steps[0])==null?void 0:l.date_ref).format("YYYY-MM-DD")}],ignore_filter:{etl_report_base:["etl_report_base_id","database"]},limit:-1},n=await read(t);if(console.log("data:",n),n.success===!0&&n.data){(a=(r=(i=n.data)==null?void 0:i[tables[1]])==null?void 0:r.data)==null||a.forEach(s=>{var c;s.date_ref=(c=steps==null?void 0:steps[0])==null?void 0:c.date_ref}),$$invalidate(2,steps[3].show_html=!1,steps);for(const s in n.data)Object.hasOwnProperty.call(n.data,s)&&((_=(o=n.data[s])==null?void 0:o.data)==null||_.map((c,u)=>(c.index=u,c)));$$invalidate(4,db_data={...n.data})}else $$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=n.msg,toast);$$invalidate(8,loading=!1)},handle_pagination=e=>{var t,n,l;steps[e._index].offset||$$invalidate(2,steps[e._index].offset=0,steps),steps[e._index].limit||$$invalidate(2,steps[e._index].limit=10,steps),e.detail.type==="next"?$$invalidate(2,steps[e._index].offset=((t=steps==null?void 0:steps[e._index])==null?void 0:t.offset)+1,steps):e.detail.type==="back"?$$invalidate(2,steps[e._index].offset=((n=steps==null?void 0:steps[e._index])==null?void 0:n.offset)-1,steps):e.detail.type==="first"?$$invalidate(2,steps[e._index].offset=0,steps):e.detail.type==="last"?$$invalidate(2,steps[e._index].offset=Math.ceil(steps[e._index].limit/((e==null?void 0:e.length)||steps[e._index].limit)),steps):e.detail.type==="rows_per_page"&&($$invalidate(2,steps[e._index].limit=((l=e==null?void 0:e.detail)==null?void 0:l.rows_per_page)||10,steps),$$invalidate(2,steps[e._index].offset=0,steps)),$$invalidate(2,steps=[...steps])},_sort=(e,t,n)=>{var l;try{return field_order!=null&&field_order[t==null?void 0:t.table]||(field_order[t==null?void 0:t.table]={}),(l=field_order==null?void 0:field_order[t==null?void 0:t.table])!=null&&l[n==null?void 0:n.name]?field_order[t==null?void 0:t.table][n==null?void 0:n.name]=(field_order[t==null?void 0:t.table][n==null?void 0:n.name]||1)*-1:field_order[t==null?void 0:t.table][n==null?void 0:n.name]=1,e.sort((i,r)=>{let a;return i[n==null?void 0:n.name]>r[n==null?void 0:n.name]?a=1:(r[n==null?void 0:n.name]>i[n==null?void 0:n.name],a=-1),a*field_order[t==null?void 0:t.table][n==null?void 0:n.name]})}catch{return e}},get_step_data=(e,t)=>{var l;const n=(t||[]).filter(i=>{var a;let r=!0;if(e!=null&&e.filter){if(!(((a=e==null?void 0:e.filter)==null?void 0:a.length)<3)){r=!1;let o=e==null?void 0:e.filter;const _=o.split(":");let s=null;_.length>1&&(s=_[0],o=_[1],console.log({_field:s,_filter:o}));try{const c=new RegExp(o,"i");if(s)((i==null?void 0:i[s])||"").toString().match(c)&&(r=!0);else for(let u=0;u<Object.keys(i).length;u++){const m=Object.keys(i)[u];if(i[m]){if(i[m].toString().length<3)continue}else continue;if(i[m].toString().match(c)){r=!0;break}}}catch(c){console.log(c.message)}}}return r});if(e!=null&&e.order_by_field){const i=(l=e==null?void 0:e.fields)==null?void 0:l.filter(r=>(r==null?void 0:r.name)===(e==null?void 0:e.order_by_field))[0];return _sort(n,e,i)}else return n},get_eval=(payload,d,field,selected_etlrb)=>{try{return eval(payload)}catch(e){return console.log(payload,d,field,selected_etlrb,e.message),!1}},after_save_form=e=>{console.log("after_save_form".toUpperCase(),e),get_data({})},get_form_conf=e=>{var t,n,l,i,r,a;if((l=(n=(t=$_global==null?void 0:$_global.tables)==null?void 0:t[e])==null?void 0:n.custom_form)!=null&&l.config)try{return JSON.parse((a=(r=(i=$_global==null?void 0:$_global.tables)==null?void 0:i[e])==null?void 0:r.custom_form)==null?void 0:a.config)}catch(o){return console.log(o.message),{}}},get_form=async e=>{var t,n,l,i,r,a,o,_,s,c,u;try{const m=lodashExports.cloneDeep(e.data||{});e.clone===!0&&(m._origina_pk=m[(n=(t=$_global==null?void 0:$_global.tables)==null?void 0:t[e.table])==null?void 0:n.pk],delete m[(i=(l=$_global==null?void 0:$_global.tables)==null?void 0:l[e.table])==null?void 0:i.pk],m.clone=!0);let b=`${$i18n.t("crud.add")} - ${(a=(r=$_global==null?void 0:$_global.tables)==null?void 0:r[e.table])==null?void 0:a.comment}`;m!=null&&m[(_=(o=$_global==null?void 0:$_global.tables)==null?void 0:o[e.table])==null?void 0:_.pk]&&(b=`${$i18n.t("crud.edit")} - ${(c=(s=$_global==null?void 0:$_global.tables)==null?void 0:s[e.table])==null?void 0:c.comment}`),$$invalidate(8,loading=!0);const f=(await __vitePreload(()=>import("./GlobalForm-5a83ce41.js"),["assets/GlobalForm-5a83ce41.js","assets/index-13d4ac78.js","assets/index-1fc5bb3b.css","assets/pt-607305e9.js","assets/ObjectEditor-dc630b79.js"])).default;$$invalidate(7,modal_data.actions=null,modal_data),$$invalidate(7,modal_data.header=!0,modal_data),$$invalidate(7,modal_data.component=f,modal_data),$$invalidate(7,modal_data.msg=null,modal_data),$$invalidate(7,modal_data.html_msg=null,modal_data),$$invalidate(7,modal_data.header_actions=[{type:"icon",icon:"cog-8-tooth",name:"form_customization",label:$i18n.t("crud.form_customization")},{type:"icon",icon:"save",name:"save",label:$i18n.t("crud.save"),action:after_save_form}],modal_data),$$invalidate(7,modal_data.title=b,modal_data),$$invalidate(7,modal_data.data={table:e==null?void 0:e.table,data:m,aux_data:lodashExports.cloneDeep(e==null?void 0:e.aux_data),main_table:(e==null?void 0:e.main_table)||table},modal_data);const $=get_form_conf(e==null?void 0:e.table);$$invalidate(7,modal_data.width=((u=$==null?void 0:$.layout)==null?void 0:u.size)||10,modal_data),$$invalidate(7,modal_data.heigth=null,modal_data),$$invalidate(7,modal_data.open=!0,modal_data),$$invalidate(8,loading=!1)}catch(m){$$invalidate(8,loading=!1),console.log(m.message),$$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=m.message,toast)}},set_dates=e=>{if((e==null?void 0:e.length)>0){const t=steps;t[tab].dates_refs=lodashExports.cloneDeep(e),$$invalidate(2,steps=[...lodashExports.cloneDeep(t)]),dismiss_modal()}},pick_dates=async e=>{try{$$invalidate(8,loading=!0);const t=(await __vitePreload(()=>import("./PickDates-6c719e6f.js"),["assets/PickDates-6c719e6f.js","assets/index-13d4ac78.js","assets/index-1fc5bb3b.css","assets/pt-607305e9.js"])).default;$$invalidate(7,modal_data.actions=null,modal_data),$$invalidate(7,modal_data.header=!0,modal_data),$$invalidate(7,modal_data.component=t,modal_data),$$invalidate(7,modal_data.msg=null,modal_data),$$invalidate(7,modal_data.html_msg=null,modal_data),$$invalidate(7,modal_data.header_actions=[],modal_data),$$invalidate(7,modal_data.title=`${$i18n.t("crud.set")} ${$i18n.t("crud.date")}s`,modal_data),$$invalidate(7,modal_data.data={dates_refs:lodashExports.cloneDeep((e==null?void 0:e.dates_refs)||[]),set_dates},modal_data),$$invalidate(7,modal_data.actions=[{type:"btn",icon:"ban",name:"CANCEL",class:"btn-sm text-error",label:$i18n.t("crud.cancel"),action:dismiss_modal},{type:"btn",icon:"trash",name:"CLEAN",class:"btn-sm text-warning",label:$i18n.t("crud.clean")},{type:"btn",icon:"check",name:"SET",class:"btn-sm text-success",label:$i18n.t("crud.set"),action:set_dates}],modal_data),$$invalidate(7,modal_data.width=4,modal_data),$$invalidate(7,modal_data.heigth=null,modal_data),$$invalidate(7,modal_data.open=!0,modal_data),$$invalidate(8,loading=!1)}catch(t){$$invalidate(8,loading=!1),console.log(t.message),$$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=t.message,toast)}},explore_db=async e=>{var t,n,l;try{let i=`${$i18n.t("crud.explore_db")} - ${selected_etlrb==null?void 0:selected_etlrb.database}`,r=(t=e==null?void 0:e.data)==null?void 0:t.destination_table;((n=e==null?void 0:e.step)==null?void 0:n.table)==="etl_rbase_input"&&(r=(l=e==null?void 0:e.data)==null?void 0:l.destination_table),$$invalidate(8,loading=!0);const a=(await __vitePreload(()=>import("./DBExplorer-868b1fd1.js"),["assets/DBExplorer-868b1fd1.js","assets/index-13d4ac78.js","assets/index-1fc5bb3b.css","assets/pt-607305e9.js","assets/Pagination-a0736574.js"])).default;$$invalidate(7,modal_data.actions=null,modal_data),$$invalidate(7,modal_data.header=!0,modal_data),$$invalidate(7,modal_data.component=a,modal_data),$$invalidate(7,modal_data.msg=null,modal_data),$$invalidate(7,modal_data.html_msg=null,modal_data),$$invalidate(7,modal_data.header_actions=[{type:"btn",icon:"refresh",name:"REFRESH",class:"btn-sm text-info",label:$i18n.t("crud.refresh"),action:null},{type:"icon",icon:"save",name:"save",label:$i18n.t("crud.save"),action:after_save_form}],modal_data),$$invalidate(7,modal_data.title=i,modal_data),$$invalidate(7,modal_data.data={data:{manage_query_conf:e!=null&&e.manage_query_conf?JSON.stringify(e==null?void 0:e.manage_query_conf):null,table:r,database:selected_etlrb==null?void 0:selected_etlrb.database,etlrb:e==null?void 0:e.selected_etlrb,app:$_global==null?void 0:$_global.selected_app}},modal_data),$$invalidate(7,modal_data.width=95,modal_data),$$invalidate(7,modal_data.heigth=95,modal_data),$$invalidate(7,modal_data.open=!0,modal_data),$$invalidate(8,loading=!1)}catch(i){$$invalidate(8,loading=!1),console.log(i.message),$$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=i.message,toast)}},dismiss_modal=e=>{$$invalidate(7,modal_data.open=!1,modal_data)},select_file=e=>{try{document.getElementById(e.id).click()}catch(t){console.log(t.message)}},file_upload=async e=>{var t,n,l,i,r,a,o;$$invalidate(8,loading=!0);try{change_db_data({...e==null?void 0:e.data,value:(i=(l=(n=(t=e==null?void 0:e.event)==null?void 0:t.currentTarget)==null?void 0:n.files)==null?void 0:l[0])==null?void 0:i.name});const _={lang:$_global==null?void 0:$_global.lang,conf:$_global==null?void 0:$_global.conf,token:$_global==null?void 0:$_global.token,file:e.event.currentTarget.files[0],tmp:((a=(r=e==null?void 0:e.data)==null?void 0:r.data)==null?void 0:a.save_only_temp)||!1,path:null},s=await upload(_);s.success===!0?($$invalidate(30,data[(o=e==null?void 0:e.field)==null?void 0:o.name]=s.file,data),change_db_data({...e==null?void 0:e.data,value:s.file}),$$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="success",toast),$$invalidate(6,toast.msg=s.msg,toast)):($$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=s.msg,toast))}catch(_){console.log(_.message),$$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=_.message,toast)}$$invalidate(8,loading=!1)},drop_file_handler=(e,t)=>{try{e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(file_upload({data:t,event:{currentTarget:{files:e.dataTransfer.files}}}),e.dataTransfer.clearData())}catch(n){console.log(n.message)}},paste_file_handler=(e,t)=>{try{e.stopPropagation(),console.log(e,t,e.clipboardData.files),e.clipboardData.files&&e.clipboardData.files.length>0&&(file_upload({data:t,event:{currentTarget:{files:e.clipboardData.files}}}),e.clipboardData.clearData())}catch(n){console.log(n.message)}},set_entire_col_val=e=>{console.log(e),db_data[e==null?void 0:e.table].data.forEach(t=>{t[e==null?void 0:e.field]=e==null?void 0:e.value}),$$invalidate(4,db_data={...db_data}),console.log(db_data[e==null?void 0:e.table].data)},_set_all=e=>{var n,l;const t=steps;if(hooks(e).isValid()){for(let i=0;i<t.length;i++)(n=t[i])!=null&&n.date_ref?t[i].date_ref=hooks(e).clone().format("YYYY-MM-DD"):(l=t[i])!=null&&l.dates_refs&&(t[i].dates_refs=[hooks(e).clone().format("YYYY-MM-DD")]);$$invalidate(2,steps=[...t])}},change_db_data=e=>{var t,n;console.log(e),!((t=db_data==null?void 0:db_data[e==null?void 0:e.table])!=null&&t.data[e==null?void 0:e.index])&&typeof(e==null?void 0:e.value)=="object"&&((n=db_data==null?void 0:db_data[e==null?void 0:e.table])!=null&&n.data)?(db_data[e==null?void 0:e.table].data.unshift(e==null?void 0:e.value),$$invalidate(4,db_data={...db_data})):($$invalidate(4,db_data[e==null?void 0:e.table].data[e==null?void 0:e.index][e==null?void 0:e.field]=e==null?void 0:e.value,db_data),$$invalidate(4,db_data={...db_data}))},submenu=async e=>{var t,n,l,i,r,a,o,_;try{e.closeModal===!0&&dismiss_modal(),console.log({payload:e}),$$invalidate(8,loading=!0),$$invalidate(7,modal_data.msg=null,modal_data),$$invalidate(7,modal_data.html_msg=null,modal_data),$$invalidate(7,modal_data.header=!1,modal_data),$$invalidate(7,modal_data.heigth=90,modal_data);const s=`${(n=(t=$_global==null?void 0:$_global.tables)==null?void 0:t[e==null?void 0:e.table])==null?void 0:n.comment}`;$$invalidate(7,modal_data.title=s,modal_data),$$invalidate(7,modal_data.data={table:e==null?void 0:e.table,data:{data:lodashExports.cloneDeep(e==null?void 0:e.data)},aux_data:{data:lodashExports.cloneDeep(e==null?void 0:e.data)},is_fk:!1,is_subform:!1,is_submenu:!0,main_table:(e==null?void 0:e.main_table)||table,label:(i=e==null?void 0:e.data)!=null&&i[(l=e==null?void 0:e.aux)==null?void 0:l.referred_columns_desc]?`${(a=(r=$_global==null?void 0:$_global.tables)==null?void 0:r[(e==null?void 0:e.main_table)||table])==null?void 0:a.comment}: ${(_=e==null?void 0:e.data)==null?void 0:_[(o=e==null?void 0:e.aux)==null?void 0:o.referred_columns_desc]}/${s}`:null,actions:{dismiss_modal}},modal_data),$$invalidate(7,modal_data.component=(await __vitePreload(()=>import("./CrudHandler-d67cf66c.js"),["assets/CrudHandler-d67cf66c.js","assets/index-13d4ac78.js","assets/index-1fc5bb3b.css"])).default,modal_data),$$invalidate(7,modal_data.width=12,modal_data),$$invalidate(7,modal_data.open=!0,modal_data),$$invalidate(8,loading=!1)}catch(s){$$invalidate(8,loading=!1),console.log(s.message),$$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=s.message,toast)}},_lambd=e=>!(e!=null&&e.fix)&&(e!=null&&e.check)?e==null?void 0:e.check:e!=null&&e.fix&&!(e!=null&&e.check)?e==null?void 0:e.fix:!(e!=null&&e.fix)&&!(e!=null&&e.check)?0:`${e==null?void 0:e.fix} / ${e==null?void 0:e.check}`,run_action=async e=>{var i,r,a,o,_,s,c,u,m,b,f,$,p,k,w,g,O,T,L,Y,S,J,X,C,U,z,I,j,v,B,q,V,R,A,Q,Z,x,y,D,P,K,ne,le,ie,ae,F,ee,re,_e,oe,ce,ue,de,fe,me,be;change_db_data({table:(i=e==null?void 0:e.step)==null?void 0:i.table,index:e==null?void 0:e.index,field:"loading",value:!0});const t={class:"etl",method:(e==null?void 0:e.action)||((r=e==null?void 0:e.field)==null?void 0:r.action),conf:$_global==null?void 0:$_global.conf,token:$_global==null?void 0:$_global.token,app:$_global==null?void 0:$_global.selected_app,data:{...e,db_data:(e==null?void 0:e.action)=="notify"?db_data:null}};$$invalidate(9,loading_level2=!0),$$invalidate(10,log={type:(a=e==null?void 0:e.action)==null?void 0:a.toUpperCase(),name:(e==null?void 0:e.name)||`${(o=e==null?void 0:e.step)==null?void 0:o.label}/${e==null?void 0:e.action}`,ref:hooks((_=e==null?void 0:e.step)==null?void 0:_.date_ref),start:hooks(new Date),end:null,timer:null,success:null,msg:null,etl_report_base_id:selected_etlrb==null?void 0:selected_etlrb.etl_report_base_id,loading:!0}),db_data!=null&&db_data.etl_report_base_log||$$invalidate(4,db_data.etl_report_base_log={data:[]},db_data),db_data.etl_report_base_log.data.unshift(log);const n=0,l=setInterval(()=>{try{const h=hooks(new Date).diff(log==null?void 0:log.start,"milliseconds");$$invalidate(10,log.timer=`${(h/1e3).toFixed(2)} s`,log),h/1e3>60&&$$invalidate(10,log.timer=`${(h/1e3/60).toFixed(2)} m`,log),$$invalidate(4,db_data.etl_report_base_log.data[n].timer=log.timer,db_data),$$invalidate(4,db_data={...db_data})}catch(h){console.log("TIMER ERR:",h),clearInterval(l)}},100);try{const h=await gbl_api_call(t);if($$invalidate(10,log.end=hooks(new Date),log),console.log("action res:",h),h.success===!0){if($$invalidate(10,log.msg=h.msg,log),$$invalidate(10,log.success=h.success,log),(s=e==null?void 0:e.step)!=null&&s.run_all||($$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="success",toast),$$invalidate(6,toast.msg=h.msg,toast)),Object.hasOwnProperty.call(h,"n_rows")&&(change_db_data({table:(c=e==null?void 0:e.step)==null?void 0:c.table,index:e==null?void 0:e.index,field:"num_rows",value:format_number(h.n_rows||"0"," ",0,null)}),$$invalidate(10,log.n_rows=h.n_rows,log),$$invalidate(10,log.num_rows=h.n_rows,log),$$invalidate(10,log.value=format_number(h.n_rows||"0"," ",0,null),log),h.n_cols&&$$invalidate(10,log.value=`(${format_number(h.n_rows||"0"," ",0,null)}, ${format_number(h.n_cols||"0"," ",0,null)})`,log)),(u=h==null?void 0:h.data)!=null&&u.check||(m=h==null?void 0:h.data)!=null&&m.fix){const W=lodashExports.cloneDeep(get_step_data({...e==null?void 0:e.step,filter:null,order_by_field:null},(f=db_data==null?void 0:db_data[(b=e==null?void 0:e.step)==null?void 0:b.table])==null?void 0:f.data)).map((H,ke)=>{var M,E,G,$e,he,pe,ge,ve;return(E=(M=h==null?void 0:h.data)==null?void 0:M.check)!=null&&E[H==null?void 0:H.etl_rbase_quality_id]&&(H.num_erros_check=($e=(G=h==null?void 0:h.data)==null?void 0:G.check)==null?void 0:$e[H==null?void 0:H.etl_rbase_quality_id],H.check=H.num_erros_check),(pe=(he=h==null?void 0:h.data)==null?void 0:he.fix)!=null&&pe[H==null?void 0:H.etl_rbase_quality_id]&&(H.num_erros_fix=(ve=(ge=h==null?void 0:h.data)==null?void 0:ge.fix)==null?void 0:ve[H==null?void 0:H.etl_rbase_quality_id],H.fix=H.num_erros_fix),H});$$invalidate(10,log._data=W,log);const te=((p=Object.keys(($=h==null?void 0:h.data)==null?void 0:$.check))==null?void 0:p[0])||((w=Object.keys((k=h==null?void 0:h.data)==null?void 0:k.fix))==null?void 0:w[0]);$$invalidate(10,log.value=_lambd({fix:(O=(g=h==null?void 0:h.data)==null?void 0:g.fix)==null?void 0:O[te],check:(L=(T=h==null?void 0:h.data)==null?void 0:T.check)==null?void 0:L[te]}),log),$$invalidate(10,log.errors=(S=(Y=h==null?void 0:h.data)==null?void 0:Y.check)==null?void 0:S[te],log),$$invalidate(10,log.fixes=(X=(J=h==null?void 0:h.data)==null?void 0:J.fix)==null?void 0:X[te],log),$$invalidate(4,db_data={...db_data,[(C=e==null?void 0:e.step)==null?void 0:C.table]:{...db_data==null?void 0:db_data[(U=e==null?void 0:e.step)==null?void 0:U.table],data:[...lodashExports.cloneDeep(W)]}})}(e==null?void 0:e.action)==="data_reconcilia"&&(h!=null&&h.html)?($$invalidate(10,log.html=h==null?void 0:h.html,log),$$invalidate(10,log._data=h==null?void 0:h.data,log),change_db_data({table:(z=e==null?void 0:e.step)==null?void 0:z.table,index:e==null?void 0:e.index,field:"html",value:h==null?void 0:h.html}),change_db_data({table:(I=e==null?void 0:e.step)==null?void 0:I.table,index:e==null?void 0:e.index,field:"data",value:h==null?void 0:h.data})):(e==null?void 0:e.action)==="export"&&(h!=null&&h.data)&&($$invalidate(10,log.fname=(v=(j=h==null?void 0:h.data)==null?void 0:j[0])==null?void 0:v.fname,log),$$invalidate(10,log.value=(q=(B=h==null?void 0:h.data)==null?void 0:B[0])==null?void 0:q.fname,log),$$invalidate(10,log._data=h==null?void 0:h.data,log),change_db_data({table:(V=e==null?void 0:e.step)==null?void 0:V.table,index:e==null?void 0:e.index,field:"file",value:(A=(R=h==null?void 0:h.data)==null?void 0:R[0])==null?void 0:A.fname}),change_db_data({table:(Q=e==null?void 0:e.step)==null?void 0:Q.table,index:e==null?void 0:e.index,field:"data",value:h==null?void 0:h.data}))}else(Z=e==null?void 0:e.step)!=null&&Z.run_all||($$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=h.msg||h.toString(),toast)),$$invalidate(10,log.msg=toast.msg,log),$$invalidate(10,log.success=h.success,log)}catch(h){$$invalidate(10,log.end=hooks(new Date),log),(x=e==null?void 0:e.step)!=null&&x.run_all||($$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=`${(y=e==null?void 0:e.step)==null?void 0:y.label}/${e==null?void 0:e.action}: ${h==null?void 0:h.message}`,toast)),$$invalidate(10,log.msg=toast.msg,log),$$invalidate(10,log.success=!1,log)}try{const h=log.end.diff(log==null?void 0:log.start,"milliseconds");if($$invalidate(10,log.diff=h,log),$$invalidate(10,log.timer=`${(h/1e3).toFixed(2)} s`,log),h/1e3>60&&$$invalidate(10,log.timer=`${(h/1e3/60).toFixed(2)} m`,log),$$invalidate(10,log.loading=!1,log),$$invalidate(4,db_data.etl_report_base_log.data[n]=lodashExports.cloneDeep(log),db_data),log!=null&&log._data){if(((D=log==null?void 0:log._data)==null?void 0:D.length)>0){const W={export:"fname",extract:"n_rows",n_rows:"n_rows",data_quality:[{check:"errors"},{fix:"fixes"}]};let te=1;if(["data_quality","--data_quality_check","--data_quality_fix"].includes(e==null?void 0:e.action)&&(te=0,$$invalidate(10,log=lodashExports.cloneDeep(log)),db_data.etl_report_base_log.data.splice(n,1)),W!=null&&W[e==null?void 0:e.action])for(let H=te;H<((P=log==null?void 0:log._data)==null?void 0:P.length);H++)["data_quality","data_quality_check","data_quality_fix"].includes(e==null?void 0:e.action)?($$invalidate(10,log.value=_lambd((K=log==null?void 0:log._data)==null?void 0:K[H]),log),$$invalidate(10,log.errors=(le=(ne=log==null?void 0:log._data)==null?void 0:ne[H])==null?void 0:le.check,log),$$invalidate(10,log.fixes=(ae=(ie=log==null?void 0:log._data)==null?void 0:ie[H])==null?void 0:ae.fix,log),$$invalidate(10,log.name=(ee=(F=log==null?void 0:log._data)==null?void 0:F[H])==null?void 0:ee.etl_rbase_quality,log)):($$invalidate(10,log.value=(_e=(re=log==null?void 0:log._data)==null?void 0:re[H])==null?void 0:_e[W==null?void 0:W[e==null?void 0:e.action]],log),$$invalidate(10,log[W==null?void 0:W[e==null?void 0:e.action]]=(ce=(oe=log==null?void 0:log._data)==null?void 0:oe[H])==null?void 0:ce[W==null?void 0:W[e==null?void 0:e.action]],log)),(de=(ue=log==null?void 0:log._data)==null?void 0:ue[H])!=null&&de.date_ref&&$$invalidate(10,log.ref=hooks((me=(fe=log==null?void 0:log._data)==null?void 0:fe[H])==null?void 0:me.date_ref),log),db_data.etl_report_base_log.data.unshift(lodashExports.cloneDeep(log))}}$$invalidate(4,db_data={...db_data}),clearInterval(l),$$invalidate(9,loading_level2=!1),$$invalidate(10,log=null),change_db_data({table:(be=e==null?void 0:e.step)==null?void 0:be.table,index:e==null?void 0:e.index,field:"loading",value:!1})}catch(h){console.log(h),clearInterval(l)}return null},btn_action=e=>{var n,l,i,r,a,o,_,s,c,u,m,b,f,$,p,k;if(typeof(selected_etlrb==null?void 0:selected_etlrb.database)=="string"){if((n=selected_etlrb==null?void 0:selected_etlrb.database)!=null&&n.toString().match(/\{.*\}/))try{$$invalidate(1,selected_etlrb.database=JSON.parse(selected_etlrb.database),selected_etlrb)}catch{}}let t=(e==null?void 0:e.action)||((l=e==null?void 0:e.field)==null?void 0:l.action);switch(t){case"edit":get_form({data:e==null?void 0:e.data,table:(i=e==null?void 0:e.step)==null?void 0:i.table,main_table:table});break;case"copy":get_form({data:e==null?void 0:e.data,table:(r=e==null?void 0:e.step)==null?void 0:r.table,main_table:table,clone:!0});break;case"extract":run_action({...e,action:t,selected_etlrb});break;case"n_rows":run_action({...e,action:t,selected_etlrb});break;case"explore_db":explore_db({...e,action:t,selected_etlrb});break;case"data_reconcilia_preview":e.step.show_html=!e.step.show_html,$$invalidate(2,steps=[...steps]);break;case"details":submenu({table:(a=e==null?void 0:e.step)==null?void 0:a.detail_table,main_table:((o=e==null?void 0:e.step)==null?void 0:o.main_table)||((_=e==null?void 0:e.step)==null?void 0:_.table),data:lodashExports.cloneDeep(e==null?void 0:e.data)});break;case"err_details":let w=(s=e==null?void 0:e.data)==null?void 0:s.sql_quality_check,g=/,|;|\|/g,O=((u=(c=e==null?void 0:e.data)==null?void 0:c.tables)==null?void 0:u.split(g))||[],T=((b=(m=e==null?void 0:e.data)==null?void 0:m.fields)==null?void 0:b.split(g))||[];T.length>0?T=[...T.map(J=>({table:O==null?void 0:O[0],field:J}))]:T=[{table:O==null?void 0:O[0],field:"*"}],g=/COUNT\(\"?.+\"?\).+\"?.+\"?/g,w=w.replace(g,T.length>0?`"${T.map(S=>S==null?void 0:S.field).join('", "')}"`:"*"),g=/\{.*?\}/g;const L=w.match(g);L&&L.forEach(S=>{var C,U,z,I;const J=S.replace(/\{|\}/g,""),X=(I=(z=((C=e==null?void 0:e.step)==null?void 0:C.dates_refs)||[(U=e==null?void 0:e.step)==null?void 0:U.date_ref])==null?void 0:z.map(j=>hooks(j).format(J)))==null?void 0:I[0];w=w.replace(g,X)});const Y={tables:[...O],selecetd_table:O==null?void 0:O[0],selected_table_fields:[],selected_tab:string_ellipsis((f=e==null?void 0:e.data)==null?void 0:f.etl_rbase_quality),selected_tab_2_prev:string_ellipsis(($=e==null?void 0:e.data)==null?void 0:$.etl_rbase_quality),tabs:{[string_ellipsis((p=e==null?void 0:e.data)==null?void 0:p.etl_rbase_quality)]:{label:(k=e==null?void 0:e.data)==null?void 0:k.etl_rbase_quality,fields:[...T],sql:w,show:!0,use:!0,limit:10,offset:0}}};explore_db({...e,manage_query_conf:Y,action:t,selected_etlrb});break;case"delete":del_dialog({...e,action:t,selected_etlrb});break;default:run_action({...e,action:t,selected_etlrb});break}},run_all=async e=>{let t=e||steps;for(let n=0;n<t.length;n++){const l=await run_step({...t[n],run_all:!0});if(l){if(l.cancel===!0)return l}}},del_dialog=e=>{var n;const t=$i18n.t("crud.del_etl_alert",{item:e==null?void 0:e.name,len:e==null?void 0:e.items,s:(e==null?void 0:e.items)>1?"s":"",name:(e==null?void 0:e.label)||((n=e==null?void 0:e.step)==null?void 0:n.label)});$$invalidate(7,modal_data.component=null,modal_data),$$invalidate(7,modal_data.msg=null,modal_data),$$invalidate(7,modal_data.html_msg=`<span class="m-2 text-lg">${t}</span>`,modal_data),$$invalidate(7,modal_data.open=!0,modal_data),$$invalidate(7,modal_data.header=!1,modal_data),$$invalidate(7,modal_data.data=e,modal_data),$$invalidate(7,modal_data.actions=[{type:"btn",icon:"ban",name:"NO",class:"btn-sm text-error",label:$i18n.t("crud.no"),action:dismiss_modal},{type:"btn",icon:"check",name:"YES",class:"btn-sm text-success",label:$i18n.t("crud.yes"),action:deletion_confirm}],modal_data),$$invalidate(7,modal_data.width=4,modal_data),$$invalidate(7,modal_data.heigth=null,modal_data)},deletion_confirm=e=>{var t;console.log("deletion_confirm:",e==null?void 0:e.data),dismiss_modal(),(t=e==null?void 0:e.data)!=null&&t.is_step?run_step(e):run_action(e==null?void 0:e.data)},run_step=async e=>{var t,n,l,i,r,a,o,_,s,c,u,m,b;if(get_eval((e==null?void 0:e.show)||"true",e,null,selected_etlrb))if(e!=null&&e.run_all_action){const f=get_step_data(e,(t=db_data==null?void 0:db_data[e==null?void 0:e.table])==null?void 0:t.data);if((e==null?void 0:e.run_all_action)==="delete"&&!(e!=null&&e.del_confirmed))del_dialog({...e,del_confirmed:!0,is_step:!0,items:(f==null?void 0:f.length)||1});else{const $=e==null?void 0:e.run_all_action;if(["data_quality"].indexOf($)!==-1){const p=await run_action({field:(n=e==null?void 0:e.fields)==null?void 0:n[0],index:0,step:e,action:$,selected_etlrb,name:(r=f[0])==null?void 0:r[(i=(l=e==null?void 0:e.fields)==null?void 0:l[0])==null?void 0:i.name]});if(p){if(p.cancel===!0)return p}}else for(let p=0;p<f.length;p++){if(((a=f[p])==null?void 0:a.ignore)===!0)continue;if(Object.hasOwnProperty.call(f[p],"active")&&!((o=f[p])!=null&&o.active))continue;const k=(s=(_=e==null?void 0:e.fields)==null?void 0:_.filter(g=>(g==null?void 0:g.name)===(e==null?void 0:e.run_all_action)))==null?void 0:s[0],w=await run_action({field:k,data:f[p],index:((c=f[p])==null?void 0:c.index)||p,step:e,action:$,selected_etlrb,name:((b=f[p])==null?void 0:b[(m=(u=e==null?void 0:e.fields)==null?void 0:u[0])==null?void 0:m.name])||(e==null?void 0:e.run_all_action)});if(w){if(w.cancel===!0)return w}}}}else return null;else return null;return null},_get_value=e=>{var t,n,l,i,r,a,o,_;if(((n=(t=e==null?void 0:e.field)==null?void 0:t.check_first)==null?void 0:n.length)>0)for(let s=0;s<((l=e==null?void 0:e.field)==null?void 0:l.check_first.length);s++){const c=(i=e==null?void 0:e.field)==null?void 0:i.check_first[s];if((r=e==null?void 0:e.d)!=null&&r[c])return(a=e==null?void 0:e.d)==null?void 0:a[c]}return(_=e==null?void 0:e.d)==null?void 0:_[(o=e==null?void 0:e.field)==null?void 0:o.name]};onMount(async()=>{$i18n.changeLanguage($_global==null?void 0:$_global.lang);try{hooks.locale($_global==null?void 0:$_global.lang)}catch{hooks.locale("en-us")}console.log("ETL / REPORT  Mount:",{table,data,option}),console.log(JSON.stringify(steps));try{$$invalidate(1,selected_etlrb=lodashExports.cloneDeep(data))}catch(e){console.log(e.message)}(async()=>await get_data(data))()});const click_handler=e=>{$$invalidate(5,tab=e)},click_handler_1=e=>btn_action({field:{action:"data_reconcilia_preview"},step:e});function input_input_handler(e,t){e[t].date_ref=this.value,$$invalidate(2,steps)}const change_handler=(e,t)=>{var n;set_entire_col_val({value:(n=t.target)==null?void 0:n.value,field:t.target.name,table:e==null?void 0:e.table})},click_handler_2=(e,t)=>{_set_all(e.date_ref)};function input_input_handler_1(e,t){e[t].filter=this.value,$$invalidate(2,steps)}const click_handler_3=e=>pick_dates(e),func=e=>hooks(e).format($i18n.t("fmrt.date")),func_1=e=>hooks(e).format($i18n.t("fmrt.date")),focus_handler=e=>pick_dates(e),click_handler_4=e=>{var t,n;return save({table:e==null?void 0:e.table,data:(n=(t=db_data==null?void 0:db_data[e==null?void 0:e.table])==null?void 0:t.data)==null?void 0:n.map(l=>({...l,ref:hooks(l.ref).format("YYYY-MM-DD")})),do_not_reload:!1})},click_handler_5=e=>run_step({...e,run_all_action:"delete",run_all:!0}),click_handler_6=e=>get_form({data:selected_etlrb,table:e==null?void 0:e.table,main_table:table}),click_handler_7=e=>run_step({...e,run_all:!0}),click_handler_8=e=>{console.log("EXPORT STEP DATA","PDF","EXCEL",e)},click_handler_9=e=>explore_db(e);function input_change_handler(e,t,n){t[n][e==null?void 0:e.name]=this.checked,$$invalidate(2,steps)}const change_handler_1=(e,t,n)=>{var l;set_entire_col_val({value:(l=n.target)==null?void 0:l.checked,field:e==null?void 0:e.name,table:t==null?void 0:t.table})},click_handler_10=(e,t,n)=>{console.log(e==null?void 0:e.html),$$invalidate(11,t[n].show_html=!e.show_html,get_step_data,$$invalidate(2,steps),$$invalidate(4,db_data))},click_handler_11=(e,t,n)=>{$$invalidate(11,t[n].show_html=!e.show_html,get_step_data,$$invalidate(2,steps),$$invalidate(4,db_data))};function input_change_handler_1(e,t,n){t[n][e==null?void 0:e.name]=this.checked,$$invalidate(11,get_step_data),$$invalidate(2,steps),$$invalidate(4,db_data)}function select_change_handler(e,t,n){t[n][e==null?void 0:e.name]=select_value(this),$$invalidate(11,get_step_data),$$invalidate(2,steps),$$invalidate(4,db_data)}const click_handler_12=(e,t,n,l)=>{var i,r;return btn_action({field:e,data:t,index:(t==null?void 0:t.index)||n,step:l,name:t[(r=(i=l==null?void 0:l.fields)==null?void 0:i[0])==null?void 0:r.name]})};function input0_input_handler(e,t,n){t[n][e.name]=this.value,$$invalidate(11,get_step_data),$$invalidate(2,steps),$$invalidate(4,db_data)}const drop_handler=(e,t,n,l,i)=>{drop_file_handler(i,{field:e==null?void 0:e.name,table:t==null?void 0:t.table,index:n,data:l}),delete drag_start_class[e.name]},dragenter_handler=(e,t)=>{console.log("DRAG ENTER DO THE STYLING"),$$invalidate(3,drag_start_class[e.name]="input-primary input-lg",drag_start_class)},paste_handler=(e,t,n,l,i)=>{paste_file_handler(i,{field:e==null?void 0:e.name,table:t==null?void 0:t.table,index:n,data:l})},click_handler_13=(e,t,n,l,i)=>select_file({field:e,id:`${t==null?void 0:t.table}-${e.name}-${n}-${l}-file`}),change_handler_2=(e,t,n,l,i)=>file_upload({event:i,data:{field:e==null?void 0:e.name,table:t==null?void 0:t.table,index:n,data:l}});function input_input_handler_2(e,t,n){t[n][e==null?void 0:e.name]=this.value,$$invalidate(11,get_step_data),$$invalidate(2,steps),$$invalidate(4,db_data)}function input_input_handler_3(e,t,n){t[n][e==null?void 0:e.name]=this.value,$$invalidate(11,get_step_data),$$invalidate(2,steps),$$invalidate(4,db_data)}const pageChange_handler=(e,t,n)=>{var l,i;return handle_pagination({detail:n.detail,data:e,_index:t,length:(i=get_step_data(e,(l=db_data==null?void 0:db_data[e==null?void 0:e.table])==null?void 0:l.data))==null?void 0:i.length})},dismiss_handler=e=>{$$invalidate(6,toast.open=!1,toast)},dismiss_handler_1=e=>dismiss_modal(e.detail);return $$self.$$set=e=>{"table"in e&&$$invalidate(0,table=e.table),"data"in e&&$$invalidate(30,data=e.data),"option"in e&&$$invalidate(31,option=e.option),"action"in e&&$$invalidate(32,action=e.action)},$$self.$$.update=()=>{$$self.$$.dirty[0]&1&&console.log({table}),$$self.$$.dirty[1]&2&&((action==null?void 0:action.name)=="CANCEL"&&(action==null||action.action()),(action==null?void 0:action.name)=="SAVE"&&console.log(action),(action==null?void 0:action.name)=="REFRESH"&&(console.log(action),get_data({})),(action==null?void 0:action.name)=="RUN_ALL"&&(console.log(action),run_all(null)))},[table,selected_etlrb,steps,drag_start_class,db_data,tab,toast,modal_data,loading,loading_level2,log,get_step_data,$_global,$i18n,save,handle_pagination,get_eval,get_form,pick_dates,explore_db,dismiss_modal,select_file,file_upload,drop_file_handler,paste_file_handler,set_entire_col_val,_set_all,btn_action,run_step,_get_value,data,option,action,click_handler,click_handler_1,input_input_handler,change_handler,click_handler_2,input_input_handler_1,click_handler_3,func,func_1,focus_handler,click_handler_4,click_handler_5,click_handler_6,click_handler_7,click_handler_8,click_handler_9,input_change_handler,change_handler_1,click_handler_10,click_handler_11,input_change_handler_1,select_change_handler,click_handler_12,input0_input_handler,drop_handler,dragenter_handler,paste_handler,click_handler_13,change_handler_2,input_input_handler_2,input_input_handler_3,pageChange_handler,dismiss_handler,dismiss_handler_1]}class ETLReportBase extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{table:0,data:30,option:31,action:32},null,[-1,-1,-1,-1])}}export{ETLReportBase as default};
