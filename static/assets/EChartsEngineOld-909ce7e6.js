import{S as O,i as S,s as U,e as q,b,B as f,d as B,U as D,o as L,q as v,_ as T,r as j,u as k,F as N,y as z}from"./index-8239faad.js";import"./pt-4424e41e.js";import{i as F}from"./index-d8696fb1.js";function I(d){let a;return{c(){a=q("div"),b(a,"id",d[0]),f(a,"width",d[2].width||d[1]||"auto"),f(a,"height",Number(d[2].height)||150)},m(l,m){B(l,a,m)},p(l,[m]){m&1&&b(a,"id",l[0]),m&6&&f(a,"width",l[2].width||l[1]||"auto"),m&4&&f(a,"height",Number(l[2].height)||150)},i:D,o:D,d(l){l&&L(a)}}}function p(d,a,l){let m,_;v(d,T,t=>l(8,m=t)),v(d,j,t=>l(9,_=t));let{chrt_id:h=`id_${Math.floor(Math.random()*Date.now())}`}=a,{width:w="100%"}=a,{action:o={}}=a,{type:c="bar"}=a,{data:g=[]}=a,{extra:y={}}=a,{options:x={}}=a,A=null;const C=(t,E,u,M)=>{let e=Object.assign({},z.cloneDeep(E));if(M.complete===!0)return e;if(t==="pie")return Array.isArray(e.series)?e.series.forEach(n=>{n.model.legend&&(e.legend.data=u.map(r=>r[n.model.legend])),n.model.value&&n.model.name&&(n.data=u.map(r=>({name:r[n.model.name],value:Number(r[n.model.value])}))),delete n.model}):(e.series.model.legend&&(e.legend.data=u.map(n=>n[e.series.model.legend])),e.series.model.value&&e.series.model.name&&(e.series.data=u.map(n=>({name:n[e.series.model.name],value:Number(n[e.series.model.value])}))),delete e.series.model),delete e.type,e;if(t==="bar"){const n=[];let r=0;return Array.isArray(e.series)&&(e.series.forEach(i=>{i.model&&(i.name||(i.name=i.model.name),n.push(i.name),i.model.value&&(i.data=u.map(s=>s[i.model.value])),e.xAxis||(e.xAxis={}),i.model.name&&e.xAxis&&(e.xAxis.data=u.map(s=>s[i.model.name])),i.animationDelay=s=>s*10+r,r=r+100,delete i.model)}),e.legend&&(e.legend.data=n)),e.animationDelayUpdate=i=>i*5,delete e.type,e}else if(t==="line"){const n=[];let r=0;return Array.isArray(e.series)&&(e.series.forEach(i=>{i.model&&(i.name||(i.name=i.model.name),n.push(i.name),i.model.value&&(i.data=u.map(s=>s[i.model.value])),e.xAxis||(e.xAxis={}),i.model.name&&e.xAxis&&(e.xAxis.data=u.map(s=>s[i.model.name])),i.animationDelay=s=>s*10+r,r=r+100,delete i.model)}),e.legend&&(e.legend.data=n)),e.animationDelayUpdate=i=>i*5,console.log(t,e),delete e.type,e}else return e};return k(async()=>{_.changeLanguage(m==null?void 0:m.lang);try{N.locale(m==null?void 0:m.lang)}catch{N.locale("en-us")}try{const t=document.getElementById(h);A=F(t);const E=C(c,x,g,y);setTimeout(()=>{A.setOption(E,!0),A.resize()},500)}catch(t){console.log("Err. EchartsEngine",t==null?void 0:t.message)}}),d.$$set=t=>{"chrt_id"in t&&l(0,h=t.chrt_id),"width"in t&&l(1,w=t.width),"action"in t&&l(3,o=t.action),"type"in t&&l(4,c=t.type),"data"in t&&l(5,g=t.data),"extra"in t&&l(2,y=t.extra),"options"in t&&l(6,x=t.options)},d.$$.update=()=>{d.$$.dirty&8&&((o==null?void 0:o.name)=="CANCEL"&&(o==null||o.action()),(o==null?void 0:o.name)=="SET")},[h,w,y,o,c,g,x]}class K extends O{constructor(a){super(),S(this,a,p,I,U,{chrt_id:0,width:1,action:3,type:4,data:5,extra:2,options:6})}}export{K as default};
