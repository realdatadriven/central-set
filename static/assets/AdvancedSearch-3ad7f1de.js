import{S as ve,i as we,s as Oe,v as B,I as be,e as g,a as D,c as me,w as $,b as v,d as I,f as E,m as ke,l as R,g as M,h as ye,k as Ee,j as J,o as L,x as X,p as ge,q as le,_ as je,r as Ne,u as Ie,F as te,t as Q,n as V,$ as Le,a0 as Se,a1 as ne,C as W,D as Te}from"./index-13d4ac78.js";import"./pt-607305e9.js";function ce(n,e,c){const t=n.slice();return t[20]=e[c],t[21]=e,t[22]=c,t}function se(n,e,c){const t=n.slice();return t[23]=e[c],t}function re(n,e,c){const t=n.slice();return t[23]=e[c],t}function ae(n,e,c){const t=n.slice();return t[28]=e[c],t[29]=e,t[30]=c,t}function ie(n,e,c){const t=n.slice();return t[20]=e[c],t[31]=e,t[22]=c,t}function oe(n,e,c){const t=n.slice();return t[20]=e[c],t}function ue(n){let e,c=n[3].t(`crud.${n[20]}`)+"",t,r;return{c(){var s,l;e=g("th"),t=Q(c),v(e,"class",r="normal-case "+(((l=(s=n[1])==null?void 0:s[n[20]])==null?void 0:l.width)||""))},m(s,l){I(s,e,l),E(e,t)},p(s,l){var o,u;l[0]&10&&c!==(c=s[3].t(`crud.${s[20]}`)+"")&&V(t,c),l[0]&2&&r!==(r="normal-case "+(((u=(o=s[1])==null?void 0:o[s[20]])==null?void 0:u.width)||""))&&v(e,"class",r)},d(s){s&&L(e)}}}function qe(n){let e,c,t;function r(o,u){var h,a;return u[0]&2&&(c=null),c==null&&(c=!!["boolean"].includes((a=(h=o[1])==null?void 0:h[o[20]])==null?void 0:a.type)),c?Be:Ae}let s=r(n,[-1,-1]),l=s(n);return{c(){var o,u;e=g("td"),l.c(),v(e,"class",t="normal-case "+(((u=(o=n[1])==null?void 0:o[n[20]])==null?void 0:u.width)||""))},m(o,u){I(o,e,u),l.m(e,null)},p(o,u){var h,a;s===(s=r(o,u))&&l?l.p(o,u):(l.d(1),l=s(o),l&&(l.c(),l.m(e,null))),u[0]&2&&t!==(t="normal-case "+(((a=(h=o[1])==null?void 0:h[o[20]])==null?void 0:a.width)||""))&&v(e,"class",t)},d(o){o&&L(e),l.d()}}}function Ce(n){let e,c=n[28][n[20]]+"",t,r;return{c(){var s,l;e=g("th"),t=Q(c),v(e,"class",r="normal-case "+(((l=(s=n[1])==null?void 0:s[n[20]])==null?void 0:l.width)||""))},m(s,l){I(s,e,l),E(e,t)},p(s,l){var o,u;l[0]&3&&c!==(c=s[28][s[20]]+"")&&V(t,c),l[0]&2&&r!==(r="normal-case "+(((u=(o=s[1])==null?void 0:o[s[20]])==null?void 0:u.width)||""))&&v(e,"class",r)},d(s){s&&L(e)}}}function Ae(n){let e=(n[28][n[20]]?n[28][n[20]]:"")+"",c;return{c(){c=Q(e)},m(t,r){I(t,c,r)},p(t,r){r[0]&3&&e!==(e=(t[28][t[20]]?t[28][t[20]]:"")+"")&&V(c,e)},d(t){t&&L(c)}}}function Be(n){let e,c,t;function r(){n[6].call(e,n[20],n[29],n[30])}return{c(){e=g("input"),v(e,"type","checkbox"),v(e,"class","checkbox checkbox-sm")},m(s,l){I(s,e,l),e.checked=n[28][n[20]],c||(t=R(e,"change",r),c=!0)},p(s,l){n=s,l[0]&3&&(e.checked=n[28][n[20]])},d(s){s&&L(e),c=!1,t()}}}function fe(n){let e;function c(s,l){return s[22]===0?Ce:qe}let r=c(n)(n);return{c(){r.c(),e=$()},m(s,l){r.m(s,l),I(s,e,l)},p(s,l){r.p(s,l)},d(s){s&&L(e),r.d(s)}}}function _e(n){let e,c,t,r,s,l,o,u,h,a,p=B(Object.keys(n[1])),d=[];for(let b=0;b<p.length;b+=1)d[b]=fe(ie(n,p,b));l=new be({props:{type:"outline",icon:"trash",path:"icons"}});function w(){return n[7](n[30])}return{c(){e=g("tr");for(let b=0;b<d.length;b+=1)d[b].c();c=D(),t=g("td"),r=g("button"),s=g("span"),me(l.$$.fragment),o=D(),v(s,"class","w-6"),v(r,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),v(t,"class","p-0.5 w-16 text-right")},m(b,q){I(b,e,q);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(e,null);E(e,c),E(e,t),E(t,r),E(r,s),ke(l,s,null),E(e,o),u=!0,h||(a=R(r,"click",w),h=!0)},p(b,q){if(n=b,q[0]&3){p=B(Object.keys(n[1]));let m;for(m=0;m<p.length;m+=1){const C=ie(n,p,m);d[m]?d[m].p(C,q):(d[m]=fe(C),d[m].c(),d[m].m(e,c))}for(;m<d.length;m+=1)d[m].d(1);d.length=p.length}},i(b){u||(M(l.$$.fragment,b),u=!0)},o(b){J(l.$$.fragment,b),u=!1},d(b){b&&L(e),X(d,b),ge(l),h=!1,a()}}}function Ue(n){let e,c,t;function r(u,h){var a,p;return(p=(a=u[1])==null?void 0:a[u[20]])!=null&&p.func?We:Re}let s=r(n),l=s(n);function o(){n[12].call(e,n[20])}return{c(){e=g("select"),l.c(),v(e,"class","select select-sm p-0.5 w-full"),n[2][n[20]]===void 0&&Se(o)},m(u,h){I(u,e,h),l.m(e,null),ne(e,n[2][n[20]],!0),c||(t=R(e,"change",o),c=!0)},p(u,h){n=u,s===(s=r(n))&&l?l.p(n,h):(l.d(1),l=s(n),l&&(l.c(),l.m(e,null))),h[0]&6&&ne(e,n[2][n[20]])},d(u){u&&L(e),l.d(),c=!1,t()}}}function Fe(n){let e,c,t;function r(){n[11].call(e,n[20])}return{c(){e=g("textarea"),v(e,"rows",1),v(e,"class","textarea textarea-sm p-1 min-h-5 w-full")},m(s,l){I(s,e,l),W(e,n[2][n[20]]),c||(t=R(e,"input",r),c=!0)},p(s,l){n=s,l[0]&6&&W(e,n[2][n[20]])},d(s){s&&L(e),c=!1,t()}}}function Ke(n){let e,c,t;function r(){n[10].call(e,n[20])}return{c(){e=g("input"),v(e,"type","text"),v(e,"class","input input-sm w-full")},m(s,l){I(s,e,l),W(e,n[2][n[20]]),c||(t=R(e,"input",r),c=!0)},p(s,l){n=s,l[0]&6&&e.value!==n[2][n[20]]&&W(e,n[2][n[20]])},d(s){s&&L(e),c=!1,t()}}}function Pe(n){let e,c,t;function r(){n[8].call(e,n[20])}function s(...l){return n[9](n[20],...l)}return{c(){e=g("input"),v(e,"type","checkbox"),v(e,"class","checkbox checkbox-sm")},m(l,o){I(l,e,o),e.checked=n[2][n[20]],c||(t=[R(e,"change",r),R(e,"change",s)],c=!0)},p(l,o){n=l,o[0]&6&&(e.checked=n[2][n[20]])},d(l){l&&L(e),c=!1,Te(t)}}}function Re(n){var r,s;let e,c=B(((s=(r=n[1])==null?void 0:r[n[20]])==null?void 0:s.options)||[]),t=[];for(let l=0;l<c.length;l+=1)t[l]=he(se(n,c,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=$()},m(l,o){for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(l,o);I(l,e,o)},p(l,o){var u,h;if(o[0]&2){c=B(((h=(u=l[1])==null?void 0:u[l[20]])==null?void 0:h.options)||[]);let a;for(a=0;a<c.length;a+=1){const p=se(l,c,a);t[a]?t[a].p(p,o):(t[a]=he(p),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=c.length}},d(l){l&&L(e),X(t,l)}}}function We(n){var r,s;let e,c=B(((s=(r=n[1])==null?void 0:r[n[20]])==null?void 0:s.options())||[]),t=[];for(let l=0;l<c.length;l+=1)t[l]=de(re(n,c,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=$()},m(l,o){for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(l,o);I(l,e,o)},p(l,o){var u,h;if(o[0]&2){c=B(((h=(u=l[1])==null?void 0:u[l[20]])==null?void 0:h.options())||[]);let a;for(a=0;a<c.length;a+=1){const p=re(l,c,a);t[a]?t[a].p(p,o):(t[a]=de(p),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=c.length}},d(l){l&&L(e),X(t,l)}}}function he(n){let e,c=n[23].label+"",t,r;return{c(){e=g("option"),t=Q(c),e.__value=r=n[23].value,W(e,e.__value)},m(s,l){I(s,e,l),E(e,t)},p(s,l){l[0]&2&&c!==(c=s[23].label+"")&&V(t,c),l[0]&2&&r!==(r=s[23].value)&&(e.__value=r,W(e,e.__value))},d(s){s&&L(e)}}}function de(n){let e,c=n[23].label+"",t,r;return{c(){e=g("option"),t=Q(c),e.__value=r=n[23].value,W(e,e.__value)},m(s,l){I(s,e,l),E(e,t)},p(s,l){l[0]&2&&c!==(c=s[23].label+"")&&V(t,c),l[0]&2&&r!==(r=s[23].value)&&(e.__value=r,W(e,e.__value))},d(s){s&&L(e)}}}function pe(n){let e,c,t,r,s,l;function o(a,p){var d,w,b,q,m,C,U,K;if(p[0]&2&&(c=null),p[0]&2&&(t=null),p[0]&2&&(r=null),p[0]&2&&(s=null),c==null&&(c=!!["boolean"].includes((w=(d=a[1])==null?void 0:d[a[20]])==null?void 0:w.type)),c)return Pe;if(t==null&&(t=!!["string"].includes((q=(b=a[1])==null?void 0:b[a[20]])==null?void 0:q.type)),t)return Ke;if(r==null&&(r=!!["text"].includes((C=(m=a[1])==null?void 0:m[a[20]])==null?void 0:C.type)),r)return Fe;if(s==null&&(s=!!["select"].includes((K=(U=a[1])==null?void 0:U[a[20]])==null?void 0:K.type)),s)return Ue}let u=o(n,[-1,-1]),h=u&&u(n);return{c(){var a,p;e=g("td"),h&&h.c(),v(e,"class",l=((p=(a=n[1])==null?void 0:a[n[20]])==null?void 0:p.width)||"")},m(a,p){I(a,e,p),h&&h.m(e,null)},p(a,p){var d,w;u===(u=o(a,p))&&h?h.p(a,p):(h&&h.d(1),h=u&&u(a),h&&(h.c(),h.m(e,null))),p[0]&2&&l!==(l=((w=(d=a[1])==null?void 0:d[a[20]])==null?void 0:w.width)||"")&&v(e,"class",l)},d(a){a&&L(e),h&&h.d()}}}function ze(n){let e,c,t,r,s,l,o,u,h,a,p,d,w,b,q,m,C,U,K,Y,G,H,_,S=B(Object.keys(n[1])),y=[];for(let f=0;f<S.length;f+=1)y[f]=ue(oe(n,S,f));let T=B(n[0]||[]),k=[];for(let f=0;f<T.length;f+=1)k[f]=_e(ae(n,T,f));const z=f=>J(k[f],1,1,()=>{k[f]=null});let A=B(Object.keys(n[1])),j=[];for(let f=0;f<A.length;f+=1)j[f]=pe(ce(n,A,f));U=new be({props:{type:"outline",icon:"plus",path:"icons"}});let P=De;return{c(){e=g("div"),c=g("div"),t=g("div"),r=g("table"),s=g("thead"),l=g("tr");for(let f=0;f<y.length;f+=1)y[f].c();o=D(),u=g("th"),h=D(),a=g("tbody");for(let f=0;f<k.length;f+=1)k[f].c();p=D(),d=g("tfoot"),w=g("tr");for(let f=0;f<j.length;f+=1)j[f].c();b=D(),q=g("td"),m=g("button"),C=g("span"),me(U.$$.fragment),K=D(),Y=$(),v(u,"class","p-0.5 w-16"),v(C,"class","w-6"),v(m,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),v(q,"class","p-0.5 w-16 text-right"),v(r,"class","table table-zebra w-full normal-case table-xs"),v(t,"class","overflow-x-auto"),v(c,"class","grow w-full"),v(e,"class","flex flex-col")},m(f,O){I(f,e,O),E(e,c),E(c,t),E(t,r),E(r,s),E(s,l);for(let i=0;i<y.length;i+=1)y[i]&&y[i].m(l,null);E(l,o),E(l,u),E(r,h),E(r,a);for(let i=0;i<k.length;i+=1)k[i]&&k[i].m(a,null);E(r,p),E(r,d),E(d,w);for(let i=0;i<j.length;i+=1)j[i]&&j[i].m(w,null);E(w,b),E(w,q),E(q,m),E(m,C),ke(U,C,null),I(f,K,O),I(f,Y,O),G=!0,H||(_=R(m,"click",n[13]),H=!0)},p(f,O){if(O[0]&10){S=B(Object.keys(f[1]));let i;for(i=0;i<S.length;i+=1){const N=oe(f,S,i);y[i]?y[i].p(N,O):(y[i]=ue(N),y[i].c(),y[i].m(l,o))}for(;i<y.length;i+=1)y[i].d(1);y.length=S.length}if(O[0]&3){T=B(f[0]||[]);let i;for(i=0;i<T.length;i+=1){const N=ae(f,T,i);k[i]?(k[i].p(N,O),M(k[i],1)):(k[i]=_e(N),k[i].c(),M(k[i],1),k[i].m(a,null))}for(ye(),i=T.length;i<k.length;i+=1)z(i);Ee()}if(O[0]&6){A=B(Object.keys(f[1]));let i;for(i=0;i<A.length;i+=1){const N=ce(f,A,i);j[i]?j[i].p(N,O):(j[i]=pe(N),j[i].c(),j[i].m(w,b))}for(;i<j.length;i+=1)j[i].d(1);j.length=A.length}},i(f){if(!G){for(let O=0;O<T.length;O+=1)M(k[O]);M(U.$$.fragment,f),M(P),G=!0}},o(f){k=k.filter(Boolean);for(let O=0;O<k.length;O+=1)J(k[O]);J(U.$$.fragment,f),J(P),G=!1},d(f){f&&(L(e),L(K),L(Y)),X(y,f),X(k,f),X(j,f),ge(U),H=!1,_()}}}let De=!1;function Ge(n,e,c){let t,r;le(n,je,_=>c(15,t=_)),le(n,Ne,_=>c(3,r=_));let{table:s}=e,{action:l={}}=e,{advanced_search:o=[]}=e,u=[],h=[{value:"=",label:r.t("crud.eq")},{value:">",label:r.t("crud.gt")},{value:"<",label:r.t("crud.lt")},{value:"<=",label:r.t("crud.lt_eq")},{value:">=",label:r.t("crud.gt_eq")},{value:"IN",label:r.t("crud.in")},{value:"NOT IN",label:r.t("crud.not_in")},{value:"LIKE",label:r.t("crud.like")},{value:"NOT LIKE",label:r.t("crud.not_like")},{value:"BETWEEN",label:r.t("crud.between")},{value:"NOT BETWEEN",label:r.t("crud.not_between")},{value:"IS NULL",label:r.t("crud.is_null")},{value:"IS NOT NULL",label:r.t("crud.is_not_null")},{value:"IS TRUE",label:r.t("crud.is_true")},{value:"IS FALSE",label:r.t("crud.is_false")},{value:"REGEX",label:r.t("crud.regex")}],a=[],d={field:{type:"select",width:"min-w-40",func:!0,options:()=>a.map(_=>({value:_.name,label:_.comment}))},cond:{type:"select",width:"min-w-40",options:h},value:{type:"string",width:"min-w-60"},deactivate:{type:"boolean"}},w={};const b=_=>{var y,T,k,z,A,j,P,f,O,i,N,Z,x,ee;const S=[];for(const F in _)if(Object.hasOwnProperty.call(_,F)){if(_[F].pk2)continue;_[F].fk?S.push(Object.assign(_[F],{name:(T=(y=_[F])==null?void 0:y.ref)==null?void 0:T.referred_columns_desc,referred_table:(z=(k=_[F])==null?void 0:k.ref)==null?void 0:z.referred_table,comment:(Z=(N=(f=(P=t==null?void 0:t.tables)==null?void 0:P[(j=(A=_[F])==null?void 0:A.ref)==null?void 0:j.referred_table])==null?void 0:f.fields)==null?void 0:N[(i=(O=_[F])==null?void 0:O.ref)==null?void 0:i.referred_columns_desc])==null?void 0:Z.comment,referred_column:(ee=(x=_[F])==null?void 0:x.ref)==null?void 0:ee.referred_column})):S.push(_[F])}return S};Ie(()=>{var _,S,y,T,k,z,A,j,P,f;r.changeLanguage(t==null?void 0:t.lang),console.log((_=t==null?void 0:t.tables)==null?void 0:_[s]);try{te.locale(t==null?void 0:t.lang)}catch{te.locale("en-us")}a=b(((y=(S=t==null?void 0:t.tables)==null?void 0:S[s])==null?void 0:y.fields)||{});for(const O in t==null?void 0:t.tables)for(const i in(k=(T=t==null?void 0:t.tables)==null?void 0:T[O])==null?void 0:k.fields)if(Object.hasOwnProperty.call((A=(z=t==null?void 0:t.tables)==null?void 0:z[O])==null?void 0:A.fields,i)){const N=(P=(j=t==null?void 0:t.tables)==null?void 0:j[O])==null?void 0:P.fields[i];if(N.fk&&((f=N==null?void 0:N.ref)==null?void 0:f.referred_table)===s){const Z=Object.assign(N,{table:O});u.push(Object.assign(Z,N==null?void 0:N.ref))}}});function q(_,S,y){S[y][_]=this.checked,c(0,o)}const m=_=>{try{o.splice(_,1),c(0,o=[...o])}catch{}};function C(_){w[_]=this.checked,c(2,w),c(1,d)}const U=(_,S)=>{var y;try{c(1,d={...d,[_]:{...d[_],disabled:(y=d==null?void 0:d[_])==null?void 0:y.disabled}})}catch(T){console.log(T.message)}};function K(_){w[_]=this.value,c(2,w),c(1,d)}function Y(_){w[_]=this.value,c(2,w),c(1,d)}function G(_){w[_]=Le(this),c(2,w),c(1,d)}const H=()=>{try{!w.field||!w.value||c(0,o=[...o,Object.assign({},w)])}catch{}};return n.$$set=_=>{"table"in _&&c(4,s=_.table),"action"in _&&c(5,l=_.action),"advanced_search"in _&&c(0,o=_.advanced_search)},n.$$.update=()=>{n.$$.dirty[0]&33&&((l==null?void 0:l.name)=="CANCEL"&&(console.log(l),l==null||l.action()),(l==null?void 0:l.name)=="YES"&&(console.log(l),l==null||l.action({data:o})))},[o,d,w,r,s,l,q,m,C,U,K,Y,G,H]}class Ye extends ve{constructor(e){super(),we(this,e,Ge,ze,Oe,{table:4,action:5,advanced_search:0},null,[-1,-1])}}export{Ye as default};
