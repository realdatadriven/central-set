import{S as SvelteComponent,i as init,s as safe_not_equal,T as Toast,e as element,t as text,a as space,c as create_component,b as attr,d as insert,f as append,m as mount_component,l as listen,G as prevent_default,n as set_data,h as group_outros,j as transition_out,k as check_outros,g as transition_in,o as detach,p as destroy_component,D as run_all,q as component_subscribe,_ as _global,r as i18n,E as createEventDispatcher,u as onMount,F as hooks,y as lodashExports,L as Loadingv2,W as create_update,ai as to_number,$ as select_value,v as ensure_array_like,I as Icons,a0 as add_render_callback,ab as create_in_transition,ac as fly,x as destroy_each,C as set_input_value,w as empty,a1 as select_option}from"./index-8239faad.js";import"./pt-4424e41e.js";import{P as Pagination}from"./Pagination-0cc50f26.js";function get_each_context_6(e,t,l){const a=e.slice();return a[61]=t[l],a[72]=t,a[73]=l,a}function get_each_context_7(e,t,l){const a=e.slice();return a[74]=t[l],a}function get_each_context_8(e,t,l){const a=e.slice();return a[58]=t[l],a[77]=t,a[60]=l,a}function get_each_context_9(e,t,l){const a=e.slice();return a[61]=t[l],a[78]=t,a[73]=l,a}function get_each_context_10(e,t,l){const a=e.slice();return a[74]=t[l],a}function get_each_context_11(e,t,l){const a=e.slice();return a[61]=t[l],a}function get_each_context_3(e,t,l){const a=e.slice();return a[61]=t[l],a}function get_each_context_4(e,t,l){const a=e.slice();return a[58]=t[l],a[60]=l,a}function get_each_context_5(e,t,l){const a=e.slice();return a[69]=t[l],a}function get_each_context(e,t,l){const a=e.slice();return a[58]=t[l],a[59]=t,a[60]=l,a}function get_each_context_1(e,t,l){const a=e.slice();return a[61]=t[l],a[62]=t,a[63]=l,a}function get_each_context_2(e,t,l){const a=e.slice();return a[61]=t[l],a}function create_if_block_8(e){var R;let t,l,a,s,_,r,n,i,o,c,u,p,f,m,g,v,O,h,b,$,D,z=ensure_array_like(Object.keys(e[8])),y=[];for(let k=0;k<z.length;k+=1)y[k]=create_each_block_11(get_each_context_11(e,z,k));let S=ensure_array_like(((R=e[5])==null?void 0:R.extra_options)||[]),j=[];for(let k=0;k<S.length;k+=1)j[k]=create_each_block_8(get_each_context_8(e,S,k));const P=k=>transition_out(j[k],1,1,()=>{j[k]=null});let F=ensure_array_like(Object.keys(e[8])),E=[];for(let k=0;k<F.length;k+=1)E[k]=create_each_block_6(get_each_context_6(e,F,k));return O=new Icons({props:{type:"outline",icon:"plus",path:"icons"}}),{c(){t=element("div"),l=element("div"),a=element("table"),s=element("thead"),_=element("tr");for(let k=0;k<y.length;k+=1)y[k].c();r=space(),n=element("th"),i=space(),o=element("tbody");for(let k=0;k<j.length;k+=1)j[k].c();c=space(),u=element("tfoot"),p=element("tr");for(let k=0;k<E.length;k+=1)E[k].c();f=space(),m=element("td"),g=element("button"),v=element("span"),create_component(O.$$.fragment),attr(n,"class","p-0.5 w-16"),attr(v,"class","w-6"),attr(g,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(m,"class","p-0.5 w-16 text-right"),attr(a,"class","table table-zebra w-[98%] normal-case table-xs"),attr(l,"class","w-full overflow-x-auto"),attr(t,"class","w-full")},m(k,N){insert(k,t,N),append(t,l),append(l,a),append(a,s),append(s,_);for(let M=0;M<y.length;M+=1)y[M]&&y[M].m(_,null);append(_,r),append(_,n),append(a,i),append(a,o);for(let M=0;M<j.length;M+=1)j[M]&&j[M].m(o,null);append(a,c),append(a,u),append(u,p);for(let M=0;M<E.length;M+=1)E[M]&&E[M].m(p,null);append(p,f),append(p,m),append(m,g),append(g,v),mount_component(O,v,null),b=!0,$||(D=listen(g,"click",e[45]),$=!0)},p(k,N){var M;if(N[0]&8448){z=ensure_array_like(Object.keys(k[8]));let C;for(C=0;C<z.length;C+=1){const A=get_each_context_11(k,z,C);y[C]?y[C].p(A,N):(y[C]=create_each_block_11(A),y[C].c(),y[C].m(_,r))}for(;C<y.length;C+=1)y[C].d(1);y.length=z.length}if(N[0]&288){S=ensure_array_like(((M=k[5])==null?void 0:M.extra_options)||[]);let C;for(C=0;C<S.length;C+=1){const A=get_each_context_8(k,S,C);j[C]?(j[C].p(A,N),transition_in(j[C],1)):(j[C]=create_each_block_8(A),j[C].c(),transition_in(j[C],1),j[C].m(o,null))}for(group_outros(),C=S.length;C<j.length;C+=1)P(C);check_outros()}if(N[0]&66304){F=ensure_array_like(Object.keys(k[8]));let C;for(C=0;C<F.length;C+=1){const A=get_each_context_6(k,F,C);E[C]?E[C].p(A,N):(E[C]=create_each_block_6(A),E[C].c(),E[C].m(p,f))}for(;C<E.length;C+=1)E[C].d(1);E.length=F.length}},i(k){if(!b){for(let N=0;N<S.length;N+=1)transition_in(j[N]);transition_in(O.$$.fragment,k),k&&(h||add_render_callback(()=>{h=create_in_transition(t,fly,{x:-400,duration:200}),h.start()})),b=!0}},o(k){j=j.filter(Boolean);for(let N=0;N<j.length;N+=1)transition_out(j[N]);transition_out(O.$$.fragment,k),b=!1},d(k){k&&detach(t),destroy_each(y,k),destroy_each(j,k),destroy_each(E,k),destroy_component(O),$=!1,D()}}}function create_if_block_7(e){var Ie,Me,Pe,Ne,qe;let t,l,a,s,_,r,n=e[13].t("crud.allow_in_submenu")+"",i,o,c,u,p,f,m,g,v,O=e[13].t("crud.default_order_by")+"",h,b,$,D,z,y,S,j=e[13].t("crud.field")+"",P,F,E,R=e[13].t("crud.order")+"",k,N,M,C,A,oe,H,T,q,K,Z,re,Ce,ae,U,De,ne,x,ee,Le,de,ce,ue,ie,Te,V,pe,Ee,fe,be=e[13].t("crud.others")+"",we,ze,me,he,te,X,ge,ve,$e=e[13].t("crud.allow_import")+"",ye,ke,Oe,Q,je,Se,se=ensure_array_like(e[14]),G=[];for(let w=0;w<se.length;w+=1)G[w]=create_each_block_5(get_each_context_5(e,se,w));let le=ensure_array_like(((Me=(Ie=e[5])==null?void 0:Ie.layout)==null?void 0:Me.default_order)||[]),J=[];for(let w=0;w<le.length;w+=1)J[w]=create_each_block_4(get_each_context_4(e,le,w));const Fe=w=>transition_out(J[w],1,1,()=>{J[w]=null});let _e=ensure_array_like(Object.keys(((qe=(Ne=(Pe=e[12])==null?void 0:Pe.tables)==null?void 0:Ne[e[0]])==null?void 0:qe.fields)||{})),W=[];for(let w=0;w<_e.length;w+=1)W[w]=create_each_block_3(get_each_context_3(e,_e,w));return ie=new Icons({props:{type:"outline",icon:"plus",path:"icons"}}),{c(){t=element("div"),l=element("div"),a=element("div"),s=element("input"),_=space(),r=element("div"),i=text(n),o=space(),c=element("div"),u=element("ul");for(let w=0;w<G.length;w+=1)G[w].c();p=space(),f=element("div"),m=element("input"),g=space(),v=element("div"),h=text(O),b=space(),$=element("div"),D=element("table"),z=element("thead"),y=element("tr"),S=element("th"),P=text(j),F=space(),E=element("th"),k=text(R),N=space(),M=element("th"),C=space(),A=element("tbody");for(let w=0;w<J.length;w+=1)J[w].c();oe=space(),H=element("tfoot"),T=element("tr"),q=element("td"),K=element("input"),Z=space(),re=element("datalist");for(let w=0;w<W.length;w+=1)W[w].c();Ce=space(),ae=element("td"),U=element("input"),De=space(),ne=element("datalist"),x=element("option"),x.innerHTML="",ee=element("option"),ee.innerHTML="",Le=space(),de=element("td"),ce=element("button"),ue=element("span"),create_component(ie.$$.fragment),Te=space(),V=element("div"),pe=element("input"),Ee=space(),fe=element("div"),we=text(be),ze=space(),me=element("div"),he=element("div"),te=element("label"),X=element("input"),ve=element("span"),ye=text($e),attr(s,"type","checkbox"),attr(s,"class","peer"),attr(r,"class","collapse-title text-md font-medium"),attr(u,"class","menu menu-compact w-full"),attr(c,"class","collapse-content border-t-slate-300"),attr(a,"tabindex","0"),attr(a,"class","collapse collapse-arrow border border-base-300 bg-base-100 rounded-sm"),attr(m,"type","checkbox"),attr(m,"class","peer"),attr(v,"class","collapse-title text-md font-medium"),attr(S,"class","normal-case"),attr(E,"class","normal-case w-20"),attr(M,"class","p-0.5 w-16"),attr(K,"type","text"),attr(K,"class","input input-sm w-full bg-transparent"),attr(K,"name","field"),attr(K,"list","fields"),attr(re,"id","fields"),attr(q,"class","p-0.5"),attr(U,"type","text"),attr(U,"class","input input-sm w-20 bg-transparent"),attr(U,"name","order"),attr(U,"list","orders"),attr(x,"style","p-2 w-20"),x.__value="ASC",set_input_value(x,x.__value),attr(ee,"style","p-2 w-20"),ee.__value="DESC",set_input_value(ee,ee.__value),attr(ne,"style","p-2 w-20"),attr(ne,"id","orders"),attr(ae,"class","p-0.5 w-20"),attr(ue,"class","w-6"),attr(ce,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(de,"class","p-0.5 w-16 text-right"),attr(D,"class","table table-zebra w-[98%] normal-case table-xs"),attr($,"class","collapse-content border-t-slate-300"),attr(f,"tabindex","0"),attr(f,"class","collapse collapse-arrow border border-base-300 bg-base-100 rounded-sm "),attr(pe,"type","checkbox"),attr(pe,"class","peer"),attr(fe,"class","collapse-title text-md font-medium"),attr(X,"type","checkbox"),attr(X,"class","checkbox checkbox-sm mr-2"),attr(X,"id",ge=e[0]+"-allow_import"),attr(ve,"class","label-text"),attr(te,"class","label cursor-pointer justify-start"),attr(te,"for",ke=e[0]+"-allow_import"),attr(he,"class","form-control w-full max-w-xs m-auto"),attr(me,"class","collapse-content border-t-slate-300"),attr(V,"tabindex","0"),attr(V,"class","collapse collapse-arrow border border-base-300 bg-base-100 rounded-sm "),attr(l,"class","md:w-6/12 m-auto"),attr(t,"class","w-full max-h-[30%] overflow-x-hidden overflow-y-auto")},m(w,I){insert(w,t,I),append(t,l),append(l,a),append(a,s),append(a,_),append(a,r),append(r,i),append(a,o),append(a,c),append(c,u);for(let B=0;B<G.length;B+=1)G[B]&&G[B].m(u,null);append(l,p),append(l,f),append(f,m),append(f,g),append(f,v),append(v,h),append(f,b),append(f,$),append($,D),append(D,z),append(z,y),append(y,S),append(S,P),append(y,F),append(y,E),append(E,k),append(y,N),append(y,M),append(D,C),append(D,A);for(let B=0;B<J.length;B+=1)J[B]&&J[B].m(A,null);append(D,oe),append(D,H),append(H,T),append(T,q),append(q,K),set_input_value(K,e[4].field),append(q,Z),append(q,re);for(let B=0;B<W.length;B+=1)W[B]&&W[B].m(re,null);append(T,Ce),append(T,ae),append(ae,U),set_input_value(U,e[4].order),append(ae,De),append(ae,ne),append(ne,x),append(ne,ee),append(T,Le),append(T,de),append(de,ce),append(ce,ue),mount_component(ie,ue,null),append(l,Te),append(l,V),append(V,pe),append(V,Ee),append(V,fe),append(fe,we),append(V,ze),append(V,me),append(me,he),append(he,te),append(te,X),X.checked=e[5].layout.allow_import,append(te,ve),append(ve,ye),Q=!0,je||(Se=[listen(K,"input",e[31]),listen(U,"input",e[32]),listen(ce,"click",e[33]),listen(X,"change",e[34])],je=!0)},p(w,I){var B,Ae,He,Je,Be;if((!Q||I[0]&8192)&&n!==(n=w[13].t("crud.allow_in_submenu")+"")&&set_data(i,n),I[0]&20512){se=ensure_array_like(w[14]);let L;for(L=0;L<se.length;L+=1){const Y=get_each_context_5(w,se,L);G[L]?G[L].p(Y,I):(G[L]=create_each_block_5(Y),G[L].c(),G[L].m(u,null))}for(;L<G.length;L+=1)G[L].d(1);G.length=se.length}if((!Q||I[0]&8192)&&O!==(O=w[13].t("crud.default_order_by")+"")&&set_data(h,O),(!Q||I[0]&8192)&&j!==(j=w[13].t("crud.field")+"")&&set_data(P,j),(!Q||I[0]&8192)&&R!==(R=w[13].t("crud.order")+"")&&set_data(k,R),I[0]&32){le=ensure_array_like(((Ae=(B=w[5])==null?void 0:B.layout)==null?void 0:Ae.default_order)||[]);let L;for(L=0;L<le.length;L+=1){const Y=get_each_context_4(w,le,L);J[L]?(J[L].p(Y,I),transition_in(J[L],1)):(J[L]=create_each_block_4(Y),J[L].c(),transition_in(J[L],1),J[L].m(A,null))}for(group_outros(),L=le.length;L<J.length;L+=1)Fe(L);check_outros()}if(I[0]&16&&K.value!==w[4].field&&set_input_value(K,w[4].field),I[0]&4097){_e=ensure_array_like(Object.keys(((Be=(Je=(He=w[12])==null?void 0:He.tables)==null?void 0:Je[w[0]])==null?void 0:Be.fields)||{}));let L;for(L=0;L<_e.length;L+=1){const Y=get_each_context_3(w,_e,L);W[L]?W[L].p(Y,I):(W[L]=create_each_block_3(Y),W[L].c(),W[L].m(re,null))}for(;L<W.length;L+=1)W[L].d(1);W.length=_e.length}I[0]&16&&U.value!==w[4].order&&set_input_value(U,w[4].order),(!Q||I[0]&8192)&&be!==(be=w[13].t("crud.others")+"")&&set_data(we,be),(!Q||I[0]&1&&ge!==(ge=w[0]+"-allow_import"))&&attr(X,"id",ge),I[0]&288&&(X.checked=w[5].layout.allow_import),(!Q||I[0]&8192)&&$e!==($e=w[13].t("crud.allow_import")+"")&&set_data(ye,$e),(!Q||I[0]&1&&ke!==(ke=w[0]+"-allow_import"))&&attr(te,"for",ke)},i(w){if(!Q){for(let I=0;I<le.length;I+=1)transition_in(J[I]);transition_in(ie.$$.fragment,w),w&&(Oe||add_render_callback(()=>{Oe=create_in_transition(t,fly,{x:-400,duration:200}),Oe.start()})),Q=!0}},o(w){J=J.filter(Boolean);for(let I=0;I<J.length;I+=1)transition_out(J[I]);transition_out(ie.$$.fragment,w),Q=!1},d(w){w&&detach(t),destroy_each(G,w),destroy_each(J,w),destroy_each(W,w),destroy_component(ie),je=!1,run_all(Se)}}}function create_if_block_1(e){var v,O;let t,l,a,s,_,r,n,i,o,c,u,p=ensure_array_like(Object.keys(e[7])),f=[];for(let h=0;h<p.length;h+=1)f[h]=create_each_block_2(get_each_context_2(e,p,h));let m=ensure_array_like(e[10].slice(e[3]*e[2],e[3]*e[2]+e[2])),g=[];for(let h=0;h<m.length;h+=1)g[h]=create_each_block(get_each_context(e,m,h));return o=new Pagination({props:{lang:(v=e[12])==null?void 0:v.lang,conf:(O=e[12])==null?void 0:O.conf,rows_per_page:e[2],page:e[3],total_rows:e[10].length}}),o.$on("pageChange",e[28]),{c(){t=element("div"),l=element("div"),a=element("table"),s=element("thead"),_=element("tr");for(let h=0;h<f.length;h+=1)f[h].c();r=space(),n=element("tbody");for(let h=0;h<g.length;h+=1)g[h].c();i=space(),create_component(o.$$.fragment),attr(a,"class","table table-zebra w-[98%] normal-case table-xs table-pin-rows table-pin-cols"),attr(l,"class","overflow-x-auto"),attr(t,"class","w-full")},m(h,b){insert(h,t,b),append(t,l),append(l,a),append(a,s),append(s,_);for(let $=0;$<f.length;$+=1)f[$]&&f[$].m(_,null);append(a,r),append(a,n);for(let $=0;$<g.length;$+=1)g[$]&&g[$].m(n,null);append(t,i),mount_component(o,t,null),u=!0},p(h,b){var D,z;if(b[0]&8320){p=ensure_array_like(Object.keys(h[7]));let y;for(y=0;y<p.length;y+=1){const S=get_each_context_2(h,p,y);f[y]?f[y].p(S,b):(f[y]=create_each_block_2(S),f[y].c(),f[y].m(_,null))}for(;y<f.length;y+=1)f[y].d(1);f.length=p.length}if(b[0]&459948){m=ensure_array_like(h[10].slice(h[3]*h[2],h[3]*h[2]+h[2]));let y;for(y=0;y<m.length;y+=1){const S=get_each_context(h,m,y);g[y]?g[y].p(S,b):(g[y]=create_each_block(S),g[y].c(),g[y].m(n,null))}for(;y<g.length;y+=1)g[y].d(1);g.length=m.length}const $={};b[0]&4096&&($.lang=(D=h[12])==null?void 0:D.lang),b[0]&4096&&($.conf=(z=h[12])==null?void 0:z.conf),b[0]&4&&($.rows_per_page=h[2]),b[0]&8&&($.page=h[3]),b[0]&1024&&($.total_rows=h[10].length),o.$set($)},i(h){u||(transition_in(o.$$.fragment,h),h&&(c||add_render_callback(()=>{c=create_in_transition(t,fly,{x:-400,duration:200}),c.start()})),u=!0)},o(h){transition_out(o.$$.fragment,h),u=!1},d(h){h&&detach(t),destroy_each(f,h),destroy_each(g,h),destroy_component(o)}}}function create_each_block_11(e){let t,l=e[13].t(`crud.${e[61]}`)+"",a,s;return{c(){var _,r;t=element("th"),a=text(l),attr(t,"class",s="normal-case "+(((r=(_=e[8])==null?void 0:_[e[61]])==null?void 0:r.width)||""))},m(_,r){insert(_,t,r),append(t,a)},p(_,r){var n,i;r[0]&8448&&l!==(l=_[13].t(`crud.${_[61]}`)+"")&&set_data(a,l),r[0]&256&&s!==(s="normal-case "+(((i=(n=_[8])==null?void 0:n[_[61]])==null?void 0:i.width)||""))&&attr(t,"class",s)},d(_){_&&detach(t)}}}function create_else_block_1(e){let t,l,a,s,_,r;function n(){e[38].call(l,e[61],e[77],e[60])}return{c(){var i,o,c,u;t=element("td"),l=element("input"),attr(l,"type","p-0"),attr(l,"class",a="input input-sm "+(((o=(i=e[8])==null?void 0:i[e[61]])==null?void 0:o.width)||"w-full")+" bg-transparent"),attr(t,"class",s=((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||"")},m(i,o){insert(i,t,o),append(t,l),set_input_value(l,e[58][e[61]]),_||(r=listen(l,"input",n),_=!0)},p(i,o){var c,u,p,f;e=i,o[0]&256&&a!==(a="input input-sm "+(((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||"w-full")+" bg-transparent")&&attr(l,"class",a),o[0]&288&&set_input_value(l,e[58][e[61]]),o[0]&256&&s!==(s=((f=(p=e[8])==null?void 0:p[e[61]])==null?void 0:f.width)||"")&&attr(t,"class",s)},d(i){i&&detach(t),_=!1,r()}}}function create_if_block_16(e){var c,u;let t,l,a,s,_,r,n=ensure_array_like(((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.options)||[]),i=[];for(let p=0;p<n.length;p+=1)i[p]=create_each_block_10(get_each_context_10(e,n,p));function o(){e[37].call(l,e[61],e[77],e[60])}return{c(){var p,f,m,g;t=element("td"),l=element("select");for(let v=0;v<i.length;v+=1)i[v].c();attr(l,"class",a="select select-sm p-0.5 "+(((f=(p=e[8])==null?void 0:p[e[61]])==null?void 0:f.width)||"w-full bg-transparent")),e[58][e[61]]===void 0&&add_render_callback(o),attr(t,"class",s="p-0 "+(((g=(m=e[8])==null?void 0:m[e[61]])==null?void 0:g.width)||""))},m(p,f){insert(p,t,f),append(t,l);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(l,null);select_option(l,e[58][e[61]],!0),_||(r=listen(l,"change",o),_=!0)},p(p,f){var m,g,v,O,h,b;if(e=p,f[0]&256){n=ensure_array_like(((g=(m=e[8])==null?void 0:m[e[61]])==null?void 0:g.options)||[]);let $;for($=0;$<n.length;$+=1){const D=get_each_context_10(e,n,$);i[$]?i[$].p(D,f):(i[$]=create_each_block_10(D),i[$].c(),i[$].m(l,null))}for(;$<i.length;$+=1)i[$].d(1);i.length=n.length}f[0]&256&&a!==(a="select select-sm p-0.5 "+(((O=(v=e[8])==null?void 0:v[e[61]])==null?void 0:O.width)||"w-full bg-transparent"))&&attr(l,"class",a),f[0]&288&&select_option(l,e[58][e[61]]),f[0]&256&&s!==(s="p-0 "+(((b=(h=e[8])==null?void 0:h[e[61]])==null?void 0:b.width)||""))&&attr(t,"class",s)},d(p){p&&detach(t),destroy_each(i,p),_=!1,r()}}}function create_if_block_15(e){let t,l,a,s,_,r;function n(){e[36].call(l,e[61],e[77],e[60])}return{c(){var i,o,c,u;t=element("td"),l=element("textarea"),attr(l,"rows",1),attr(l,"class",a="textarea textarea-sm p-1 min-h-5 "+(((o=(i=e[8])==null?void 0:i[e[61]])==null?void 0:o.width)||"w-full bg-transparent")),attr(t,"class",s="p-0 "+(((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||""))},m(i,o){insert(i,t,o),append(t,l),set_input_value(l,e[58][e[61]]),_||(r=listen(l,"input",n),_=!0)},p(i,o){var c,u,p,f;e=i,o[0]&256&&a!==(a="textarea textarea-sm p-1 min-h-5 "+(((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||"w-full bg-transparent"))&&attr(l,"class",a),o[0]&288&&set_input_value(l,e[58][e[61]]),o[0]&256&&s!==(s="p-0 "+(((f=(p=e[8])==null?void 0:p[e[61]])==null?void 0:f.width)||""))&&attr(t,"class",s)},d(i){i&&detach(t),_=!1,r()}}}function create_if_block_14(e){let t,l,a,s,_;function r(){e[35].call(l,e[61],e[77],e[60])}return{c(){var n,i;t=element("td"),l=element("input"),attr(l,"type","checkbox"),attr(l,"class","checkbox checkbox-sm"),attr(t,"class",a="p-0.5 text-center "+(((i=(n=e[8])==null?void 0:n[e[61]])==null?void 0:i.width)||""))},m(n,i){insert(n,t,i),append(t,l),l.checked=e[58][e[61]],s||(_=listen(l,"change",r),s=!0)},p(n,i){var o,c;e=n,i[0]&288&&(l.checked=e[58][e[61]]),i[0]&256&&a!==(a="p-0.5 text-center "+(((c=(o=e[8])==null?void 0:o[e[61]])==null?void 0:c.width)||""))&&attr(t,"class",a)},d(n){n&&detach(t),s=!1,_()}}}function create_if_block_13(e){let t,l=e[58][e[61]]+"",a,s;return{c(){var _,r;t=element("th"),a=text(l),attr(t,"class",s="normal-case "+(((r=(_=e[8])==null?void 0:_[e[61]])==null?void 0:r.width)||""))},m(_,r){insert(_,t,r),append(t,a)},p(_,r){var n,i;r[0]&288&&l!==(l=_[58][_[61]]+"")&&set_data(a,l),r[0]&256&&s!==(s="normal-case "+(((i=(n=_[8])==null?void 0:n[_[61]])==null?void 0:i.width)||""))&&attr(t,"class",s)},d(_){_&&detach(t)}}}function create_each_block_10(e){let t,l=e[74].label+"",a,s;return{c(){t=element("option"),a=text(l),t.__value=s=e[74].value,set_input_value(t,t.__value)},m(_,r){insert(_,t,r),append(t,a)},p(_,r){r[0]&256&&l!==(l=_[74].label+"")&&set_data(a,l),r[0]&256&&s!==(s=_[74].value)&&(t.__value=s,set_input_value(t,t.__value))},d(_){_&&detach(t)}}}function create_each_block_9(e){let t;function l(_,r){var n,i,o,c,u,p;return _[73]===0?create_if_block_13:((i=(n=_[8])==null?void 0:n[_[61]])==null?void 0:i.type)==="boolean"?create_if_block_14:((c=(o=_[8])==null?void 0:o[_[61]])==null?void 0:c.type)==="text2"?create_if_block_15:((p=(u=_[8])==null?void 0:u[_[61]])==null?void 0:p.type)==="select"?create_if_block_16:create_else_block_1}let a=l(e),s=a(e);return{c(){s.c(),t=empty()},m(_,r){s.m(_,r),insert(_,t,r)},p(_,r){a===(a=l(_))&&s?s.p(_,r):(s.d(1),s=a(_),s&&(s.c(),s.m(t.parentNode,t)))},d(_){_&&detach(t),s.d(_)}}}function create_each_block_8(e){let t,l,a,s,_,r,n,i,o,c,u=ensure_array_like(Object.keys(e[8])),p=[];for(let m=0;m<u.length;m+=1)p[m]=create_each_block_9(get_each_context_9(e,u,m));r=new Icons({props:{type:"outline",icon:"trash",path:"icons"}});function f(){return e[39](e[60])}return{c(){t=element("tr");for(let m=0;m<p.length;m+=1)p[m].c();l=space(),a=element("td"),s=element("button"),_=element("span"),create_component(r.$$.fragment),n=space(),attr(_,"class","w-6"),attr(s,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(a,"class","p-0.5 w-16 text-right")},m(m,g){insert(m,t,g);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(t,null);append(t,l),append(t,a),append(a,s),append(s,_),mount_component(r,_,null),append(t,n),i=!0,o||(c=listen(s,"click",f),o=!0)},p(m,g){if(e=m,g[0]&288){u=ensure_array_like(Object.keys(e[8]));let v;for(v=0;v<u.length;v+=1){const O=get_each_context_9(e,u,v);p[v]?p[v].p(O,g):(p[v]=create_each_block_9(O),p[v].c(),p[v].m(t,l))}for(;v<p.length;v+=1)p[v].d(1);p.length=u.length}},i(m){i||(transition_in(r.$$.fragment,m),i=!0)},o(m){transition_out(r.$$.fragment,m),i=!1},d(m){m&&detach(t),destroy_each(p,m),destroy_component(r),o=!1,c()}}}function create_if_block_12(e){var o,c;let t,l,a,s,_,r=ensure_array_like(((c=(o=e[8])==null?void 0:o[e[61]])==null?void 0:c.options)||[]),n=[];for(let u=0;u<r.length;u+=1)n[u]=create_each_block_7(get_each_context_7(e,r,u));function i(){e[44].call(t,e[61])}return{c(){var u,p,f,m;t=element("select");for(let g=0;g<n.length;g+=1)n[g].c();attr(t,"class",l="select select-sm p-0.5 "+(((p=(u=e[8])==null?void 0:u[e[61]])==null?void 0:p.width)||"w-full bg-transparent")),t.disabled=a=e[16]((m=(f=e[8])==null?void 0:f[e[61]])==null?void 0:m.disabled,e[61]),e[9][e[61]]===void 0&&add_render_callback(i)},m(u,p){insert(u,t,p);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(t,null);select_option(t,e[9][e[61]],!0),s||(_=listen(t,"change",i),s=!0)},p(u,p){var f,m,g,v,O,h;if(e=u,p[0]&256){r=ensure_array_like(((m=(f=e[8])==null?void 0:f[e[61]])==null?void 0:m.options)||[]);let b;for(b=0;b<r.length;b+=1){const $=get_each_context_7(e,r,b);n[b]?n[b].p($,p):(n[b]=create_each_block_7($),n[b].c(),n[b].m(t,null))}for(;b<n.length;b+=1)n[b].d(1);n.length=r.length}p[0]&256&&l!==(l="select select-sm p-0.5 "+(((v=(g=e[8])==null?void 0:g[e[61]])==null?void 0:v.width)||"w-full bg-transparent"))&&attr(t,"class",l),p[0]&256&&a!==(a=e[16]((h=(O=e[8])==null?void 0:O[e[61]])==null?void 0:h.disabled,e[61]))&&(t.disabled=a),p[0]&768&&select_option(t,e[9][e[61]])},d(u){u&&detach(t),destroy_each(n,u),s=!1,_()}}}function create_if_block_11(e){let t,l,a,s,_;function r(){e[43].call(t,e[61])}return{c(){var n,i,o,c;t=element("textarea"),attr(t,"rows",1),attr(t,"class",l="textarea textarea-sm p-1 min-h-5 "+(((i=(n=e[8])==null?void 0:n[e[61]])==null?void 0:i.width)||"w-full bg-transparent")),t.disabled=a=e[16]((c=(o=e[8])==null?void 0:o[e[61]])==null?void 0:c.disabled,e[61])},m(n,i){insert(n,t,i),set_input_value(t,e[9][e[61]]),s||(_=listen(t,"input",r),s=!0)},p(n,i){var o,c,u,p;e=n,i[0]&256&&l!==(l="textarea textarea-sm p-1 min-h-5 "+(((c=(o=e[8])==null?void 0:o[e[61]])==null?void 0:c.width)||"w-full bg-transparent"))&&attr(t,"class",l),i[0]&256&&a!==(a=e[16]((p=(u=e[8])==null?void 0:u[e[61]])==null?void 0:p.disabled,e[61]))&&(t.disabled=a),i[0]&768&&set_input_value(t,e[9][e[61]])},d(n){n&&detach(t),s=!1,_()}}}function create_if_block_10(e){let t,l,a,s,_;function r(){e[42].call(t,e[61])}return{c(){var n,i,o,c;t=element("input"),attr(t,"type","text"),attr(t,"class",l="input input-sm "+(((i=(n=e[8])==null?void 0:n[e[61]])==null?void 0:i.width)||"w-full")+" bg-transparent"),t.disabled=a=e[16]((c=(o=e[8])==null?void 0:o[e[61]])==null?void 0:c.disabled,e[61])},m(n,i){insert(n,t,i),set_input_value(t,e[9][e[61]]),s||(_=listen(t,"input",r),s=!0)},p(n,i){var o,c,u,p;e=n,i[0]&256&&l!==(l="input input-sm "+(((c=(o=e[8])==null?void 0:o[e[61]])==null?void 0:c.width)||"w-full")+" bg-transparent")&&attr(t,"class",l),i[0]&256&&a!==(a=e[16]((p=(u=e[8])==null?void 0:u[e[61]])==null?void 0:p.disabled,e[61]))&&(t.disabled=a),i[0]&768&&t.value!==e[9][e[61]]&&set_input_value(t,e[9][e[61]])},d(n){n&&detach(t),s=!1,_()}}}function create_if_block_9(e){let t,l,a,s;function _(){e[40].call(t,e[61])}function r(...n){return e[41](e[61],...n)}return{c(){var n,i;t=element("input"),attr(t,"type","checkbox"),attr(t,"class","checkbox checkbox-sm"),t.disabled=l=e[16]((i=(n=e[8])==null?void 0:n[e[61]])==null?void 0:i.disabled,e[61])},m(n,i){insert(n,t,i),t.checked=e[9][e[61]],a||(s=[listen(t,"change",_),listen(t,"change",r)],a=!0)},p(n,i){var o,c;e=n,i[0]&256&&l!==(l=e[16]((c=(o=e[8])==null?void 0:o[e[61]])==null?void 0:c.disabled,e[61]))&&(t.disabled=l),i[0]&768&&(t.checked=e[9][e[61]])},d(n){n&&detach(t),a=!1,run_all(s)}}}function create_each_block_7(e){let t,l=e[74].label+"",a,s;return{c(){t=element("option"),a=text(l),t.__value=s=e[74].value,set_input_value(t,t.__value)},m(_,r){insert(_,t,r),append(t,a)},p(_,r){r[0]&256&&l!==(l=_[74].label+"")&&set_data(a,l),r[0]&256&&s!==(s=_[74].value)&&(t.__value=s,set_input_value(t,t.__value))},d(_){_&&detach(t)}}}function create_each_block_6(e){let t,l,a,s,_,r;function n(c,u){var p,f,m,g,v,O,h,b;if(u[0]&256&&(l=null),u[0]&256&&(a=null),u[0]&256&&(s=null),u[0]&256&&(_=null),l==null&&(l=!!["boolean"].includes((f=(p=c[8])==null?void 0:p[c[61]])==null?void 0:f.type)),l)return create_if_block_9;if(a==null&&(a=!!["string"].includes((g=(m=c[8])==null?void 0:m[c[61]])==null?void 0:g.type)),a)return create_if_block_10;if(s==null&&(s=!!["text"].includes((O=(v=c[8])==null?void 0:v[c[61]])==null?void 0:O.type)),s)return create_if_block_11;if(_==null&&(_=!!["select"].includes((b=(h=c[8])==null?void 0:h[c[61]])==null?void 0:b.type)),_)return create_if_block_12}let i=n(e,[-1,-1,-1]),o=i&&i(e);return{c(){var c,u;t=element("td"),o&&o.c(),attr(t,"class",r=((u=(c=e[8])==null?void 0:c[e[61]])==null?void 0:u.width)||"")},m(c,u){insert(c,t,u),o&&o.m(t,null)},p(c,u){var p,f;i===(i=n(c,u))&&o?o.p(c,u):(o&&o.d(1),o=i&&i(c),o&&(o.c(),o.m(t,null))),u[0]&256&&r!==(r=((f=(p=c[8])==null?void 0:p[c[61]])==null?void 0:f.width)||"")&&attr(t,"class",r)},d(c){c&&detach(t),o&&o.d()}}}function create_each_block_5(e){var p,f,m;let t,l,a,s,_=((m=(f=(p=e[12])==null?void 0:p.tables)==null?void 0:f[e[69].table])==null?void 0:m.comment)+"",r,n,i,o,c;function u(){return e[29](e[69])}return{c(){var g,v,O;t=element("li"),l=element("a"),a=element("b"),a.textContent=`${e[69].table}`,s=text(" - "),r=text(_),n=space(),attr(l,"class","text-ellipsis"),attr(t,"class",i=(O=(v=(g=e[5])==null?void 0:g.layout)==null?void 0:v.allow_in_submenu)!=null&&O[e[69].table]?"bordered bg-slate-300":"")},m(g,v){insert(g,t,v),append(t,l),append(l,a),append(l,s),append(l,r),append(t,n),o||(c=listen(t,"click",u),o=!0)},p(g,v){var O,h,b,$,D,z;e=g,v[0]&4096&&_!==(_=((b=(h=(O=e[12])==null?void 0:O.tables)==null?void 0:h[e[69].table])==null?void 0:b.comment)+"")&&set_data(r,_),v[0]&288&&i!==(i=(z=(D=($=e[5])==null?void 0:$.layout)==null?void 0:D.allow_in_submenu)!=null&&z[e[69].table]?"bordered bg-slate-300":"")&&attr(t,"class",i)},d(g){g&&detach(t),o=!1,c()}}}function create_each_block_4(e){let t,l,a=e[58].field+"",s,_,r,n=e[58].order+"",i,o,c,u,p,f,m,g,v,O;f=new Icons({props:{type:"outline",icon:"trash",path:"icons"}});function h(){return e[30](e[60])}return{c(){t=element("tr"),l=element("td"),s=text(a),_=space(),r=element("td"),i=text(n),o=space(),c=element("td"),u=element("button"),p=element("span"),create_component(f.$$.fragment),m=space(),attr(r,"class","w-20"),attr(p,"class","w-6"),attr(u,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(c,"class","p-0.5 w-16 text-right")},m(b,$){insert(b,t,$),append(t,l),append(l,s),append(t,_),append(t,r),append(r,i),append(t,o),append(t,c),append(c,u),append(u,p),mount_component(f,p,null),append(t,m),g=!0,v||(O=listen(u,"click",h),v=!0)},p(b,$){e=b,(!g||$[0]&32)&&a!==(a=e[58].field+"")&&set_data(s,a),(!g||$[0]&32)&&n!==(n=e[58].order+"")&&set_data(i,n)},i(b){g||(transition_in(f.$$.fragment,b),g=!0)},o(b){transition_out(f.$$.fragment,b),g=!1},d(b){b&&detach(t),destroy_component(f),v=!1,O()}}}function create_each_block_3(e){let t,l;return{c(){t=element("option"),t.__value=l=e[61],set_input_value(t,t.__value)},m(a,s){insert(a,t,s)},p(a,s){s[0]&4097&&l!==(l=a[61])&&(t.__value=l,set_input_value(t,t.__value))},d(a){a&&detach(t)}}}function create_each_block_2(e){let t,l=e[13].t(`crud.${e[61]}`)+"",a,s,_;return{c(){var r,n;t=element("th"),a=text(l),s=space(),attr(t,"class",_="normal-case "+(((n=(r=e[7])==null?void 0:r[e[61]])==null?void 0:n.width)||""))},m(r,n){insert(r,t,n),append(t,a),append(t,s)},p(r,n){var i,o;n[0]&8320&&l!==(l=r[13].t(`crud.${r[61]}`)+"")&&set_data(a,l),n[0]&128&&_!==(_="normal-case "+(((o=(i=r[7])==null?void 0:i[r[61]])==null?void 0:o.width)||""))&&attr(t,"class",_)},d(r){r&&detach(t)}}}function create_else_block(e){let t,l,a,s;function _(i,o){var c,u,p,f,m,g,v,O,h,b,$,D,z,y,S,j,P,F,E;if(o[0]&1196&&(l=null),o[0]&1196&&(a=null),(f=(p=(c=i[5])==null?void 0:c.fields)==null?void 0:p[(u=i[58])==null?void 0:u.name])!=null&&f[i[61]]&&((g=(m=i[7])==null?void 0:m[i[61]])!=null&&g.no_input))return create_if_block_3;if(l==null&&(l=!!(["boolean"].includes((O=(v=i[7])==null?void 0:v[i[61]])==null?void 0:O.type)&&(($=(h=i[5])==null?void 0:h.fields)!=null&&$[(b=i[58])==null?void 0:b.name]))),l)return create_if_block_4;if(a==null&&(a=!!(["string"].includes((z=(D=i[7])==null?void 0:D[i[61]])==null?void 0:z.type)&&((j=(y=i[5])==null?void 0:y.fields)!=null&&j[(S=i[58])==null?void 0:S.name]))),a)return create_if_block_5;if(i[58].name&&((E=(P=i[5])==null?void 0:P.fields)!=null&&E[(F=i[58])==null?void 0:F.name]))return create_if_block_6}let r=_(e,[-1,-1,-1]),n=r&&r(e);return{c(){var i,o,c,u;t=element("td"),n&&n.c(),attr(t,"class",s="p-0.5 "+((o=(i=e[7])==null?void 0:i[e[61]])!=null&&o.no_input?"text-left":"text-center")+" align-middle "+(((u=(c=e[7])==null?void 0:c[e[61]])==null?void 0:u.width)||""))},m(i,o){insert(i,t,o),n&&n.m(t,null)},p(i,o){var c,u,p,f;r===(r=_(i,o))&&n?n.p(i,o):(n&&n.d(1),n=r&&r(i),n&&(n.c(),n.m(t,null))),o[0]&128&&s!==(s="p-0.5 "+((u=(c=i[7])==null?void 0:c[i[61]])!=null&&u.no_input?"text-left":"text-center")+" align-middle "+(((f=(p=i[7])==null?void 0:p[i[61]])==null?void 0:f.width)||""))&&attr(t,"class",s)},d(i){i&&detach(t),n&&n.d()}}}function create_if_block_2(e){var n,i,o,c;let t,l=((c=(o=(n=e[5])==null?void 0:n.fields)==null?void 0:o[(i=e[58])==null?void 0:i.name])==null?void 0:c[e[61]])+"",a,s,_,r;return{c(){var u;t=element("th"),a=text(l),attr(t,"class","cursor-move"),attr(t,"id",s=(u=e[58])==null?void 0:u.name),attr(t,"draggable",!0)},m(u,p){insert(u,t,p),append(t,a),_||(r=[listen(t,"dragover",dragover_handler),listen(t,"dragstart",e[17]),listen(t,"drop",e[18])],_=!0)},p(u,p){var f,m,g,v,O;p[0]&1196&&l!==(l=((v=(g=(f=u[5])==null?void 0:f.fields)==null?void 0:g[(m=u[58])==null?void 0:m.name])==null?void 0:v[u[61]])+"")&&set_data(a,l),p[0]&1036&&s!==(s=(O=u[58])==null?void 0:O.name)&&attr(t,"id",s)},d(u){u&&detach(t),_=!1,run_all(r)}}}function create_if_block_6(e){let t,l,a,s,_;function r(){e[27].call(t,e[58],e[61])}return{c(){var n,i,o,c;t=element("input"),attr(t,"type","number"),attr(t,"class",l="input input-sm "+(((i=(n=e[7])==null?void 0:n[e[61]])==null?void 0:i.width)||"w-full")+" bg-transparent"),t.disabled=a=e[16]((c=(o=e[7])==null?void 0:o[e[61]])==null?void 0:c.disabled,e[58],e[61])},m(n,i){insert(n,t,i),set_input_value(t,e[5].fields[e[58].name][e[61]]),s||(_=listen(t,"input",r),s=!0)},p(n,i){var o,c,u,p;e=n,i[0]&128&&l!==(l="input input-sm "+(((c=(o=e[7])==null?void 0:o[e[61]])==null?void 0:c.width)||"w-full")+" bg-transparent")&&attr(t,"class",l),i[0]&1164&&a!==(a=e[16]((p=(u=e[7])==null?void 0:u[e[61]])==null?void 0:p.disabled,e[58],e[61]))&&(t.disabled=a),i[0]&1452&&to_number(t.value)!==e[5].fields[e[58].name][e[61]]&&set_input_value(t,e[5].fields[e[58].name][e[61]])},d(n){n&&detach(t),s=!1,_()}}}function create_if_block_5(e){let t,l,a,s,_;function r(){e[26].call(t,e[58],e[61])}return{c(){var n,i,o,c;t=element("input"),attr(t,"type","text"),attr(t,"class",l="input input-sm "+(((i=(n=e[7])==null?void 0:n[e[61]])==null?void 0:i.width)||"w-full")+" bg-transparent"),t.disabled=a=e[16]((c=(o=e[7])==null?void 0:o[e[61]])==null?void 0:c.disabled,e[58],e[61])},m(n,i){insert(n,t,i),set_input_value(t,e[5].fields[e[58].name][e[61]]),s||(_=listen(t,"input",r),s=!0)},p(n,i){var o,c,u,p;e=n,i[0]&128&&l!==(l="input input-sm "+(((c=(o=e[7])==null?void 0:o[e[61]])==null?void 0:c.width)||"w-full")+" bg-transparent")&&attr(t,"class",l),i[0]&1164&&a!==(a=e[16]((p=(u=e[7])==null?void 0:u[e[61]])==null?void 0:p.disabled,e[58],e[61]))&&(t.disabled=a),i[0]&1452&&t.value!==e[5].fields[e[58].name][e[61]]&&set_input_value(t,e[5].fields[e[58].name][e[61]])},d(n){n&&detach(t),s=!1,_()}}}function create_if_block_4(e){let t,l,a,s;function _(){e[24].call(t,e[58],e[61])}function r(...n){return e[25](e[61],...n)}return{c(){var n,i;t=element("input"),attr(t,"type","checkbox"),attr(t,"class","checkbox checkbox-sm"),t.disabled=l=e[16]((i=(n=e[7])==null?void 0:n[e[61]])==null?void 0:i.disabled,e[58],e[61])},m(n,i){insert(n,t,i),t.checked=e[5].fields[e[58].name][e[61]],a||(s=[listen(t,"change",_),listen(t,"change",r)],a=!0)},p(n,i){var o,c;e=n,i[0]&1164&&l!==(l=e[16]((c=(o=e[7])==null?void 0:o[e[61]])==null?void 0:c.disabled,e[58],e[61]))&&(t.disabled=l),i[0]&1452&&(t.checked=e[5].fields[e[58].name][e[61]])},d(n){n&&detach(t),a=!1,run_all(s)}}}function create_if_block_3(e){var a,s,_,r;let t=((r=(_=(a=e[5])==null?void 0:a.fields)==null?void 0:_[(s=e[58])==null?void 0:s.name])==null?void 0:r[e[61]])+"",l;return{c(){l=text(t)},m(n,i){insert(n,l,i)},p(n,i){var o,c,u,p;i[0]&1196&&t!==(t=((p=(u=(o=n[5])==null?void 0:o.fields)==null?void 0:u[(c=n[58])==null?void 0:c.name])==null?void 0:p[n[61]])+"")&&set_data(l,t)},d(n){n&&detach(l)}}}function create_each_block_1(e){let t;function l(_,r){return _[61]==="name"?create_if_block_2:create_else_block}let a=l(e),s=a(e);return{c(){s.c(),t=empty()},m(_,r){s.m(_,r),insert(_,t,r)},p(_,r){a===(a=l(_))&&s?s.p(_,r):(s.d(1),s=a(_),s&&(s.c(),s.m(t.parentNode,t)))},d(_){_&&detach(t),s.d(_)}}}function create_each_block(e){let t,l,a=ensure_array_like(Object.keys(e[7])),s=[];for(let _=0;_<a.length;_+=1)s[_]=create_each_block_1(get_each_context_1(e,a,_));return{c(){t=element("tr");for(let _=0;_<s.length;_+=1)s[_].c();l=space(),attr(t,"class","hover")},m(_,r){insert(_,t,r);for(let n=0;n<s.length;n+=1)s[n]&&s[n].m(t,null);append(t,l)},p(_,r){if(r[0]&459948){a=ensure_array_like(Object.keys(_[7]));let n;for(n=0;n<a.length;n+=1){const i=get_each_context_1(_,a,n);s[n]?s[n].p(i,r):(s[n]=create_each_block_1(i),s[n].c(),s[n].m(t,l))}for(;n<s.length;n+=1)s[n].d(1);s.length=a.length}},d(_){_&&detach(t),destroy_each(s,_)}}}function create_if_block(e){let t,l;return t=new Loadingv2({props:{open:e[11]}}),{c(){create_component(t.$$.fragment)},m(a,s){mount_component(t,a,s),l=!0},p(a,s){const _={};s[0]&2048&&(_.open=a[11]),t.$set(_)},i(a){l||(transition_in(t.$$.fragment,a),l=!0)},o(a){transition_out(t.$$.fragment,a),l=!1},d(a){destroy_component(t,a)}}}function create_fragment(e){let t,l,a,s,_,r=`${e[13].t("crud.field")}s`,n,i,o,c,u,p=`${e[13].t("crud.layout")}`,f,m,g,v,O,h=`${e[13].t("crud.extend")}`,b,$,D,z,y,S,j,P,F,E,R,k,N,M;const C=[create_if_block_1,create_if_block_7,create_if_block_8],A=[];function oe(T,q){return T[1]===0?0:T[1]===1?1:T[1]===2?2:-1}~(j=oe(e))&&(P=A[j]=C[j](e)),E=new Toast({props:{open:e[6].open,type:e[6].type,msg:e[6].msg,timer:2e4}}),E.$on("dismiss",e[46]);let H=e[11]&&create_if_block(e);return{c(){t=element("div"),l=element("div"),a=element("div"),s=element("a"),_=element("b"),n=text(r),o=space(),c=element("a"),u=element("b"),f=text(p),g=space(),v=element("a"),O=element("b"),b=text(h),D=space(),z=element("a"),z.innerHTML="<b></b>",y=space(),S=element("div"),P&&P.c(),F=space(),create_component(E.$$.fragment),R=space(),H&&H.c(),attr(s,"class",i="tab tab-lifted text-md "+(e[1]===0?"tab-active active":"")),attr(c,"class",m="tab tab-lifted text-md "+(e[1]===1?"tab-active active":"")),attr(v,"class",$="tab tab-lifted text-md "+(e[1]===2?"tab-active active":"")),attr(z,"class","tab tab-lifted text-md grow"),attr(a,"class","tabs w-full"),attr(S,"class","w-full p-2"),attr(l,"class","grow w-full"),attr(t,"class","flex flex-col")},m(T,q){insert(T,t,q),append(t,l),append(l,a),append(a,s),append(s,_),append(_,n),append(a,o),append(a,c),append(c,u),append(u,f),append(a,g),append(a,v),append(v,O),append(O,b),append(a,D),append(a,z),append(l,y),append(l,S),~j&&A[j].m(S,null),append(l,F),mount_component(E,l,null),append(t,R),H&&H.m(t,null),k=!0,N||(M=[listen(s,"click",prevent_default(e[21])),listen(c,"click",prevent_default(e[22])),listen(v,"click",prevent_default(e[23]))],N=!0)},p(T,q){(!k||q[0]&8192)&&r!==(r=`${T[13].t("crud.field")}s`)&&set_data(n,r),(!k||q[0]&2&&i!==(i="tab tab-lifted text-md "+(T[1]===0?"tab-active active":"")))&&attr(s,"class",i),(!k||q[0]&8192)&&p!==(p=`${T[13].t("crud.layout")}`)&&set_data(f,p),(!k||q[0]&2&&m!==(m="tab tab-lifted text-md "+(T[1]===1?"tab-active active":"")))&&attr(c,"class",m),(!k||q[0]&8192)&&h!==(h=`${T[13].t("crud.extend")}`)&&set_data(b,h),(!k||q[0]&2&&$!==($="tab tab-lifted text-md "+(T[1]===2?"tab-active active":"")))&&attr(v,"class",$);let K=j;j=oe(T),j===K?~j&&A[j].p(T,q):(P&&(group_outros(),transition_out(A[K],1,1,()=>{A[K]=null}),check_outros()),~j?(P=A[j],P?P.p(T,q):(P=A[j]=C[j](T),P.c()),transition_in(P,1),P.m(S,null)):P=null);const Z={};q[0]&64&&(Z.open=T[6].open),q[0]&64&&(Z.type=T[6].type),q[0]&64&&(Z.msg=T[6].msg),E.$set(Z),T[11]?H?(H.p(T,q),q[0]&2048&&transition_in(H,1)):(H=create_if_block(T),H.c(),transition_in(H,1),H.m(t,null)):H&&(group_outros(),transition_out(H,1,1,()=>{H=null}),check_outros())},i(T){k||(transition_in(P),transition_in(E.$$.fragment,T),transition_in(H),k=!0)},o(T){transition_out(P),transition_out(E.$$.fragment,T),transition_out(H),k=!1},d(T){T&&detach(t),~j&&A[j].d(),destroy_component(E),H&&H.d(),N=!1,run_all(M)}}}const dragover_handler=e=>e.preventDefault();function instance($$self,$$props,$$invalidate){let $_global,$i18n;component_subscribe($$self,_global,e=>$$invalidate(12,$_global=e)),component_subscribe($$self,i18n,e=>$$invalidate(13,$i18n=e)),createEventDispatcher();let{table}=$$props,{data={}}=$$props,{action={}}=$$props,tab=0,limit=10,offset=0,custom_table={};const order_by={};let custom_table_config={fields:{},layout:{allow_in_submenu:{},default_order:[],allow_import:!1},extra_options:[]},toast={open:!1,msg:null,type:null},_fields_schema={name:{type:"string",no_input:!0},label:{type:"string",width:"w-34"},use_label:{type:"boolean",disabled:"!custom_table_config?.fields?.[d?.name]?.label"},display:{type:"boolean"},ellipsis:{type:"string",width:"w-14"},nullable:{type:"boolean"},att:{type:"boolean"},preview:{type:"boolean",disabled:"!custom_table_config?.fields?.[d?.name]?.att"},number:{type:"boolean"},dec_places:{type:"string",width:"w-14",disabled:"!custom_table_config?.fields?.[d?.name]?.number"},tous_sep:{type:"string",disabled:"!custom_table_config?.fields?.[d?.name]?.number"},intl_nformat:{type:"string",disabled:"!custom_table_config?.fields?.[d?.name]?.number"},date:{type:"boolean"},date_format:{type:"string",width:"w-34",disabled:"!custom_table_config?.fields?.[d?.name]?.date"}};const sizes=[...Array(12).keys()].map(e=>({value:e+1,label:`${((e+1)/12*100).toFixed(2)}%`}));let _extra_opts_schema={component:{type:"string",width:"w-30"},label:{type:"string",width:"w-30"},data:{type:"text",width:"w-60"},icon:{type:"string",width:"w-24"},intercept_c:{type:"boolean"},intercept_u:{type:"boolean"},intercept_r:{type:"boolean"},intercept_d:{type:"boolean"},not_row_centred:{type:"boolean"},pop_up:{type:"boolean"},main:{type:"boolean"},size:{type:"select",width:"w-24",options:sizes}},_extra_opts={},fields=[],fk_tables=[],drag_field,loading=!1;const save=async e=>{$$invalidate(11,loading=!0);const t={lang:$_global==null?void 0:$_global.lang,conf:$_global==null?void 0:$_global.conf,token:$_global==null?void 0:$_global.token,app:{app_id:1,app:"ADMIN"},table:"custom_table",data:Object.assign(e.custom_table||custom_table,{config:JSON.stringify(e.custom_table_config||custom_table_config)})},l=await create_update(t);if(l.success===!0){$$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="success",toast),$$invalidate(6,toast.msg=l.msg,toast),l.inserted_primary_key&&(e.custom_table?e.custom_table[$_global.tables.custom_table.pk]=l.inserted_primary_key:custom_table[$_global.tables.custom_table.pk]=l.inserted_primary_key),_global.set({...$_global,tables:{...$_global.tables,[table]:{...$_global.tables[table],custom_table:Object.assign(e.custom_table||custom_table,{config:JSON.stringify(e.custom_table_config||custom_table_config)})}}});try{action!=null&&action.action&&(action==null||action.action(e.custom_table_config||custom_table_config))}catch(a){console.log(a.message)}}else $$invalidate(6,toast.open=!0,toast),$$invalidate(6,toast.type="error",toast),$$invalidate(6,toast.msg=l.msg,toast);$$invalidate(11,loading=!1)},get_fields=e=>{var a,s,_,r,n,i,o,c,u,p,f,m,g,v,O,h;const t=[],l=Object.keys(e);for(const b in e)if(Object.hasOwnProperty.call(e,b)){if(e[b].pk)continue;if(e[b].fk){if(l.includes((s=(a=e[b])==null?void 0:a.ref)==null?void 0:s.referred_columns_desc))continue;t.push(Object.assign(e[b],{name:(r=(_=e[b])==null?void 0:_.ref)==null?void 0:r.referred_columns_desc,referred_table:(i=(n=e[b])==null?void 0:n.ref)==null?void 0:i.referred_table,comment:(v=(g=(p=(u=$_global==null?void 0:$_global.tables)==null?void 0:u[(c=(o=e[b])==null?void 0:o.ref)==null?void 0:c.referred_table])==null?void 0:p.fields)==null?void 0:g[(m=(f=e[b])==null?void 0:f.ref)==null?void 0:m.referred_columns_desc])==null?void 0:v.comment,referred_column:(h=(O=e[b])==null?void 0:O.ref)==null?void 0:h.referred_column}))}else t.push(e[b])}return t},prepare_fields=e=>{var l,a;const t={};return get_fields(lodashExports.cloneDeep((a=(l=$_global==null?void 0:$_global.tables)==null?void 0:l[e])==null?void 0:a.fields)||{}).forEach((s,_)=>{var r,n,i;try{const o={};o.name=s.name,o.label=s.comment,o.ellipsis=30,o.order=_+1,o.display=(((r=$_global==null?void 0:$_global.conf)==null?void 0:r.form_not_update)||[]).indexOf(s.name)===-1,o.fk=!!s.fk,o.autocomplete=!!s.fk,o.nullable=s.nullable||!1,o.att=s.name.toLowerCase().substring(0,7)==="attach_",o.number=["int","dec","flo","rea"].indexOf(s.name.toLowerCase().substring(0,3))!==-1,o.dec_places=null,o.tous_sep=null,o.intl_nformat=null,o.date=["date","datetime","timestamp"].indexOf((n=s==null?void 0:s.type)==null?void 0:n.toLowerCase())!==-1,o.long_text=["text","longtext"].indexOf((i=s==null?void 0:s.type)==null?void 0:i.toLowerCase())!==-1,o.date_format=null,o.regex_val=null,t[o.name]=Object.assign({},o)}catch(o){console.log(s,o.message)}}),t},handle_pagination=e=>{e.type==="next"?$$invalidate(3,offset+=1):e.type==="back"?$$invalidate(3,offset-=1):e.type==="first"?$$invalidate(3,offset=0):e.type==="last"?$$invalidate(3,offset=Math.ceil(limit/((data==null?void 0:data.total)||limit))):e.type==="rows_per_page"&&($$invalidate(2,limit=e.rows_per_page),$$invalidate(3,offset=0))},get_eval=(payload,d,field)=>{try{return eval(payload)}catch(e){return console.log(payload,d,field,e.message),!1}},handleDrag=e=>{drag_field=e.currentTarget.id},handleDrop=e=>{const t=e.currentTarget.id;if(drag_field!==t)try{let l=fields.map(_=>_.name);const a=Object.assign({},fields[l.indexOf(drag_field)]);fields.splice(l.indexOf(drag_field),1),fields.splice(l.indexOf(t),0,a),$$invalidate(10,fields=[...fields.map((_,r)=>(_.order=r+1,_))]);const s={};fields.forEach((_,r)=>{var n;s[_.name]=Object.assign((n=custom_table_config==null?void 0:custom_table_config.fields)==null?void 0:n[_.name],{order:r+1})}),$$invalidate(5,custom_table_config={...custom_table_config,fields:s})}catch(l){console.log(l.message)}};onMount(()=>{var e,t,l,a,s,_,r,n,i,o,c,u,p,f,m,g,v,O,h;$i18n.changeLanguage($_global==null?void 0:$_global.lang),console.log((e=$_global==null?void 0:$_global.tables)==null?void 0:e[table]);try{hooks.locale($_global==null?void 0:$_global.lang)}catch{hooks.locale("en-us")}$$invalidate(10,fields=get_fields(lodashExports.cloneDeep((l=(t=$_global==null?void 0:$_global.tables)==null?void 0:t[table])==null?void 0:l.fields)||{}));for(const b in $_global==null?void 0:$_global.tables)for(const $ in(s=(a=$_global==null?void 0:$_global.tables)==null?void 0:a[b])==null?void 0:s.fields)if(Object.hasOwnProperty.call((r=(_=$_global==null?void 0:$_global.tables)==null?void 0:_[b])==null?void 0:r.fields,$)){const D=(i=(n=$_global==null?void 0:$_global.tables)==null?void 0:n[b])==null?void 0:i.fields[$];if(D.fk&&((o=D==null?void 0:D.ref)==null?void 0:o.referred_table)===table){const z=Object.assign(D,{table:b});fk_tables.push(Object.assign(z,D==null?void 0:D.ref))}}if(custom_table=(u=(c=$_global==null?void 0:$_global.tables)==null?void 0:c[table])==null?void 0:u.custom_table,custom_table!=null&&custom_table.user_id&&((p=$_global==null?void 0:$_global.user)==null?void 0:p.user_id)!==(custom_table==null?void 0:custom_table.user_id)&&(delete custom_table.user_id,delete custom_table.custom_table_id),custom_table){if($$invalidate(5,custom_table_config=custom_table==null?void 0:custom_table.config),typeof custom_table_config=="string")try{$$invalidate(5,custom_table_config=JSON.parse(custom_table_config));const b=prepare_fields(table);if(!(custom_table_config!=null&&custom_table_config.fields))$$invalidate(5,custom_table_config.fields=b,custom_table_config);else{for(const D in b)Object.hasOwnProperty.call(b,D)&&(custom_table_config.fields[D]||$$invalidate(5,custom_table_config.fields[D]=b[D],custom_table_config));const $=[];for(const D in custom_table_config.fields)if(Object.hasOwnProperty.call(custom_table_config.fields,D)){const z=fields.filter(y=>y.name===D);$.push(Object.assign({},z[0]))}$$invalidate(10,fields=$)}custom_table_config!=null&&custom_table_config.layout||$$invalidate(5,custom_table_config.layout={allow_in_submenu:{},default_order:[],allow_import:!1},custom_table_config),custom_table_config!=null&&custom_table_config.extra_options||$$invalidate(5,custom_table_config.extra_options=[],custom_table_config)}catch(b){console.log(b.message)}}else{custom_table={table,db:((m=(f=$_global==null?void 0:$_global.tables)==null?void 0:f[table])==null?void 0:m.database)||((v=(g=$_global==null?void 0:$_global.tables)==null?void 0:g[table])==null?void 0:v.db)||((O=$_global==null?void 0:$_global.selected_app)==null?void 0:O.db),app_id:(h=$_global==null?void 0:$_global.selected_app)==null?void 0:h.app_id};const b=prepare_fields(table);$$invalidate(5,custom_table_config={fields:b,layout:{allow_in_submenu:{},default_order:[],allow_import:!1},extra_options:[]})}});const click_handler=()=>{$$invalidate(1,tab=0)},click_handler_1=()=>{$$invalidate(1,tab=1)},click_handler_2=()=>{$$invalidate(1,tab=2)};function input_change_handler(e,t){custom_table_config.fields[e.name][t]=this.checked,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}const change_handler=(e,t)=>{var l;try{$$invalidate(7,_fields_schema={..._fields_schema,[e]:{..._fields_schema[e],disabled:(l=_fields_schema==null?void 0:_fields_schema[e])==null?void 0:l.disabled}})}catch(a){console.log(a.message)}};function input_input_handler(e,t){custom_table_config.fields[e.name][t]=this.value,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function input_input_handler_1(e,t){custom_table_config.fields[e.name][t]=to_number(this.value),$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}const pageChange_handler=e=>handle_pagination(e.detail),click_handler_3=e=>{var t,l;try{(l=(t=custom_table_config==null?void 0:custom_table_config.layout)==null?void 0:t.allow_in_submenu)!=null&&l[e.table]?(delete custom_table_config.layout.allow_in_submenu[e.table],$$invalidate(5,custom_table_config.layout.allow_in_submenu={...custom_table_config.layout.allow_in_submenu},custom_table_config)):$$invalidate(5,custom_table_config.layout.allow_in_submenu={...custom_table_config.layout.allow_in_submenu,[e.table]:!0},custom_table_config)}catch(a){console.log(a.message)}},click_handler_4=e=>{try{custom_table_config.layout.default_order.splice(e,1),$$invalidate(5,custom_table_config.layout.default_order=[...custom_table_config.layout.default_order],custom_table_config)}catch{}};function input2_input_handler(){order_by.field=this.value,$$invalidate(4,order_by)}function input3_input_handler(){order_by.order=this.value,$$invalidate(4,order_by)}const click_handler_5=()=>{try{!order_by.field||!order_by.order||($$invalidate(5,custom_table_config.layout.default_order=[...custom_table_config.layout.default_order,Object.assign({},order_by)],custom_table_config),$$invalidate(4,order_by.field="",order_by),$$invalidate(4,order_by.order="",order_by))}catch{}};function input5_change_handler(){custom_table_config.layout.allow_import=this.checked,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function input_change_handler_1(e,t,l){t[l][e]=this.checked,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function textarea_input_handler(e,t,l){t[l][e]=this.value,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function select_change_handler(e,t,l){t[l][e]=select_value(this),$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}function input_input_handler_2(e,t,l){t[l][e]=this.value,$$invalidate(5,custom_table_config),$$invalidate(8,_extra_opts_schema)}const click_handler_6=e=>{try{custom_table_config.extra_options.splice(e,1),$$invalidate(5,custom_table_config.extra_options=[...custom_table_config.extra_options],custom_table_config)}catch{}};function input_change_handler_2(e){_extra_opts[e]=this.checked,$$invalidate(9,_extra_opts),$$invalidate(8,_extra_opts_schema)}const change_handler_1=(e,t)=>{var l;try{$$invalidate(8,_extra_opts_schema={..._extra_opts_schema,[e]:{..._extra_opts_schema[e],disabled:(l=_extra_opts_schema==null?void 0:_extra_opts_schema[e])==null?void 0:l.disabled}})}catch(a){console.log(a.message)}};function input_input_handler_3(e){_extra_opts[e]=this.value,$$invalidate(9,_extra_opts),$$invalidate(8,_extra_opts_schema)}function textarea_input_handler_1(e){_extra_opts[e]=this.value,$$invalidate(9,_extra_opts),$$invalidate(8,_extra_opts_schema)}function select_change_handler_1(e){_extra_opts[e]=select_value(this),$$invalidate(9,_extra_opts),$$invalidate(8,_extra_opts_schema)}const click_handler_7=()=>{try{!_extra_opts.component||!_extra_opts.label||$$invalidate(5,custom_table_config.extra_options=[...custom_table_config.extra_options,Object.assign({},_extra_opts)],custom_table_config)}catch{}},dismiss_handler=e=>{$$invalidate(6,toast.open=!1,toast)};return $$self.$$set=e=>{"table"in e&&$$invalidate(0,table=e.table),"data"in e&&$$invalidate(19,data=e.data),"action"in e&&$$invalidate(20,action=e.action)},$$self.$$.update=()=>{$$self.$$.dirty[0]&1048576&&(action==null?void 0:action.name)=="save"&&save({})},[table,tab,limit,offset,order_by,custom_table_config,toast,_fields_schema,_extra_opts_schema,_extra_opts,fields,loading,$_global,$i18n,fk_tables,handle_pagination,get_eval,handleDrag,handleDrop,data,action,click_handler,click_handler_1,click_handler_2,input_change_handler,change_handler,input_input_handler,input_input_handler_1,pageChange_handler,click_handler_3,click_handler_4,input2_input_handler,input3_input_handler,click_handler_5,input5_change_handler,input_change_handler_1,textarea_input_handler,select_change_handler,input_input_handler_2,click_handler_6,input_change_handler_2,change_handler_1,input_input_handler_3,textarea_input_handler_1,select_change_handler_1,click_handler_7,dismiss_handler]}class TableCustomization extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{table:0,data:19,action:20},null,[-1,-1,-1])}}export{TableCustomization as default};
