import{S as SvelteComponent,i as init,s as safe_not_equal,v as ensure_array_like,I as Icons,e as element,a as space,c as create_component,t as text,w as empty,b as attr,B as set_style,d as insert,f as append,m as mount_component,l as listen,n as set_data,g as transition_in,h as group_outros,k as check_outros,j as transition_out,o as detach,x as destroy_each,p as destroy_component,q as component_subscribe,r as i18n,_ as _global,u as onMount,F as hooks,z as string_ellipsis,A as string_ellipsis_title,G as prevent_default,L as Loadingv2,T as Toast,H as assign,M as Modal,J as get_spread_update,K as get_spread_object,y as lodashExports,W as create_update,N as read,P as __vitePreload,O as get_tables,$ as select_value,D as run_all,C as set_input_value,a0 as add_render_callback,a1 as select_option}from"./index-13d4ac78.js";import"./pt-607305e9.js";import{P as Pagination}from"./Pagination-a0736574.js";function get_each_context(e,t,l){const a=e.slice();return a[66]=t[l],a[67]=t,a[68]=l,a}function get_each_context_1(e,t,l){const a=e.slice();return a[69]=t[l],a[71]=l,a}function get_each_context_2(e,t,l){const a=e.slice();return a[72]=t[l],a[73]=t,a[71]=l,a}function get_each_context_3(e,t,l){const a=e.slice();return a[74]=t[l],a}function get_each_context_4(e,t,l){const a=e.slice();return a[77]=t[l],a[78]=t,a[79]=l,a}function get_each_context_5(e,t,l){const a=e.slice();return a[72]=t[l],a[80]=t,a[71]=l,a}function get_each_context_6(e,t,l){const a=e.slice();return a[74]=t[l],a}function get_each_context_7(e,t,l){const a=e.slice();return a[72]=t[l],a}function get_each_context_8(e,t,l){const a=e.slice();return a[69]=t[l],a[71]=l,a}function get_each_context_9(e,t,l){const a=e.slice();return a[66]=t[l],a[68]=l,a}function create_each_block_9(e){var c;let t,l,a=string_ellipsis((c=e[66])==null?void 0:c.app,30)+"",i,n,_,s,o;function r(){return e[24](e[66])}return{c(){var f,u;t=element("a"),l=element("b"),i=text(a),attr(t,"class",n="tab tab-lifted text-md "+(e[4]===((f=e[66])==null?void 0:f.app_id)?"tab-active active":"")),attr(t,"title",_=string_ellipsis_title((u=e[66])==null?void 0:u.app,30))},m(f,u){insert(f,t,u),append(t,l),append(l,i),s||(o=listen(t,"click",prevent_default(r)),s=!0)},p(f,u){var b,g,E;e=f,u[0]&8&&a!==(a=string_ellipsis((b=e[66])==null?void 0:b.app,30)+"")&&set_data(i,a),u[0]&280&&n!==(n="tab tab-lifted text-md "+(e[4]===((g=e[66])==null?void 0:g.app_id)?"tab-active active":""))&&attr(t,"class",n),u[0]&264&&_!==(_=string_ellipsis_title((E=e[66])==null?void 0:E.app,30))&&attr(t,"title",_)},d(f){f&&detach(t),s=!1,o()}}}function create_if_block_3(e){var V,I,A,J,H,q;let t,l,a,i,n,_,s,o=(((I=(V=e[0])==null?void 0:V.data)==null?void 0:I.profile)===!0?"":e[10].t("crud.add"))+"",r,c,f=e[10].t("crud.menus")+"",u,b,g,E,D,N;function j(...v){return e[26](e[66],...v)}let T=ensure_array_like((((J=(A=e[3])==null?void 0:A.menu)==null?void 0:J.data)||[]).filter(j)),k=[];for(let v=0;v<T.length;v+=1)k[v]=create_each_block_8(get_each_context_8(e,T,v));_=new Icons({props:{type:"outline",icon:"plus",path:"icons"}});function z(){return e[28](e[66])}function w(...v){return e[29](e[66],...v)}let P=ensure_array_like((((q=(H=e[3])==null?void 0:H.menu)==null?void 0:q.data)||[]).filter(w)),h=[];for(let v=0;v<P.length;v+=1)h[v]=create_each_block_1(get_each_context_1(e,P,v));const F=v=>transition_out(h[v],1,1,()=>{h[v]=null});return{c(){var v,B;t=element("div"),l=element("div");for(let M=0;M<k.length;M+=1)k[M].c();a=space(),i=element("a"),n=element("span"),create_component(_.$$.fragment),s=space(),r=text(o),c=space(),u=text(f),b=space();for(let M=0;M<h.length;M+=1)h[M].c();g=space(),attr(n,"class","w-4 h-4"),set_style(n,"display",((B=(v=e[0])==null?void 0:v.data)==null?void 0:B.profile)===!0?"none":null),attr(i,"class","tab tab-lifted text-md text-left justify-start grow"),attr(l,"class","tab w-full"),attr(t,"class","w-full pt-2")},m(v,B){insert(v,t,B),append(t,l);for(let M=0;M<k.length;M+=1)k[M]&&k[M].m(l,null);append(l,a),append(l,i),append(i,n),mount_component(_,n,null),append(i,s),append(i,r),append(i,c),append(i,u),append(t,b);for(let M=0;M<h.length;M+=1)h[M]&&h[M].m(t,null);append(t,g),E=!0,D||(N=listen(i,"click",z),D=!0)},p(v,B){var M,m,$,O,y,K,U,W;if(e=v,B[0]&8){T=ensure_array_like((((m=(M=e[3])==null?void 0:M.menu)==null?void 0:m.data)||[]).filter(j));let R;for(R=0;R<T.length;R+=1){const G=get_each_context_8(e,T,R);k[R]?k[R].p(G,B):(k[R]=create_each_block_8(G),k[R].c(),k[R].m(l,a))}for(;R<k.length;R+=1)k[R].d(1);k.length=T.length}if(B[0]&1&&set_style(n,"display",((O=($=e[0])==null?void 0:$.data)==null?void 0:O.profile)===!0?"none":null),(!E||B[0]&1025)&&o!==(o=(((K=(y=e[0])==null?void 0:y.data)==null?void 0:K.profile)===!0?"":e[10].t("crud.add"))+"")&&set_data(r,o),(!E||B[0]&1024)&&f!==(f=e[10].t("crud.menus")+"")&&set_data(u,f),B[0]&1535375){P=ensure_array_like((((W=(U=e[3])==null?void 0:U.menu)==null?void 0:W.data)||[]).filter(w));let R;for(R=0;R<P.length;R+=1){const G=get_each_context_1(e,P,R);h[R]?(h[R].p(G,B),transition_in(h[R],1)):(h[R]=create_each_block_1(G),h[R].c(),transition_in(h[R],1),h[R].m(t,g))}for(group_outros(),R=P.length;R<h.length;R+=1)F(R);check_outros()}},i(v){if(!E){transition_in(_.$$.fragment,v);for(let B=0;B<P.length;B+=1)transition_in(h[B]);E=!0}},o(v){transition_out(_.$$.fragment,v),h=h.filter(Boolean);for(let B=0;B<h.length;B+=1)transition_out(h[B]);E=!1},d(v){v&&detach(t),destroy_each(k,v),destroy_component(_),destroy_each(h,v),D=!1,N()}}}function create_each_block_8(e){var c;let t,l,a=string_ellipsis((c=e[69])==null?void 0:c.menu,30)+"",i,n,_,s,o;function r(){return e[27](e[66],e[69],e[67],e[68])}return{c(){var f,u,b;t=element("a"),l=element("b"),i=text(a),attr(t,"class",n="tab tab-lifted text-md "+((e[66].selected_menu?e[66].selected_menu===((f=e[69])==null?void 0:f.menu_id):e[71]===0)?"tab-active active":"")),attr(t,"title",_=string_ellipsis_title((u=e[69])==null?void 0:u.menu,30)),set_style(t,"display2",(e[66].selected_menu?e[66].selected_menu===((b=e[69])==null?void 0:b.menu_id):e[71]===0)?null:"none")},m(f,u){insert(f,t,u),append(t,l),append(l,i),s||(o=listen(t,"click",prevent_default(r)),s=!0)},p(f,u){var b,g,E,D;e=f,u[0]&8&&a!==(a=string_ellipsis((b=e[69])==null?void 0:b.menu,30)+"")&&set_data(i,a),u[0]&264&&n!==(n="tab tab-lifted text-md "+((e[66].selected_menu?e[66].selected_menu===((g=e[69])==null?void 0:g.menu_id):e[71]===0)?"tab-active active":""))&&attr(t,"class",n),u[0]&264&&_!==(_=string_ellipsis_title((E=e[69])==null?void 0:E.menu,30))&&attr(t,"title",_),u[0]&8&&set_style(t,"display2",(e[66].selected_menu?e[66].selected_menu===((D=e[69])==null?void 0:D.menu_id):e[71]===0)?null:"none")},d(f){f&&detach(t),s=!1,o()}}}function create_if_block_4(e){var K,U,W,R,G,X;let t,l,a,i,n,_,s,o,r,c,f,u,b,g,E,D,N,j,T,k,z,w,P,h,F,V,I=ensure_array_like(Object.keys(e[8])),A=[];for(let p=0;p<I.length;p+=1)A[p]=create_each_block_7(get_each_context_7(e,I,p));r=new Icons({props:{type:"outline",icon:"table",path:"icons"}});function J(){return e[37](e[66],e[69])}function H(...p){return e[38](e[69],...p)}let q=ensure_array_like((((U=(K=e[3])==null?void 0:K[e[1]])==null?void 0:U.data)||[]).filter(H).slice((e[69].offset||0)*(e[69].limit||10),(e[69].offset||0)*(e[69].limit||10)+(e[69].limit||10))),v=[];for(let p=0;p<q.length;p+=1)v[p]=create_each_block_4(get_each_context_4(e,q,p));const B=p=>transition_out(v[p],1,1,()=>{v[p]=null});let M=ensure_array_like(Object.keys(e[8])),m=[];for(let p=0;p<M.length;p+=1)m[p]=create_each_block_2(get_each_context_2(e,M,p));k=new Icons({props:{type:"outline",icon:"plus",path:"icons"}});function $(){return e[51](e[69],e[71])}function O(...p){return e[52](e[69],...p)}function y(...p){return e[53](e[69],e[71],...p)}return P=new Pagination({props:{lang:(W=e[11])==null?void 0:W.lang,conf:(R=e[11])==null?void 0:R.conf,rows_per_page:e[69].limit||10,page:e[69].offset||0,total_rows:(((X=(G=e[3])==null?void 0:G[e[1]])==null?void 0:X.data)||[]).filter(O).length}}),P.$on("pageChange",y),{c(){var p,S,L,Y,x;t=element("div"),l=element("table"),a=element("thead"),i=element("tr");for(let Q=0;Q<A.length;Q+=1)A[Q].c();n=space(),_=element("th"),s=element("button"),o=element("span"),create_component(r.$$.fragment),f=space(),u=element("tbody");for(let Q=0;Q<v.length;Q+=1)v[Q].c();b=space(),g=element("tfoot"),E=element("tr");for(let Q=0;Q<m.length;Q+=1)m[Q].c();D=space(),N=element("td"),j=element("button"),T=element("span"),create_component(k.$$.fragment),w=space(),create_component(P.$$.fragment),attr(o,"class","w-6"),attr(s,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(s,"title",c=e[10].t("crud.table")),set_style(s,"display",((S=(p=e[0])==null?void 0:p.data)==null?void 0:S.profile)===!0?"none":null),attr(_,"class","p-0.5 w-8 text-right"),attr(_,"colspan","3"),attr(T,"class","w-6"),attr(j,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),j.disabled=z=!((L=e[7])!=null&&L.table_id),attr(N,"colspan",3),attr(N,"class","p-0.5 w-16 text-right"),set_style(g,"display",((x=(Y=e[0])==null?void 0:Y.data)==null?void 0:x.profile)===!0?"none":null),attr(l,"class","table table-zebra w-[98%] normal-case table-xs"),attr(t,"class","w-full overflow-x-auto")},m(p,S){insert(p,t,S),append(t,l),append(l,a),append(a,i);for(let L=0;L<A.length;L+=1)A[L]&&A[L].m(i,null);append(i,n),append(i,_),append(_,s),append(s,o),mount_component(r,o,null),append(l,f),append(l,u);for(let L=0;L<v.length;L+=1)v[L]&&v[L].m(u,null);append(l,b),append(l,g),append(g,E);for(let L=0;L<m.length;L+=1)m[L]&&m[L].m(E,null);append(E,D),append(E,N),append(N,j),append(j,T),mount_component(k,T,null),insert(p,w,S),mount_component(P,p,S),h=!0,F||(V=[listen(s,"click",J),listen(j,"click",$)],F=!0)},p(p,S){var Y,x,Q,ee,te,ae,le,ne,ie,_e,se;if(e=p,S[0]&1049866){I=ensure_array_like(Object.keys(e[8]));let C;for(C=0;C<I.length;C+=1){const Z=get_each_context_7(e,I,C);A[C]?A[C].p(Z,S):(A[C]=create_each_block_7(Z),A[C].c(),A[C].m(i,n))}for(;C<A.length;C+=1)A[C].d(1);A.length=I.length}if((!h||S[0]&1024&&c!==(c=e[10].t("crud.table")))&&attr(s,"title",c),S[0]&1&&set_style(s,"display",((x=(Y=e[0])==null?void 0:Y.data)==null?void 0:x.profile)===!0?"none":null),S[0]&460047){q=ensure_array_like((((ee=(Q=e[3])==null?void 0:Q[e[1]])==null?void 0:ee.data)||[]).filter(H).slice((e[69].offset||0)*(e[69].limit||10),(e[69].offset||0)*(e[69].limit||10)+(e[69].limit||10)));let C;for(C=0;C<q.length;C+=1){const Z=get_each_context_4(e,q,C);v[C]?(v[C].p(Z,S),transition_in(v[C],1)):(v[C]=create_each_block_4(Z),v[C].c(),transition_in(v[C],1),v[C].m(u,null))}for(group_outros(),C=q.length;C<v.length;C+=1)B(C);check_outros()}if(S[0]&16776){M=ensure_array_like(Object.keys(e[8]));let C;for(C=0;C<M.length;C+=1){const Z=get_each_context_2(e,M,C);m[C]?m[C].p(Z,S):(m[C]=create_each_block_2(Z),m[C].c(),m[C].m(E,D))}for(;C<m.length;C+=1)m[C].d(1);m.length=M.length}(!h||S[0]&392&&z!==(z=!((te=e[7])!=null&&te.table_id)))&&(j.disabled=z),S[0]&1&&set_style(g,"display",((le=(ae=e[0])==null?void 0:ae.data)==null?void 0:le.profile)===!0?"none":null);const L={};S[0]&2048&&(L.lang=(ne=e[11])==null?void 0:ne.lang),S[0]&2048&&(L.conf=(ie=e[11])==null?void 0:ie.conf),S[0]&8&&(L.rows_per_page=e[69].limit||10),S[0]&8&&(L.page=e[69].offset||0),S[0]&10&&(L.total_rows=(((se=(_e=e[3])==null?void 0:_e[e[1]])==null?void 0:se.data)||[]).filter(O).length),P.$set(L)},i(p){if(!h){transition_in(r.$$.fragment,p);for(let S=0;S<q.length;S+=1)transition_in(v[S]);transition_in(k.$$.fragment,p),transition_in(P.$$.fragment,p),h=!0}},o(p){transition_out(r.$$.fragment,p),v=v.filter(Boolean);for(let S=0;S<v.length;S+=1)transition_out(v[S]);transition_out(k.$$.fragment,p),transition_out(P.$$.fragment,p),h=!1},d(p){p&&(detach(t),detach(w)),destroy_each(A,p),destroy_component(r),destroy_each(v,p),destroy_each(m,p),destroy_component(k),destroy_component(P,p),F=!1,run_all(V)}}}function create_else_block_1(e){var a,i;let t=(((i=(a=e[8])==null?void 0:a[e[72]])==null?void 0:i.label)||e[10].t(`crud.${e[72]}`))+"",l;return{c(){l=text(t)},m(n,_){insert(n,l,_)},p(n,_){var s,o;_[0]&1280&&t!==(t=(((o=(s=n[8])==null?void 0:s[n[72]])==null?void 0:o.label)||n[10].t(`crud.${n[72]}`))+"")&&set_data(l,t)},d(n){n&&detach(l)}}}function create_if_block_12(e){var k,z;let t,l,a,i,n,_,s,o=(((z=(k=e[8])==null?void 0:k[e[72]])==null?void 0:z.label)||e[10].t(`crud.${e[72]}`))+"",r,c,f,u;function b(...w){return e[30](e[69],...w)}function g(...w){return e[31](e[69],...w)}function E(...w){return e[32](e[72],...w)}function D(...w){return e[33](e[69],...w)}function N(...w){return e[34](e[69],...w)}function j(...w){return e[35](e[72],...w)}function T(...w){return e[36](e[72],e[69],...w)}return{c(){var w,P,h,F,V,I,A,J;t=element("div"),l=element("label"),a=element("input"),s=element("span"),r=text(o),attr(a,"type","checkbox"),attr(a,"id",i=`${e[72]}-${e[69].menu_id}-${e[66].app_id}`),attr(a,"class","checkbox checkbox-sm mr-2"),a.checked=n=(((P=(w=e[3])==null?void 0:w[e[1]])==null?void 0:P.data)||[]).filter(b).length===(((F=(h=e[3])==null?void 0:h[e[1]])==null?void 0:F.data)||[]).filter(g).filter(E).length,a.indeterminate=_=(((I=(V=e[3])==null?void 0:V[e[1]])==null?void 0:I.data)||[]).filter(D).length!==(((J=(A=e[3])==null?void 0:A[e[1]])==null?void 0:J.data)||[]).filter(N).filter(j).length,attr(s,"class","label-text"),attr(l,"class","label cursor-pointer justify-start p-0"),attr(l,"for",c=`${e[72]}-${e[69].menu_id}-${e[66].app_id}`),attr(t,"class","form-control w-full max-w-xs m-auto p-0")},m(w,P){insert(w,t,P),append(t,l),append(l,a),append(l,s),append(s,r),f||(u=listen(a,"change",T),f=!0)},p(w,P){var h,F,V,I,A,J,H,q,v,B;e=w,P[0]&264&&i!==(i=`${e[72]}-${e[69].menu_id}-${e[66].app_id}`)&&attr(a,"id",i),P[0]&266&&n!==(n=(((F=(h=e[3])==null?void 0:h[e[1]])==null?void 0:F.data)||[]).filter(b).length===(((I=(V=e[3])==null?void 0:V[e[1]])==null?void 0:I.data)||[]).filter(g).filter(E).length)&&(a.checked=n),P[0]&266&&_!==(_=(((J=(A=e[3])==null?void 0:A[e[1]])==null?void 0:J.data)||[]).filter(D).length!==(((q=(H=e[3])==null?void 0:H[e[1]])==null?void 0:q.data)||[]).filter(N).filter(j).length)&&(a.indeterminate=_),P[0]&1280&&o!==(o=(((B=(v=e[8])==null?void 0:v[e[72]])==null?void 0:B.label)||e[10].t(`crud.${e[72]}`))+"")&&set_data(r,o),P[0]&264&&c!==(c=`${e[72]}-${e[69].menu_id}-${e[66].app_id}`)&&attr(l,"for",c)},d(w){w&&detach(t),f=!1,u()}}}function create_each_block_7(e){let t,l;function a(_,s){var o,r;return((r=(o=_[8])==null?void 0:o[_[72]])==null?void 0:r.type)==="boolean"?create_if_block_12:create_else_block_1}let i=a(e),n=i(e);return{c(){var _,s;t=element("th"),n.c(),attr(t,"class",l="normal-case "+(((s=(_=e[8])==null?void 0:_[e[72]])==null?void 0:s.width)||""))},m(_,s){insert(_,t,s),n.m(t,null)},p(_,s){var o,r;i===(i=a(_))&&n?n.p(_,s):(n.d(1),n=i(_),n&&(n.c(),n.m(t,null))),s[0]&256&&l!==(l="normal-case "+(((r=(o=_[8])==null?void 0:o[_[72]])==null?void 0:r.width)||""))&&attr(t,"class",l)},d(_){_&&detach(t),n.d()}}}function create_else_block(e){let t,l,a,i,n,_;function s(){e[42].call(l,e[72],e[78],e[79])}return{c(){var o,r,c,f;t=element("td"),l=element("input"),attr(l,"type","text"),attr(l,"class",a="input input-sm p-0 "+(((r=(o=e[8])==null?void 0:o[e[72]])==null?void 0:r.width)||"w-full")+" bg-transparent"),attr(t,"class",i=((f=(c=e[8])==null?void 0:c[e[72]])==null?void 0:f.width)||"")},m(o,r){insert(o,t,r),append(t,l),set_input_value(l,e[77][e[72]]),n||(_=listen(l,"input",s),n=!0)},p(o,r){var c,f,u,b;e=o,r[0]&256&&a!==(a="input input-sm p-0 "+(((f=(c=e[8])==null?void 0:c[e[72]])==null?void 0:f.width)||"w-full")+" bg-transparent")&&attr(l,"class",a),r[0]&266&&l.value!==e[77][e[72]]&&set_input_value(l,e[77][e[72]]),r[0]&256&&i!==(i=((b=(u=e[8])==null?void 0:u[e[72]])==null?void 0:b.width)||"")&&attr(t,"class",i)},d(o){o&&detach(t),n=!1,_()}}}function create_if_block_11(e){var c,f;let t,l,a,i,n,_,s=ensure_array_like(((f=(c=e[8])==null?void 0:c[e[72]])==null?void 0:f.options)||[]),o=[];for(let u=0;u<s.length;u+=1)o[u]=create_each_block_6(get_each_context_6(e,s,u));function r(){e[41].call(l,e[72],e[78],e[79])}return{c(){var u,b,g,E;t=element("td"),l=element("select");for(let D=0;D<o.length;D+=1)o[D].c();attr(l,"class",a="select select-sm p-0.5 "+(((b=(u=e[8])==null?void 0:u[e[72]])==null?void 0:b.width)||"w-full bg-transparent")),e[77][e[72]]===void 0&&add_render_callback(r),attr(t,"class",i="p-0 "+(((E=(g=e[8])==null?void 0:g[e[72]])==null?void 0:E.width)||""))},m(u,b){insert(u,t,b),append(t,l);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(l,null);select_option(l,e[77][e[72]],!0),n||(_=listen(l,"change",r),n=!0)},p(u,b){var g,E,D,N,j,T;if(e=u,b[0]&256){s=ensure_array_like(((E=(g=e[8])==null?void 0:g[e[72]])==null?void 0:E.options)||[]);let k;for(k=0;k<s.length;k+=1){const z=get_each_context_6(e,s,k);o[k]?o[k].p(z,b):(o[k]=create_each_block_6(z),o[k].c(),o[k].m(l,null))}for(;k<o.length;k+=1)o[k].d(1);o.length=s.length}b[0]&256&&a!==(a="select select-sm p-0.5 "+(((N=(D=e[8])==null?void 0:D[e[72]])==null?void 0:N.width)||"w-full bg-transparent"))&&attr(l,"class",a),b[0]&266&&select_option(l,e[77][e[72]]),b[0]&256&&i!==(i="p-0 "+(((T=(j=e[8])==null?void 0:j[e[72]])==null?void 0:T.width)||""))&&attr(t,"class",i)},d(u){u&&detach(t),destroy_each(o,u),n=!1,_()}}}function create_if_block_10(e){let t,l,a,i,n,_;function s(){e[40].call(l,e[72],e[78],e[79])}return{c(){var o,r,c,f;t=element("td"),l=element("textarea"),attr(l,"rows",1),attr(l,"class",a="textarea textarea-sm p-1 min-h-5 "+(((r=(o=e[8])==null?void 0:o[e[72]])==null?void 0:r.width)||"w-full bg-transparent")),attr(t,"class",i="p-0 "+(((f=(c=e[8])==null?void 0:c[e[72]])==null?void 0:f.width)||""))},m(o,r){insert(o,t,r),append(t,l),set_input_value(l,e[77][e[72]]),n||(_=listen(l,"input",s),n=!0)},p(o,r){var c,f,u,b;e=o,r[0]&256&&a!==(a="textarea textarea-sm p-1 min-h-5 "+(((f=(c=e[8])==null?void 0:c[e[72]])==null?void 0:f.width)||"w-full bg-transparent"))&&attr(l,"class",a),r[0]&266&&set_input_value(l,e[77][e[72]]),r[0]&256&&i!==(i="p-0 "+(((b=(u=e[8])==null?void 0:u[e[72]])==null?void 0:b.width)||""))&&attr(t,"class",i)},d(o){o&&detach(t),n=!1,_()}}}function create_if_block_9(e){let t,l,a,i,n;function _(){e[39].call(l,e[72],e[78],e[79])}return{c(){var s,o;t=element("td"),l=element("input"),attr(l,"type","checkbox"),attr(l,"class","checkbox checkbox-sm"),attr(t,"class",a="p-0.5 text-center "+(((o=(s=e[8])==null?void 0:s[e[72]])==null?void 0:o.width)||""))},m(s,o){insert(s,t,o),append(t,l),l.checked=e[77][e[72]],i||(n=listen(l,"change",_),i=!0)},p(s,o){var r,c;e=s,o[0]&266&&(l.checked=e[77][e[72]]),o[0]&256&&a!==(a="p-0.5 text-center "+(((c=(r=e[8])==null?void 0:r[e[72]])==null?void 0:c.width)||""))&&attr(t,"class",a)},d(s){s&&detach(t),i=!1,n()}}}function create_if_block_8(e){let t,l,a=string_ellipsis(e[77][e[72]],30)+"",i,n,_;return{c(){var s,o;t=element("td"),l=element("span"),i=text(a),attr(l,"title",n=string_ellipsis_title(e[77][e[72]],30)),attr(t,"class",_="normal-case "+(((o=(s=e[8])==null?void 0:s[e[72]])==null?void 0:o.width)||""))},m(s,o){insert(s,t,o),append(t,l),append(l,i)},p(s,o){var r,c;o[0]&266&&a!==(a=string_ellipsis(s[77][s[72]],30)+"")&&set_data(i,a),o[0]&266&&n!==(n=string_ellipsis_title(s[77][s[72]],30))&&attr(l,"title",n),o[0]&256&&_!==(_="normal-case "+(((c=(r=s[8])==null?void 0:r[s[72]])==null?void 0:c.width)||""))&&attr(t,"class",_)},d(s){s&&detach(t)}}}function create_each_block_6(e){let t,l=e[74].label+"",a,i;return{c(){t=element("option"),a=text(l),t.__value=i=e[74].value,set_input_value(t,t.__value)},m(n,_){insert(n,t,_),append(t,a)},p(n,_){_[0]&256&&l!==(l=n[74].label+"")&&set_data(a,l),_[0]&256&&i!==(i=n[74].value)&&(t.__value=i,set_input_value(t,t.__value))},d(n){n&&detach(t)}}}function create_each_block_5(e){let t;function l(n,_){var s,o,r,c,f,u,b,g;return((o=(s=n[8])==null?void 0:s[n[72]])==null?void 0:o.editable)!==!0?create_if_block_8:((c=(r=n[8])==null?void 0:r[n[72]])==null?void 0:c.type)==="boolean"?create_if_block_9:((u=(f=n[8])==null?void 0:f[n[72]])==null?void 0:u.type)==="text2"?create_if_block_10:((g=(b=n[8])==null?void 0:b[n[72]])==null?void 0:g.type)==="select"?create_if_block_11:create_else_block}let a=l(e),i=a(e);return{c(){i.c(),t=empty()},m(n,_){i.m(n,_),insert(n,t,_)},p(n,_){a===(a=l(n))&&i?i.p(n,_):(i.d(1),i=a(n),i&&(i.c(),i.m(t.parentNode,t)))},d(n){n&&detach(t),i.d(n)}}}function create_each_block_4(e){let t,l,a,i,n,_,s,o,r,c,f,u,b,g,E,D,N,j,T,k,z,w,P,h,F,V,I,A,J,H=ensure_array_like(Object.keys(e[8])),q=[];for(let $=0;$<H.length;$+=1)q[$]=create_each_block_5(get_each_context_5(e,H,$));_=new Icons({props:{type:"outline",icon:"pencil-alt",path:"icons"}});function v(){return e[43](e[77],e[66],e[69])}u=new Icons({props:{type:"outline",icon:"translate",path:"icons"}});function B(){return e[44](e[77],e[66],e[69])}j=new Icons({props:{type:"outline",icon:"trash",path:"icons"}});function M(){return e[45](e[77],e[78],e[79])}P=new Icons({props:{type:"outline",icon:"key",path:"icons"}});function m(){return e[46](e[77])}return{c(){var $,O,y,K,U,W,R,G,X;t=element("tr");for(let p=0;p<q.length;p+=1)q[p].c();l=space(),a=element("td"),i=element("button"),n=element("span"),create_component(_.$$.fragment),o=space(),r=element("td"),c=element("button"),f=element("span"),create_component(u.$$.fragment),g=space(),E=element("td"),D=element("button"),N=element("span"),create_component(j.$$.fragment),T=space(),k=element("td"),z=element("button"),w=element("span"),create_component(P.$$.fragment),V=space(),attr(n,"class","w-6"),attr(i,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(i,"title",s=e[10].t("crud.manage_table")),attr(a,"class","p-0.5 w-8 text-right"),set_style(a,"display",((O=($=e[0])==null?void 0:$.data)==null?void 0:O.profile)===!0?"none":null),attr(f,"class","w-6"),attr(c,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(c,"title",b=e[10].t("crud.translate_table")),attr(r,"class","p-0.5 w-8 text-right"),set_style(r,"display",((K=(y=e[0])==null?void 0:y.data)==null?void 0:K.profile)===!0?"none":null),attr(N,"class","w-6"),attr(D,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),attr(E,"class","p-0.5 w-8 text-right"),set_style(E,"display",((W=(U=e[0])==null?void 0:U.data)==null?void 0:W.profile)===!0?"none":null),attr(w,"class","w-6"),attr(z,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),z.disabled=h=!((R=e[77])!=null&&R.requires_rla)||!e[77].read,attr(k,"class","p-0.5 w-8 text-right"),attr(k,"title",F=e[10].t("crud.row_level_access")),set_style(k,"display",((X=(G=e[0])==null?void 0:G.data)==null?void 0:X.profile)===!0?null:"none"),set_style(t,"display",e[77].excluded?"None":null)},m($,O){insert($,t,O);for(let y=0;y<q.length;y+=1)q[y]&&q[y].m(t,null);append(t,l),append(t,a),append(a,i),append(i,n),mount_component(_,n,null),append(t,o),append(t,r),append(r,c),append(c,f),mount_component(u,f,null),append(t,g),append(t,E),append(E,D),append(D,N),mount_component(j,N,null),append(t,T),append(t,k),append(k,z),append(z,w),mount_component(P,w,null),append(t,V),I=!0,A||(J=[listen(i,"click",v),listen(c,"click",B),listen(D,"click",M),listen(z,"click",m)],A=!0)},p($,O){var y,K,U,W,R,G,X,p,S;if(e=$,O[0]&266){H=ensure_array_like(Object.keys(e[8]));let L;for(L=0;L<H.length;L+=1){const Y=get_each_context_5(e,H,L);q[L]?q[L].p(Y,O):(q[L]=create_each_block_5(Y),q[L].c(),q[L].m(t,l))}for(;L<q.length;L+=1)q[L].d(1);q.length=H.length}(!I||O[0]&1024&&s!==(s=e[10].t("crud.manage_table")))&&attr(i,"title",s),O[0]&1&&set_style(a,"display",((K=(y=e[0])==null?void 0:y.data)==null?void 0:K.profile)===!0?"none":null),(!I||O[0]&1024&&b!==(b=e[10].t("crud.translate_table")))&&attr(c,"title",b),O[0]&1&&set_style(r,"display",((W=(U=e[0])==null?void 0:U.data)==null?void 0:W.profile)===!0?"none":null),O[0]&1&&set_style(E,"display",((G=(R=e[0])==null?void 0:R.data)==null?void 0:G.profile)===!0?"none":null),(!I||O[0]&266&&h!==(h=!((X=e[77])!=null&&X.requires_rla)||!e[77].read))&&(z.disabled=h),(!I||O[0]&1024&&F!==(F=e[10].t("crud.row_level_access")))&&attr(k,"title",F),O[0]&1&&set_style(k,"display",((S=(p=e[0])==null?void 0:p.data)==null?void 0:S.profile)===!0?null:"none"),O[0]&10&&set_style(t,"display",e[77].excluded?"None":null)},i($){I||(transition_in(_.$$.fragment,$),transition_in(u.$$.fragment,$),transition_in(j.$$.fragment,$),transition_in(P.$$.fragment,$),I=!0)},o($){transition_out(_.$$.fragment,$),transition_out(u.$$.fragment,$),transition_out(j.$$.fragment,$),transition_out(P.$$.fragment,$),I=!1},d($){$&&detach(t),destroy_each(q,$),destroy_component(_),destroy_component(u),destroy_component(j),destroy_component(P),A=!1,run_all(J)}}}function create_if_block_7(e){var c,f;let t,l,a,i,n,_=ensure_array_like(((f=(c=e[8])==null?void 0:c[e[72]])==null?void 0:f.options({menu:e[69]}))||[]),s=[];for(let u=0;u<_.length;u+=1)s[u]=create_each_block_3(get_each_context_3(e,_,u));function o(){e[49].call(t,e[72])}function r(){return e[50](e[72],e[69],e[66])}return{c(){var u,b;t=element("select"),l=element("option");for(let g=0;g<s.length;g+=1)s[g].c();l.__value="",set_input_value(l,l.__value),attr(t,"class","select select-sm p-0.5 w-full bg-transparent"),t.disabled=a=e[14]((b=(u=e[8])==null?void 0:u[e[72]])==null?void 0:b.disabled,e[72]),e[7][e[72]]===void 0&&add_render_callback(o)},m(u,b){insert(u,t,b),append(t,l);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(t,null);select_option(t,e[7][e[72]],!0),i||(n=[listen(t,"change",o),listen(t,"change",r)],i=!0)},p(u,b){var g,E,D,N;if(e=u,b[0]&264){_=ensure_array_like(((E=(g=e[8])==null?void 0:g[e[72]])==null?void 0:E.options({menu:e[69]}))||[]);let j;for(j=0;j<_.length;j+=1){const T=get_each_context_3(e,_,j);s[j]?s[j].p(T,b):(s[j]=create_each_block_3(T),s[j].c(),s[j].m(t,null))}for(;j<s.length;j+=1)s[j].d(1);s.length=_.length}b[0]&256&&a!==(a=e[14]((N=(D=e[8])==null?void 0:D[e[72]])==null?void 0:N.disabled,e[72]))&&(t.disabled=a),b[0]&392&&select_option(t,e[7][e[72]])},d(u){u&&detach(t),destroy_each(s,u),i=!1,run_all(n)}}}function create_if_block_6(e){let t,l,a,i,n;function _(){e[48].call(t,e[72])}return{c(){var s,o,r,c;t=element("input"),attr(t,"type","text"),attr(t,"class",l="input input-sm "+(((o=(s=e[8])==null?void 0:s[e[72]])==null?void 0:o.width)||"w-full")+" bg-transparent"),t.disabled=a=e[14]((c=(r=e[8])==null?void 0:r[e[72]])==null?void 0:c.disabled,e[72])},m(s,o){insert(s,t,o),set_input_value(t,e[7][e[72]]),i||(n=listen(t,"input",_),i=!0)},p(s,o){var r,c,f,u;e=s,o[0]&256&&l!==(l="input input-sm "+(((c=(r=e[8])==null?void 0:r[e[72]])==null?void 0:c.width)||"w-full")+" bg-transparent")&&attr(t,"class",l),o[0]&256&&a!==(a=e[14]((u=(f=e[8])==null?void 0:f[e[72]])==null?void 0:u.disabled,e[72]))&&(t.disabled=a),o[0]&392&&t.value!==e[7][e[72]]&&set_input_value(t,e[7][e[72]])},d(s){s&&detach(t),i=!1,n()}}}function create_if_block_5(e){let t,l,a,i;function n(){e[47].call(t,e[72])}return{c(){var _,s;t=element("input"),attr(t,"type","checkbox"),attr(t,"class","checkbox checkbox-sm"),t.disabled=l=e[14]((s=(_=e[8])==null?void 0:_[e[72]])==null?void 0:s.disabled,e[72])},m(_,s){insert(_,t,s),t.checked=e[7][e[72]],a||(i=listen(t,"change",n),a=!0)},p(_,s){var o,r;e=_,s[0]&256&&l!==(l=e[14]((r=(o=e[8])==null?void 0:o[e[72]])==null?void 0:r.disabled,e[72]))&&(t.disabled=l),s[0]&392&&(t.checked=e[7][e[72]])},d(_){_&&detach(t),a=!1,i()}}}function create_each_block_3(e){let t,l=e[74].label+"",a,i;return{c(){t=element("option"),a=text(l),t.__value=i=e[74].value,set_input_value(t,t.__value)},m(n,_){insert(n,t,_),append(t,a)},p(n,_){_[0]&264&&l!==(l=n[74].label+"")&&set_data(a,l),_[0]&264&&i!==(i=n[74].value)&&(t.__value=i,set_input_value(t,t.__value))},d(n){n&&detach(t)}}}function create_each_block_2(e){let t,l,a,i,n;function _(r,c){var f,u,b,g,E,D;if(c[0]&256&&(l=null),c[0]&256&&(a=null),c[0]&256&&(i=null),l==null&&(l=!!["boolean"].includes((u=(f=r[8])==null?void 0:f[r[72]])==null?void 0:u.type)),l)return create_if_block_5;if(a==null&&(a=!!["string"].includes((g=(b=r[8])==null?void 0:b[r[72]])==null?void 0:g.type)),a)return create_if_block_6;if(i==null&&(i=!!["select"].includes((D=(E=r[8])==null?void 0:E[r[72]])==null?void 0:D.type)),i)return create_if_block_7}let s=_(e,[-1,-1,-1]),o=s&&s(e);return{c(){var r,c,f,u;t=element("td"),o&&o.c(),attr(t,"class",n=(((c=(r=e[8])==null?void 0:r[e[72]])==null?void 0:c.width)||"")+" "+(((u=(f=e[8])==null?void 0:f[e[72]])==null?void 0:u.type)==="boolean"?"text-center":""))},m(r,c){insert(r,t,c),o&&o.m(t,null)},p(r,c){var f,u,b,g;s===(s=_(r,c))&&o?o.p(r,c):(o&&o.d(1),o=s&&s(r),o&&(o.c(),o.m(t,null))),c[0]&256&&n!==(n=(((u=(f=r[8])==null?void 0:f[r[72]])==null?void 0:u.width)||"")+" "+(((g=(b=r[8])==null?void 0:b[r[72]])==null?void 0:g.type)==="boolean"?"text-center":""))&&attr(t,"class",n)},d(r){r&&detach(t),o&&o.d()}}}function create_each_block_1(e){var i;let t,l,a=(e[66].selected_menu?e[66].selected_menu===((i=e[69])==null?void 0:i.menu_id):e[71]===0)&&create_if_block_4(e);return{c(){a&&a.c(),t=empty()},m(n,_){a&&a.m(n,_),insert(n,t,_),l=!0},p(n,_){var s;(n[66].selected_menu?n[66].selected_menu===((s=n[69])==null?void 0:s.menu_id):n[71]===0)?a?(a.p(n,_),_[0]&8&&transition_in(a,1)):(a=create_if_block_4(n),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(n){l||(transition_in(a),l=!0)},o(n){transition_out(a),l=!1},d(n){n&&detach(t),a&&a.d(n)}}}function create_each_block(e){var i;let t,l,a=e[4]===((i=e[66])==null?void 0:i.app_id)&&create_if_block_3(e);return{c(){a&&a.c(),t=empty()},m(n,_){a&&a.m(n,_),insert(n,t,_),l=!0},p(n,_){var s;n[4]===((s=n[66])==null?void 0:s.app_id)?a?(a.p(n,_),_[0]&24&&transition_in(a,1)):(a=create_if_block_3(n),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(n){l||(transition_in(a),l=!0)},o(n){transition_out(a),l=!1},d(n){n&&detach(t),a&&a.d(n)}}}function create_if_block_2(e){let t,l;return t=new Loadingv2({props:{open:e[9]}}),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),l=!0},p(a,i){const n={};i[0]&512&&(n.open=a[9]),t.$set(n)},i(a){l||(transition_in(t.$$.fragment,a),l=!0)},o(a){transition_out(t.$$.fragment,a),l=!1},d(a){destroy_component(t,a)}}}function create_if_block_1(e){let t,l;return t=new Toast({props:{open:e[5].open,type:e[5].type,msg:e[5].msg,timer:2e4}}),t.$on("dismiss",e[54]),{c(){create_component(t.$$.fragment)},m(a,i){mount_component(t,a,i),l=!0},p(a,i){const n={};i[0]&32&&(n.open=a[5].open),i[0]&32&&(n.type=a[5].type),i[0]&32&&(n.msg=a[5].msg),t.$set(n)},i(a){l||(transition_in(t.$$.fragment,a),l=!0)},o(a){transition_out(t.$$.fragment,a),l=!1},d(a){destroy_component(t,a)}}}function create_if_block(e){let t,l;const a=[e[6]];let i={};for(let n=0;n<a.length;n+=1)i=assign(i,a[n]);return t=new Modal({props:i}),t.$on("dismiss",e[55]),{c(){create_component(t.$$.fragment)},m(n,_){mount_component(t,n,_),l=!0},p(n,_){const s=_[0]&64?get_spread_update(a,[get_spread_object(n[6])]):{};t.$set(s)},i(n){l||(transition_in(t.$$.fragment,n),l=!0)},o(n){transition_out(t.$$.fragment,n),l=!1},d(n){destroy_component(t,n)}}}function create_fragment(e){var J,H,q,v,B,M;let t,l,a,i,n,_,s,o=(((H=(J=e[0])==null?void 0:J.data)==null?void 0:H.profile)===!0?"":e[10].t("crud.add"))+"",r,c,f=e[10].t("crud.apps")+"",u,b,g,E,D,N,j,T,k,z=ensure_array_like(((v=(q=e[3])==null?void 0:q.app)==null?void 0:v.data)||[]),w=[];for(let m=0;m<z.length;m+=1)w[m]=create_each_block_9(get_each_context_9(e,z,m));_=new Icons({props:{type:"outline",icon:"plus",path:"icons"}});let P=ensure_array_like(((M=(B=e[3])==null?void 0:B.app)==null?void 0:M.data)||[]),h=[];for(let m=0;m<P.length;m+=1)h[m]=create_each_block(get_each_context(e,P,m));const F=m=>transition_out(h[m],1,1,()=>{h[m]=null});let V=e[9]&&create_if_block_2(e),I=e[5].open&&create_if_block_1(e),A=e[6].open&&create_if_block(e);return{c(){var m,$;t=element("div"),l=element("div");for(let O=0;O<w.length;O+=1)w[O].c();a=space(),i=element("a"),n=element("span"),create_component(_.$$.fragment),s=space(),r=text(o),c=space(),u=text(f),b=space();for(let O=0;O<h.length;O+=1)h[O].c();g=space(),V&&V.c(),E=space(),I&&I.c(),D=space(),A&&A.c(),N=empty(),attr(n,"class","w-4 h-4"),set_style(n,"display",(($=(m=e[0])==null?void 0:m.data)==null?void 0:$.profile)===!0?"none":null),attr(i,"class","tab tab-lifted text-md text-left justify-start grow"),attr(l,"class","tabs w-full"),attr(t,"class","--flex --flex-col")},m(m,$){insert(m,t,$),append(t,l);for(let O=0;O<w.length;O+=1)w[O]&&w[O].m(l,null);append(l,a),append(l,i),append(i,n),mount_component(_,n,null),append(i,s),append(i,r),append(i,c),append(i,u),append(t,b);for(let O=0;O<h.length;O+=1)h[O]&&h[O].m(t,null);insert(m,g,$),V&&V.m(m,$),insert(m,E,$),I&&I.m(m,$),insert(m,D,$),A&&A.m(m,$),insert(m,N,$),j=!0,T||(k=listen(i,"click",e[25]),T=!0)},p(m,$){var O,y,K,U,W,R,G,X;if($[0]&4120){z=ensure_array_like(((y=(O=m[3])==null?void 0:O.app)==null?void 0:y.data)||[]);let p;for(p=0;p<z.length;p+=1){const S=get_each_context_9(m,z,p);w[p]?w[p].p(S,$):(w[p]=create_each_block_9(S),w[p].c(),w[p].m(l,a))}for(;p<w.length;p+=1)w[p].d(1);w.length=z.length}if($[0]&1&&set_style(n,"display",((U=(K=m[0])==null?void 0:K.data)==null?void 0:U.profile)===!0?"none":null),(!j||$[0]&1025)&&o!==(o=(((R=(W=m[0])==null?void 0:W.data)==null?void 0:R.profile)===!0?"":m[10].t("crud.add"))+"")&&set_data(r,o),(!j||$[0]&1024)&&f!==(f=m[10].t("crud.apps")+"")&&set_data(u,f),$[0]&1568159){P=ensure_array_like(((X=(G=m[3])==null?void 0:G.app)==null?void 0:X.data)||[]);let p;for(p=0;p<P.length;p+=1){const S=get_each_context(m,P,p);h[p]?(h[p].p(S,$),transition_in(h[p],1)):(h[p]=create_each_block(S),h[p].c(),transition_in(h[p],1),h[p].m(t,null))}for(group_outros(),p=P.length;p<h.length;p+=1)F(p);check_outros()}m[9]?V?(V.p(m,$),$[0]&512&&transition_in(V,1)):(V=create_if_block_2(m),V.c(),transition_in(V,1),V.m(E.parentNode,E)):V&&(group_outros(),transition_out(V,1,1,()=>{V=null}),check_outros()),m[5].open?I?(I.p(m,$),$[0]&32&&transition_in(I,1)):(I=create_if_block_1(m),I.c(),transition_in(I,1),I.m(D.parentNode,D)):I&&(group_outros(),transition_out(I,1,1,()=>{I=null}),check_outros()),m[6].open?A?(A.p(m,$),$[0]&64&&transition_in(A,1)):(A=create_if_block(m),A.c(),transition_in(A,1),A.m(N.parentNode,N)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros())},i(m){if(!j){transition_in(_.$$.fragment,m);for(let $=0;$<P.length;$+=1)transition_in(h[$]);transition_in(V),transition_in(I),transition_in(A),j=!0}},o(m){transition_out(_.$$.fragment,m),h=h.filter(Boolean);for(let $=0;$<h.length;$+=1)transition_out(h[$]);transition_out(V),transition_out(I),transition_out(A),j=!1},d(m){m&&(detach(t),detach(g),detach(E),detach(D),detach(N)),destroy_each(w,m),destroy_component(_),destroy_each(h,m),V&&V.d(m),I&&I.d(m),A&&A.d(m),T=!1,k()}}}function instance($$self,$$props,$$invalidate){let $i18n,$_global;component_subscribe($$self,i18n,e=>$$invalidate(10,$i18n=e)),component_subscribe($$self,_global,e=>$$invalidate(11,$_global=e));let{table}=$$props,{data}=$$props,{option={}}=$$props,{action={}}=$$props;const tables=["app","menu","table","menu_table"];let profile_tables=["role_app","role_app_menu","role_app_menu_table"],_aux_table="menu_table",_aux_table_pk="menu_table_id",db_data={},tab="",toast={open:!1,msg:null,type:null},modal_data={open:!1,width:12,heigth:85,header:!0,title:"Dialog Title",header_actions:[],component:null},_menu_table={active:!0,requires_rla:!1};const get_table_options=e=>{var t,l;try{const a=(((t=db_data==null?void 0:db_data[_aux_table])==null?void 0:t.data)||[]).filter(i=>{var n;return i.menu_id===((n=e==null?void 0:e.menu)==null?void 0:n.menu_id)}).map(i=>i.table_id);return(((l=db_data==null?void 0:db_data.table)==null?void 0:l.data)||[]).filter(i=>a.indexOf(i.table_id)===-1).map(i=>(i.label=i.table,i.value=i.table,i))}catch{return[]}},_on_table_change=e=>{var t,l,a,i;try{const n=(t=db_data==null?void 0:db_data.table)==null?void 0:t.data.filter(_=>_.table===e.table);console.log(e,n),$$invalidate(7,_menu_table={..._menu_table,...n==null?void 0:n[0],table_table:(l=n==null?void 0:n[0])==null?void 0:l.table,table_table_desc:(a=n==null?void 0:n[0])==null?void 0:a.table_desc,table_db:(i=n==null?void 0:n[0])==null?void 0:i.db,menu_id:e.menu_id,app_id:e.app_id})}catch{}};let _menu_table_schema={table_id:{type:"string",width:"w-10",label:$i18n.t("crud.id"),editable:!1,disabled:"true"},table_table:{type:"select",width:"w-auto",label:$i18n.t("crud.table"),editable:!1,options:get_table_options,_on_change:_on_table_change},table_table_desc:{type:"string",width:"w-auto",label:$i18n.t("crud.label"),editable:!1,disabled:"true"},table_db:{type:"string",width:"w-40",label:$i18n.t("crud.db"),editable:!1,disabled:"true"},active:{type:"boolean",width:"w-10",label:$i18n.t("crud.active"),editable:!0},requires_rla:{type:"boolean",width:"w-20",label:$i18n.t("crud.row_level_access"),editable:!0}},loading=!1;const save=async e=>{var i,n,_,s;let t=((i=db_data==null?void 0:db_data[e.table||_aux_table])==null?void 0:i.data)||[];if(((n=option==null?void 0:option.data)==null?void 0:n.profile)===!0){const o=[];(_=db_data==null?void 0:db_data.menu)==null||_.data.forEach(u=>{var D;const b=lodashExports.cloneDeep(u),g=t.filter(N=>N.menu_id===u.menu_id&&N.app_id===u.app_id&&N.role_id===(data==null?void 0:data.role_id)&&N.read===!0),E=(((D=db_data==null?void 0:db_data.role_app_menu)==null?void 0:D.data)||[]).filter(N=>N.menu_id===u.menu_id&&N.app_id===u.app_id&&N.role_id===(data==null?void 0:data.role_id));o.push(lodashExports.cloneDeep({...E==null?void 0:E[0],...b,role_id:data==null?void 0:data.role_id,access:g.length>0,_table:"role_app_menu"}))});const r=(((s=db_data==null?void 0:db_data.role_app)==null?void 0:s.data)||[]).filter(u=>u.app_id===tab&&u.role_id===(data==null?void 0:data.role_id)),c=o.filter(u=>u.app_id===tab&&u.role_id===(data==null?void 0:data.role_id)&&u.access===!0);t=[{...r==null?void 0:r[0],app_id:tab,role_id:data==null?void 0:data.role_id,access:c.length>0,_table:"role_app"},...o,...t],console.log({aux_data:t})}$$invalidate(9,loading=!0);const l={lang:$_global==null?void 0:$_global.lang,conf:$_global==null?void 0:$_global.conf,token:$_global==null?void 0:$_global.token,app:$_global==null?void 0:$_global.selected_app,table:e.table||_aux_table,data:e.data||t};if(!l.data||!l.table)return $$invalidate(9,loading=!1),null;const a=await create_update(l);a.success===!0?($$invalidate(5,toast.open=!0,toast),$$invalidate(5,toast.type="success",toast),$$invalidate(5,toast.msg=a.msg,toast),get_data({})):($$invalidate(5,toast.open=!0,toast),$$invalidate(5,toast.type="error",toast),$$invalidate(5,toast.msg=a.msg,toast)),$$invalidate(9,loading=!1)},get_data=async e=>{var n,_,s,o,r,c,f,u,b,g,E,D,N,j;e.no_loding||$$invalidate(9,loading=!0);let t=null;const l=(((n=db_data==null?void 0:db_data.app)==null?void 0:n.data)||[]).filter(T=>T.app_id===tab);l.length>0&&(t=(_=l[0])==null?void 0:_.app_id);const a={lang:$_global==null?void 0:$_global.lang,conf:$_global==null?void 0:$_global.conf,token:$_global==null?void 0:$_global.token,app:$_global==null?void 0:$_global.selected_app,table:e.table||e.tables||tables,filters:[{field:"app_id",cond:"=",value:((s=e==null?void 0:e.app)==null?void 0:s.app_id)||t||(data==null?void 0:data.app_id)||((o=$_global==null?void 0:$_global.selected_app)==null?void 0:o.app_id)},{field:"db",cond:"=",value:((r=e==null?void 0:e.app)==null?void 0:r.db)||(data==null?void 0:data.db)||((c=$_global==null?void 0:$_global.selected_app)==null?void 0:c.db)}],ignore_filter:{app:["app_id","db"]},limit:-1,join:"none",join_overwrite:{menu_table:"all"}};((f=option==null?void 0:option.data)==null?void 0:f.profile)===!0&&!(e.table||e.tables)&&(a.table=[...a.table,...profile_tables],a.filters.push({field:"role_id",cond:"=",value:data==null?void 0:data.role_id})),await _get_tables({app:(e==null?void 0:e.app)||($_global==null?void 0:$_global.selected_app),table:"get_fake_tabble_to_trigger_schema_load"});const i=await read(a);console.log("data:",i),i.success===!0&&i.data?($$invalidate(3,db_data=i.data),((u=option==null?void 0:option.data)==null?void 0:u.profile)===!0&&($$invalidate(3,db_data[`aux_${_aux_table}`]=lodashExports.cloneDeep(db_data==null?void 0:db_data[`${_aux_table}`]),db_data),$$invalidate(3,db_data[`${_aux_table}`]=lodashExports.cloneDeep(db_data==null?void 0:db_data.menu_table),db_data),$$invalidate(3,db_data[`${_aux_table}`].data=db_data[`${_aux_table}`].data.map(T=>{var z;const k=(z=db_data[`aux_${_aux_table}`])==null?void 0:z.data.filter(w=>w.app_id===T.app_id&&w.menu_id===T.menu_id&&w.table_id===T.table_id&&w.role_id===(data==null?void 0:data.role_id));return k.length>0?{...k==null?void 0:k[0],...T,role_id:data==null?void 0:data.role_id,_table:_aux_table}:{...T,role_id:data==null?void 0:data.role_id,_table:_aux_table}}),db_data)),console.log(tab,(E=(g=(b=db_data==null?void 0:db_data.app)==null?void 0:b.data)==null?void 0:g[0])==null?void 0:E.app_id),tab||$$invalidate(4,tab=(j=(N=(D=db_data==null?void 0:db_data.app)==null?void 0:D.data)==null?void 0:N[0])==null?void 0:j.app_id)):($$invalidate(5,toast.open=!0,toast),$$invalidate(5,toast.type="error",toast),$$invalidate(5,toast.msg=i.msg,toast)),$$invalidate(9,loading=!1)},handle_pagination=e=>{var t,l,a,i,n,_,s,o,r,c;(t=e==null?void 0:e.data)!=null&&t.offset||(e.data.offset=0),(l=e==null?void 0:e.data)!=null&&l.limit||(e.data.limit=0),((a=e==null?void 0:e.detail)==null?void 0:a.type)==="next"?e.data.offset+=1:((i=e==null?void 0:e.detail)==null?void 0:i.type)==="back"?e.data.offset-=1:((n=e==null?void 0:e.detail)==null?void 0:n.type)==="first"?e.data.offset=0:((_=e==null?void 0:e.detail)==null?void 0:_.type)==="last"?e.data.offset=Math.ceil(((s=e==null?void 0:e.data)==null?void 0:s.limit)/((e==null?void 0:e.length)||((o=e==null?void 0:e.data)==null?void 0:o.limit))):((r=e==null?void 0:e.detail)==null?void 0:r.type)==="rows_per_page"&&(e.data.limit=(c=e==null?void 0:e.detail)==null?void 0:c.rows_per_page,e.data.offset=0),$$invalidate(3,db_data={...db_data})},get_eval=(payload,d,field)=>{try{return eval(payload)}catch(e){return console.log(payload,d,field,e.message),!1}},after_save_form=e=>{console.log("after_save_form".toUpperCase(),e),get_data({})},get_form=async e=>{var t,l,a,i,n,_,s,o;try{console.log({payload:e});const r=lodashExports.cloneDeep(e.data||{});e.clone===!0&&(delete r[(l=(t=$_global==null?void 0:$_global.tables)==null?void 0:t[e.table])==null?void 0:l.pk],r.clone=!0);let c=`${$i18n.t("crud.add")} - ${(i=(a=$_global==null?void 0:$_global.tables)==null?void 0:a[e.table])==null?void 0:i.comment}`;r!=null&&r[(_=(n=$_global==null?void 0:$_global.tables)==null?void 0:n[table])==null?void 0:_.pk]&&(c=`${$i18n.t("crud.edit")} - ${(o=(s=$_global==null?void 0:$_global.tables)==null?void 0:s[e.table])==null?void 0:o.comment}`),$$invalidate(9,loading=!0);const f=(await __vitePreload(()=>import("./GlobalForm-5a83ce41.js"),["assets/GlobalForm-5a83ce41.js","assets/index-13d4ac78.js","assets/index-1fc5bb3b.css","assets/pt-607305e9.js","assets/ObjectEditor-dc630b79.js"])).default;$$invalidate(6,modal_data.actions=null,modal_data),$$invalidate(6,modal_data.component=f,modal_data),$$invalidate(6,modal_data.msg=null,modal_data),$$invalidate(6,modal_data.html_msg=null,modal_data),$$invalidate(6,modal_data.header_actions=[{type:"icon",icon:"cog-8-tooth",name:"form_customization",label:$i18n.t("crud.form_customization")},{type:"icon",icon:"save",name:"save",label:$i18n.t("crud.save"),action:after_save_form}],modal_data),$$invalidate(6,modal_data.title=c,modal_data),$$invalidate(6,modal_data.data={table:(e==null?void 0:e.table)||table,data:r,aux_data:lodashExports.cloneDeep(e==null?void 0:e.aux_data),main_table:e==null?void 0:e.main_table},modal_data),$$invalidate(6,modal_data.heigth=null,modal_data),$$invalidate(6,modal_data.open=!0,modal_data),$$invalidate(9,loading=!1)}catch(r){$$invalidate(9,loading=!1),console.log(r.message),$$invalidate(5,toast.open=!0,toast),$$invalidate(5,toast.type="error",toast),$$invalidate(5,toast.msg=r.message,toast)}},manage_table=async e=>{try{const t=lodashExports.cloneDeep(e.data||{});let l=`${$i18n.t("crud.manage")} ${$i18n.t("crud.table")}`;$$invalidate(9,loading=!0);const a=(await __vitePreload(()=>import("./ManageDBTable-fb6bb260.js"),["assets/ManageDBTable-fb6bb260.js","assets/index-13d4ac78.js","assets/index-1fc5bb3b.css","assets/pt-607305e9.js","assets/Pagination-a0736574.js"])).default;$$invalidate(6,modal_data.actions=null,modal_data),$$invalidate(6,modal_data.component=a,modal_data),$$invalidate(6,modal_data.msg=null,modal_data),$$invalidate(6,modal_data.html_msg=null,modal_data),$$invalidate(6,modal_data.header_actions=[{type:"icon",icon:"save",name:"SAVE",label:$i18n.t("crud.save"),action:after_save_form}],modal_data),$$invalidate(6,modal_data.actions=[],modal_data),$$invalidate(6,modal_data.title=l,modal_data),$$invalidate(6,modal_data.data=e,modal_data),$$invalidate(6,modal_data.width=12,modal_data),$$invalidate(6,modal_data.heigth=null,modal_data),$$invalidate(6,modal_data.open=!0,modal_data),$$invalidate(9,loading=!1)}catch(t){$$invalidate(9,loading=!1),console.log(t.message),$$invalidate(5,toast.open=!0,toast),$$invalidate(5,toast.type="error",toast),$$invalidate(5,toast.msg=t.message,toast)}},translate_table=async e=>{try{const t=lodashExports.cloneDeep(e.data||{});let l=`${$i18n.t("crud.translate")} ${$i18n.t("crud.table")}`;$$invalidate(9,loading=!0);const a=(await __vitePreload(()=>import("./TranslateDBTable-eef4bf54.js"),["assets/TranslateDBTable-eef4bf54.js","assets/index-13d4ac78.js","assets/index-1fc5bb3b.css","assets/pt-607305e9.js","assets/Pagination-a0736574.js"])).default;$$invalidate(6,modal_data.actions=null,modal_data),$$invalidate(6,modal_data.component=a,modal_data),$$invalidate(6,modal_data.msg=null,modal_data),$$invalidate(6,modal_data.html_msg=null,modal_data),$$invalidate(6,modal_data.header_actions=[],modal_data),$$invalidate(6,modal_data.actions=[{type:"btn",icon:"refresh",name:"REFRESH",class:"btn-sm text-info",label:$i18n.t("crud.refresh")},{type:"btn",icon:"save",name:"SAVE",label:$i18n.t("crud.save"),class:"btn-sm text-success",action:after_save_form}],modal_data),$$invalidate(6,modal_data.title=l,modal_data),$$invalidate(6,modal_data.data=e,modal_data),$$invalidate(6,modal_data.width=8,modal_data),$$invalidate(6,modal_data.heigth=null,modal_data),$$invalidate(6,modal_data.open=!0,modal_data),$$invalidate(9,loading=!1)}catch(t){$$invalidate(9,loading=!1),console.log(t.message),$$invalidate(5,toast.open=!0,toast),$$invalidate(5,toast.type="error",toast),$$invalidate(5,toast.msg=t.message,toast)}},row_level_access=async e=>{try{console.log(e);let t=`${$i18n.t("crud.row_level_access")} - ${data==null?void 0:data.role}/${e.table}`;$$invalidate(9,loading=!0);const l=(await __vitePreload(()=>import("./RowLevelAccess-316a30d8.js"),["assets/RowLevelAccess-316a30d8.js","assets/index-13d4ac78.js","assets/index-1fc5bb3b.css","assets/pt-607305e9.js","assets/Pagination-a0736574.js"])).default;$$invalidate(6,modal_data.actions=null,modal_data),$$invalidate(6,modal_data.component=l,modal_data),$$invalidate(6,modal_data.msg=null,modal_data),$$invalidate(6,modal_data.html_msg=null,modal_data),$$invalidate(6,modal_data.header_actions=[],modal_data),$$invalidate(6,modal_data.actions=[{type:"btn",icon:"refresh",name:"REFRESH",class:"btn-sm text-info",label:$i18n.t("crud.refresh")},{type:"btn",icon:"save",name:"SAVE",label:$i18n.t("crud.save"),class:"btn-sm text-success"}],modal_data),$$invalidate(6,modal_data.title=t,modal_data),$$invalidate(6,modal_data.data=lodashExports.cloneDeep(e),modal_data),$$invalidate(6,modal_data.width=8,modal_data),$$invalidate(6,modal_data.heigth=null,modal_data),$$invalidate(6,modal_data.open=!0,modal_data),$$invalidate(9,loading=!1)}catch(t){$$invalidate(9,loading=!1),console.log(t.message),$$invalidate(5,toast.open=!0,toast),$$invalidate(5,toast.type="error",toast),$$invalidate(5,toast.msg=t.message,toast)}},dismiss_modal=e=>{$$invalidate(6,modal_data.open=!1,modal_data)},_check_all=(e,t,l)=>{var i;const a=(i=db_data==null?void 0:db_data[_aux_table])==null?void 0:i.data.map(n=>(n.menu_id===l.menu_id&&(n[t]=e.target.checked),n));$$invalidate(3,db_data={...db_data,[_aux_table]:{...db_data==null?void 0:db_data[_aux_table],data:a}})},_get_tables=async e=>{var t;console.log(e.app),$$invalidate(9,loading=!0);try{const l={lang:$_global==null?void 0:$_global.lang,conf:$_global==null?void 0:$_global.conf,token:$_global==null?void 0:$_global.token,app:e.app,table:e.table,data:e.app,database:(data==null?void 0:data.db)||((t=e==null?void 0:e.app)==null?void 0:t.db)},a=await get_tables(l);if($$invalidate(9,loading=!1),a.success===!0&&a.data)return a.data;console.log(a)}catch(l){console.log(l.message),$$invalidate(5,toast.open=!0,toast),$$invalidate(5,toast.type="error",toast),$$invalidate(5,toast.msg=l.message,toast)}$$invalidate(9,loading=!1)};onMount(async()=>{var e;$i18n.changeLanguage($_global==null?void 0:$_global.lang);try{hooks.locale($_global==null?void 0:$_global.lang)}catch{hooks.locale("en-us")}console.log("Admin Apps Mount:",{table,data,option}),$$invalidate(4,tab=data==null?void 0:data.app_id),((e=option==null?void 0:option.data)==null?void 0:e.profile)===!0?($$invalidate(1,_aux_table="role_app_menu_table"),$$invalidate(2,_aux_table_pk="role_app_menu_table_id"),$$invalidate(7,_menu_table={create:!1,read:!1,update:!1,delete:!1,share:!1}),$$invalidate(8,_menu_table_schema={table_id:{type:"string",width:"w-10",label:$i18n.t("crud.id"),editable:!1,disabled:"true"},table_table:{type:"select",width:"w-auto",label:$i18n.t("crud.table"),editable:!1,options:get_table_options,_on_change:_on_table_change},table_table_desc:{type:"string",width:"w-auto",label:$i18n.t("crud.label"),editable:!1,disabled:"true"},table_db:{type:"string",width:"w-40",label:$i18n.t("crud.db"),editable:!1,disabled:"true"},create:{type:"boolean",width:"w-10",label:$i18n.t("crud.create"),editable:!0},read:{type:"boolean",width:"w-10",label:$i18n.t("crud.read"),editable:!0},update:{type:"boolean",width:"w-10",label:$i18n.t("crud.update"),editable:!0},delete:{type:"boolean",width:"w-10",label:$i18n.t("crud.delete"),editable:!0},share:{type:"boolean",width:"w-10",label:$i18n.t("crud.share"),editable:!0}})):profile_tables=[],(async()=>await get_data({app:data}))()});const click_handler=e=>{$$invalidate(4,tab=e==null?void 0:e.app_id),get_data({app:e})},click_handler_1=()=>get_form({table:"app"}),func=(e,t)=>t.app_id===e.app_id,click_handler_2=(e,t,l,a)=>{$$invalidate(3,l[a].selected_menu=t==null?void 0:t.menu_id,db_data)},click_handler_3=e=>get_form({table:"menu",main_table:"app",aux_data:e}),func_1=(e,t)=>t.app_id===e.app_id,func_2=(e,t)=>t.menu_id===e.menu_id,func_3=(e,t)=>t.menu_id===e.menu_id,func_4=(e,t)=>t[e]===!0,func_5=(e,t)=>t.menu_id===e.menu_id,func_6=(e,t)=>t.menu_id===e.menu_id,func_7=(e,t)=>t[e]===!0,change_handler=(e,t,l)=>_check_all(l,e,t),click_handler_4=(e,t)=>{var l;return manage_table({data:{app:e,menu:t,tables:(l=db_data==null?void 0:db_data.table)==null?void 0:l.data}})},func_8=(e,t)=>t.menu_id===e.menu_id;function input_change_handler(e,t,l){t[l][e]=this.checked,$$invalidate(3,db_data),$$invalidate(1,_aux_table),$$invalidate(8,_menu_table_schema)}function textarea_input_handler(e,t,l){t[l][e]=this.value,$$invalidate(3,db_data),$$invalidate(1,_aux_table),$$invalidate(8,_menu_table_schema)}function select_change_handler(e,t,l){t[l][e]=select_value(this),$$invalidate(3,db_data),$$invalidate(1,_aux_table),$$invalidate(8,_menu_table_schema)}function input_input_handler(e,t,l){t[l][e]=this.value,$$invalidate(3,db_data),$$invalidate(1,_aux_table),$$invalidate(8,_menu_table_schema)}const click_handler_5=(e,t,l)=>{var a;return manage_table({table:e.table_table,data:{app:t,menu:l,data:e,tables:(a=db_data==null?void 0:db_data.table)==null?void 0:a.data}})},click_handler_6=(e,t,l)=>{var a;return translate_table({table:e.table_table,data:{app:t,menu:l,data:e,tables:(a=db_data==null?void 0:db_data.table)==null?void 0:a.data}})},click_handler_7=(e,t,l)=>{try{e[_aux_table_pk]?($$invalidate(3,t[l].excluded=!0,db_data,$$invalidate(1,_aux_table)),$$invalidate(3,db_data[_aux_table].data=[...db_data[_aux_table].data],db_data)):(db_data[_aux_table].data.splice(l,1),$$invalidate(3,db_data[_aux_table].data=[...db_data[_aux_table].data],db_data))}catch{}},click_handler_8=e=>row_level_access({table:(e==null?void 0:e.table_table)||(e==null?void 0:e.table),data:e});function input_change_handler_1(e){_menu_table[e]=this.checked,$$invalidate(7,_menu_table),$$invalidate(8,_menu_table_schema),$$invalidate(3,db_data)}function input_input_handler_1(e){_menu_table[e]=this.value,$$invalidate(7,_menu_table),$$invalidate(8,_menu_table_schema),$$invalidate(3,db_data)}function select_change_handler_1(e){_menu_table[e]=select_value(this),$$invalidate(7,_menu_table),$$invalidate(8,_menu_table_schema),$$invalidate(3,db_data)}const change_handler_1=(e,t,l)=>{var a,i;(a=_menu_table_schema==null?void 0:_menu_table_schema[e])!=null&&a._on_change&&((i=_menu_table_schema==null?void 0:_menu_table_schema[e])==null||i._on_change({table:_menu_table[e],menu_id:t.menu_id,app_id:l.app_id}))},click_handler_9=(e,t)=>{var l;try{!(_menu_table!=null&&_menu_table.table_id)||!(_menu_table!=null&&_menu_table.menu_id)||($$invalidate(3,db_data[_aux_table].data=[...db_data[_aux_table].data,Object.assign({},_menu_table)],db_data),handle_pagination({detail:{type:"last"},data:e,_index:t,length:(((l=db_data==null?void 0:db_data[_aux_table])==null?void 0:l.data)||[]).filter(a=>a.menu_id===e.menu_id).length}))}catch(a){console.log("err adding table:",a.message)}},func_9=(e,t)=>t.menu_id===e.menu_id,pageChange_handler=(e,t,l)=>{var a;return handle_pagination({detail:l.detail,data:e,_index:t,length:(((a=db_data==null?void 0:db_data[_aux_table])==null?void 0:a.data)||[]).filter(i=>i.menu_id===e.menu_id).length})},dismiss_handler=e=>{$$invalidate(5,toast.open=!1,toast)},dismiss_handler_1=e=>dismiss_modal(e.detail);return $$self.$$set=e=>{"table"in e&&$$invalidate(21,table=e.table),"data"in e&&$$invalidate(22,data=e.data),"option"in e&&$$invalidate(0,option=e.option),"action"in e&&$$invalidate(23,action=e.action)},$$self.$$.update=()=>{$$self.$$.dirty[0]&2097152&&console.log({table}),$$self.$$.dirty[0]&8388608&&((action==null?void 0:action.name)=="CANCEL"&&(action==null||action.action()),(action==null?void 0:action.name)=="SAVE"&&(console.log(action),save({})),(action==null?void 0:action.name)=="REFRESH"&&(console.log(action),get_data({})))},[option,_aux_table,_aux_table_pk,db_data,tab,toast,modal_data,_menu_table,_menu_table_schema,loading,$i18n,$_global,get_data,handle_pagination,get_eval,get_form,manage_table,translate_table,row_level_access,dismiss_modal,_check_all,table,data,action,click_handler,click_handler_1,func,click_handler_2,click_handler_3,func_1,func_2,func_3,func_4,func_5,func_6,func_7,change_handler,click_handler_4,func_8,input_change_handler,textarea_input_handler,select_change_handler,input_input_handler,click_handler_5,click_handler_6,click_handler_7,click_handler_8,input_change_handler_1,input_input_handler_1,select_change_handler_1,change_handler_1,click_handler_9,func_9,pageChange_handler,dismiss_handler,dismiss_handler_1]}class AdminApps extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{table:21,data:22,option:0,action:23},null,[-1,-1,-1])}}export{AdminApps as default};
