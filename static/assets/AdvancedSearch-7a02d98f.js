import{S as ve,i as we,s as Oe,v as B,I as pe,e as v,a as D,c as me,w as $,b as w,d as I,f as j,m as ke,l as R,g as M,h as ye,k as je,j as J,o as L,x as X,p as ge,q as le,_ as Ee,r as Ne,u as Ie,F as te,t as Q,n as V,$ as Le,a0 as Se,a1 as ne,C as W,D as Te}from"./index-8239faad.js";import"./pt-4424e41e.js";function se(n,e,s){const t=n.slice();return t[20]=e[s],t[21]=e,t[22]=s,t}function ce(n,e,s){const t=n.slice();return t[23]=e[s],t}function ie(n,e,s){const t=n.slice();return t[23]=e[s],t}function re(n,e,s){const t=n.slice();return t[28]=e[s],t[29]=e,t[30]=s,t}function ue(n,e,s){const t=n.slice();return t[20]=e[s],t[31]=e,t[22]=s,t}function oe(n,e,s){const t=n.slice();return t[20]=e[s],t}function ae(n){let e,s=n[3].t(`crud.${n[20]}`)+"",t,i;return{c(){var c,l;e=v("th"),t=Q(s),w(e,"class",i="normal-case "+(((l=(c=n[2])==null?void 0:c[n[20]])==null?void 0:l.width)||""))},m(c,l){I(c,e,l),j(e,t)},p(c,l){var u,a;l[0]&12&&s!==(s=c[3].t(`crud.${c[20]}`)+"")&&V(t,s),l[0]&4&&i!==(i="normal-case "+(((a=(u=c[2])==null?void 0:u[c[20]])==null?void 0:a.width)||""))&&w(e,"class",i)},d(c){c&&L(e)}}}function qe(n){let e,s,t;function i(u,a){var h,r;return a[0]&4&&(s=null),s==null&&(s=!!["boolean"].includes((r=(h=u[2])==null?void 0:h[u[20]])==null?void 0:r.type)),s?Be:Ae}let c=i(n,[-1,-1]),l=c(n);return{c(){var u,a;e=v("td"),l.c(),w(e,"class",t="normal-case "+(((a=(u=n[2])==null?void 0:u[n[20]])==null?void 0:a.width)||""))},m(u,a){I(u,e,a),l.m(e,null)},p(u,a){var h,r;c===(c=i(u,a))&&l?l.p(u,a):(l.d(1),l=c(u),l&&(l.c(),l.m(e,null))),a[0]&4&&t!==(t="normal-case "+(((r=(h=u[2])==null?void 0:h[u[20]])==null?void 0:r.width)||""))&&w(e,"class",t)},d(u){u&&L(e),l.d()}}}function Ce(n){let e,s=n[28][n[20]]+"",t,i;return{c(){var c,l;e=v("th"),t=Q(s),w(e,"class",i="normal-case "+(((l=(c=n[2])==null?void 0:c[n[20]])==null?void 0:l.width)||""))},m(c,l){I(c,e,l),j(e,t)},p(c,l){var u,a;l[0]&5&&s!==(s=c[28][c[20]]+"")&&V(t,s),l[0]&4&&i!==(i="normal-case "+(((a=(u=c[2])==null?void 0:u[c[20]])==null?void 0:a.width)||""))&&w(e,"class",i)},d(c){c&&L(e)}}}function Ae(n){let e=(n[28][n[20]]?n[28][n[20]]:"")+"",s;return{c(){s=Q(e)},m(t,i){I(t,s,i)},p(t,i){i[0]&5&&e!==(e=(t[28][t[20]]?t[28][t[20]]:"")+"")&&V(s,e)},d(t){t&&L(s)}}}function Be(n){let e,s,t;function i(){n[6].call(e,n[20],n[29],n[30])}return{c(){e=v("input"),w(e,"type","checkbox"),w(e,"class","checkbox checkbox-sm")},m(c,l){I(c,e,l),e.checked=n[28][n[20]],s||(t=R(e,"change",i),s=!0)},p(c,l){n=c,l[0]&5&&(e.checked=n[28][n[20]])},d(c){c&&L(e),s=!1,t()}}}function fe(n){let e;function s(c,l){return c[22]===0?Ce:qe}let i=s(n)(n);return{c(){i.c(),e=$()},m(c,l){i.m(c,l),I(c,e,l)},p(c,l){i.p(c,l)},d(c){c&&L(e),i.d(c)}}}function _e(n){let e,s,t,i,c,l,u,a,h,r,p=B(Object.keys(n[2])),d=[];for(let m=0;m<p.length;m+=1)d[m]=fe(ue(n,p,m));l=new pe({props:{type:"outline",icon:"trash",path:"icons"}});function b(){return n[7](n[30])}return{c(){e=v("tr");for(let m=0;m<d.length;m+=1)d[m].c();s=D(),t=v("td"),i=v("button"),c=v("span"),me(l.$$.fragment),u=D(),w(c,"class","w-6"),w(i,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),w(t,"class","p-0.5 w-16 text-right")},m(m,q){I(m,e,q);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(e,null);j(e,s),j(e,t),j(t,i),j(i,c),ke(l,c,null),j(e,u),a=!0,h||(r=R(i,"click",b),h=!0)},p(m,q){if(n=m,q[0]&5){p=B(Object.keys(n[2]));let k;for(k=0;k<p.length;k+=1){const C=ue(n,p,k);d[k]?d[k].p(C,q):(d[k]=fe(C),d[k].c(),d[k].m(e,s))}for(;k<d.length;k+=1)d[k].d(1);d.length=p.length}},i(m){a||(M(l.$$.fragment,m),a=!0)},o(m){J(l.$$.fragment,m),a=!1},d(m){m&&L(e),X(d,m),ge(l),h=!1,r()}}}function Ue(n){let e,s,t;function i(a,h){var r,p;return(p=(r=a[2])==null?void 0:r[a[20]])!=null&&p.func?We:Re}let c=i(n),l=c(n);function u(){n[12].call(e,n[20])}return{c(){e=v("select"),l.c(),w(e,"class","select select-sm p-0.5 w-full"),n[1][n[20]]===void 0&&Se(u)},m(a,h){I(a,e,h),l.m(e,null),ne(e,n[1][n[20]],!0),s||(t=R(e,"change",u),s=!0)},p(a,h){n=a,c===(c=i(n))&&l?l.p(n,h):(l.d(1),l=c(n),l&&(l.c(),l.m(e,null))),h[0]&6&&ne(e,n[1][n[20]])},d(a){a&&L(e),l.d(),s=!1,t()}}}function Fe(n){let e,s,t;function i(){n[11].call(e,n[20])}return{c(){e=v("textarea"),w(e,"rows",1),w(e,"class","textarea textarea-sm p-1 min-h-5 w-full")},m(c,l){I(c,e,l),W(e,n[1][n[20]]),s||(t=R(e,"input",i),s=!0)},p(c,l){n=c,l[0]&6&&W(e,n[1][n[20]])},d(c){c&&L(e),s=!1,t()}}}function Ke(n){let e,s,t;function i(){n[10].call(e,n[20])}return{c(){e=v("input"),w(e,"type","text"),w(e,"class","input input-sm w-full")},m(c,l){I(c,e,l),W(e,n[1][n[20]]),s||(t=R(e,"input",i),s=!0)},p(c,l){n=c,l[0]&6&&e.value!==n[1][n[20]]&&W(e,n[1][n[20]])},d(c){c&&L(e),s=!1,t()}}}function Pe(n){let e,s,t;function i(){n[8].call(e,n[20])}function c(...l){return n[9](n[20],...l)}return{c(){e=v("input"),w(e,"type","checkbox"),w(e,"class","checkbox checkbox-sm")},m(l,u){I(l,e,u),e.checked=n[1][n[20]],s||(t=[R(e,"change",i),R(e,"change",c)],s=!0)},p(l,u){n=l,u[0]&6&&(e.checked=n[1][n[20]])},d(l){l&&L(e),s=!1,Te(t)}}}function Re(n){var i,c;let e,s=B(((c=(i=n[2])==null?void 0:i[n[20]])==null?void 0:c.options)||[]),t=[];for(let l=0;l<s.length;l+=1)t[l]=he(ce(n,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=$()},m(l,u){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,u);I(l,e,u)},p(l,u){var a,h;if(u[0]&4){s=B(((h=(a=l[2])==null?void 0:a[l[20]])==null?void 0:h.options)||[]);let r;for(r=0;r<s.length;r+=1){const p=ce(l,s,r);t[r]?t[r].p(p,u):(t[r]=he(p),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},d(l){l&&L(e),X(t,l)}}}function We(n){var i,c;let e,s=B(((c=(i=n[2])==null?void 0:i[n[20]])==null?void 0:c.options())||[]),t=[];for(let l=0;l<s.length;l+=1)t[l]=de(ie(n,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=$()},m(l,u){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,u);I(l,e,u)},p(l,u){var a,h;if(u[0]&4){s=B(((h=(a=l[2])==null?void 0:a[l[20]])==null?void 0:h.options())||[]);let r;for(r=0;r<s.length;r+=1){const p=ie(l,s,r);t[r]?t[r].p(p,u):(t[r]=de(p),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},d(l){l&&L(e),X(t,l)}}}function he(n){let e,s=n[23].label+"",t,i;return{c(){e=v("option"),t=Q(s),e.__value=i=n[23].value,W(e,e.__value)},m(c,l){I(c,e,l),j(e,t)},p(c,l){l[0]&4&&s!==(s=c[23].label+"")&&V(t,s),l[0]&4&&i!==(i=c[23].value)&&(e.__value=i,W(e,e.__value))},d(c){c&&L(e)}}}function de(n){let e,s=n[23].label+"",t,i;return{c(){e=v("option"),t=Q(s),e.__value=i=n[23].value,W(e,e.__value)},m(c,l){I(c,e,l),j(e,t)},p(c,l){l[0]&4&&s!==(s=c[23].label+"")&&V(t,s),l[0]&4&&i!==(i=c[23].value)&&(e.__value=i,W(e,e.__value))},d(c){c&&L(e)}}}function be(n){let e,s,t,i,c,l;function u(r,p){var d,b,m,q,k,C,U,K;if(p[0]&4&&(s=null),p[0]&4&&(t=null),p[0]&4&&(i=null),p[0]&4&&(c=null),s==null&&(s=!!["boolean"].includes((b=(d=r[2])==null?void 0:d[r[20]])==null?void 0:b.type)),s)return Pe;if(t==null&&(t=!!["string"].includes((q=(m=r[2])==null?void 0:m[r[20]])==null?void 0:q.type)),t)return Ke;if(i==null&&(i=!!["text"].includes((C=(k=r[2])==null?void 0:k[r[20]])==null?void 0:C.type)),i)return Fe;if(c==null&&(c=!!["select"].includes((K=(U=r[2])==null?void 0:U[r[20]])==null?void 0:K.type)),c)return Ue}let a=u(n,[-1,-1]),h=a&&a(n);return{c(){var r,p;e=v("td"),h&&h.c(),w(e,"class",l=((p=(r=n[2])==null?void 0:r[n[20]])==null?void 0:p.width)||"")},m(r,p){I(r,e,p),h&&h.m(e,null)},p(r,p){var d,b;a===(a=u(r,p))&&h?h.p(r,p):(h&&h.d(1),h=a&&a(r),h&&(h.c(),h.m(e,null))),p[0]&4&&l!==(l=((b=(d=r[2])==null?void 0:d[r[20]])==null?void 0:b.width)||"")&&w(e,"class",l)},d(r){r&&L(e),h&&h.d()}}}function ze(n){let e,s,t,i,c,l,u,a,h,r,p,d,b,m,q,k,C,U,K,Y,G,H,_,S=B(Object.keys(n[2])),y=[];for(let f=0;f<S.length;f+=1)y[f]=ae(oe(n,S,f));let T=B(n[0]||[]),g=[];for(let f=0;f<T.length;f+=1)g[f]=_e(re(n,T,f));const z=f=>J(g[f],1,1,()=>{g[f]=null});let A=B(Object.keys(n[2])),E=[];for(let f=0;f<A.length;f+=1)E[f]=be(se(n,A,f));U=new pe({props:{type:"outline",icon:"plus",path:"icons"}});let P=De;return{c(){e=v("div"),s=v("div"),t=v("div"),i=v("table"),c=v("thead"),l=v("tr");for(let f=0;f<y.length;f+=1)y[f].c();u=D(),a=v("th"),h=D(),r=v("tbody");for(let f=0;f<g.length;f+=1)g[f].c();p=D(),d=v("tfoot"),b=v("tr");for(let f=0;f<E.length;f+=1)E[f].c();m=D(),q=v("td"),k=v("button"),C=v("span"),me(U.$$.fragment),K=D(),Y=$(),w(a,"class","p-0.5 w-16"),w(C,"class","w-6"),w(k,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),w(q,"class","p-0.5 w-16 text-right"),w(i,"class","table table-zebra w-full normal-case table-xs"),w(t,"class","overflow-x-auto"),w(s,"class","grow w-full"),w(e,"class","flex flex-col")},m(f,O){I(f,e,O),j(e,s),j(s,t),j(t,i),j(i,c),j(c,l);for(let o=0;o<y.length;o+=1)y[o]&&y[o].m(l,null);j(l,u),j(l,a),j(i,h),j(i,r);for(let o=0;o<g.length;o+=1)g[o]&&g[o].m(r,null);j(i,p),j(i,d),j(d,b);for(let o=0;o<E.length;o+=1)E[o]&&E[o].m(b,null);j(b,m),j(b,q),j(q,k),j(k,C),ke(U,C,null),I(f,K,O),I(f,Y,O),G=!0,H||(_=R(k,"click",n[13]),H=!0)},p(f,O){if(O[0]&12){S=B(Object.keys(f[2]));let o;for(o=0;o<S.length;o+=1){const N=oe(f,S,o);y[o]?y[o].p(N,O):(y[o]=ae(N),y[o].c(),y[o].m(l,u))}for(;o<y.length;o+=1)y[o].d(1);y.length=S.length}if(O[0]&5){T=B(f[0]||[]);let o;for(o=0;o<T.length;o+=1){const N=re(f,T,o);g[o]?(g[o].p(N,O),M(g[o],1)):(g[o]=_e(N),g[o].c(),M(g[o],1),g[o].m(r,null))}for(ye(),o=T.length;o<g.length;o+=1)z(o);je()}if(O[0]&6){A=B(Object.keys(f[2]));let o;for(o=0;o<A.length;o+=1){const N=se(f,A,o);E[o]?E[o].p(N,O):(E[o]=be(N),E[o].c(),E[o].m(b,m))}for(;o<E.length;o+=1)E[o].d(1);E.length=A.length}},i(f){if(!G){for(let O=0;O<T.length;O+=1)M(g[O]);M(U.$$.fragment,f),M(P),G=!0}},o(f){g=g.filter(Boolean);for(let O=0;O<g.length;O+=1)J(g[O]);J(U.$$.fragment,f),J(P),G=!1},d(f){f&&(L(e),L(K),L(Y)),X(y,f),X(g,f),X(E,f),ge(U),H=!1,_()}}}let De=!1;function Ge(n,e,s){let t,i;le(n,Ee,_=>s(15,t=_)),le(n,Ne,_=>s(3,i=_));let{table:c}=e,{action:l={}}=e,{advanced_search:u=[]}=e,a=[],h=[{value:"=",label:i.t("crud.eq")},{value:">",label:i.t("crud.gt")},{value:"<",label:i.t("crud.lt")},{value:"<=",label:i.t("crud.lt_eq")},{value:">=",label:i.t("crud.gt_eq")},{value:"IN",label:i.t("crud.in")},{value:"NOT IN",label:i.t("crud.not_in")},{value:"LIKE",label:i.t("crud.like")},{value:"NOT LIKE",label:i.t("crud.not_like")},{value:"BETWEEN",label:i.t("crud.between")},{value:"NOT BETWEEN",label:i.t("crud.not_between")},{value:"IS NULL",label:i.t("crud.is_null")},{value:"IS NOT NULL",label:i.t("crud.is_not_null")},{value:"IS TRUE",label:i.t("crud.is_true")},{value:"IS FALSE",label:i.t("crud.is_false")},{value:"REGEX",label:i.t("crud.regex")}],r=[],d={field:{type:"select",width:"min-w-40",func:!0,options:()=>r.map(_=>({value:_.name,label:_.comment}))},cond:{type:"select",width:"min-w-40",options:h},value:{type:"string",width:"min-w-60"},deactivate:{type:"boolean"}},b={};const m=_=>{var y,T,g,z,A,E,P,f,O,o,N,Z,x,ee;const S=[];for(const F in _)if(Object.hasOwnProperty.call(_,F)){if(_[F].pk2)continue;_[F].fk?S.push(Object.assign(_[F],{name:(T=(y=_[F])==null?void 0:y.ref)==null?void 0:T.referred_columns_desc,referred_table:(z=(g=_[F])==null?void 0:g.ref)==null?void 0:z.referred_table,comment:(Z=(N=(f=(P=t==null?void 0:t.tables)==null?void 0:P[(E=(A=_[F])==null?void 0:A.ref)==null?void 0:E.referred_table])==null?void 0:f.fields)==null?void 0:N[(o=(O=_[F])==null?void 0:O.ref)==null?void 0:o.referred_columns_desc])==null?void 0:Z.comment,referred_column:(ee=(x=_[F])==null?void 0:x.ref)==null?void 0:ee.referred_column})):S.push(_[F])}return S};Ie(()=>{var _,S,y,T,g,z,A,E,P,f;i.changeLanguage(t==null?void 0:t.lang),console.log((_=t==null?void 0:t.tables)==null?void 0:_[c]);try{te.locale(t==null?void 0:t.lang)}catch{te.locale("en-us")}r=m(((y=(S=t==null?void 0:t.tables)==null?void 0:S[c])==null?void 0:y.fields)||{});for(const O in t==null?void 0:t.tables)for(const o in(g=(T=t==null?void 0:t.tables)==null?void 0:T[O])==null?void 0:g.fields)if(Object.hasOwnProperty.call((A=(z=t==null?void 0:t.tables)==null?void 0:z[O])==null?void 0:A.fields,o)){const N=(P=(E=t==null?void 0:t.tables)==null?void 0:E[O])==null?void 0:P.fields[o];if(N.fk&&((f=N==null?void 0:N.ref)==null?void 0:f.referred_table)===c){const Z=Object.assign(N,{table:O});a.push(Object.assign(Z,N==null?void 0:N.ref))}}});function q(_,S,y){S[y][_]=this.checked,s(0,u),s(5,l),s(1,b)}const k=_=>{try{u.splice(_,1),s(0,u=[...u])}catch{}};function C(_){b[_]=this.checked,s(1,b),s(2,d)}const U=(_,S)=>{var y;try{s(2,d={...d,[_]:{...d[_],disabled:(y=d==null?void 0:d[_])==null?void 0:y.disabled}})}catch(T){console.log(T.message)}};function K(_){b[_]=this.value,s(1,b),s(2,d)}function Y(_){b[_]=this.value,s(1,b),s(2,d)}function G(_){b[_]=Le(this),s(1,b),s(2,d)}const H=()=>{try{!b.field||!b.value||s(0,u=[...u,Object.assign({},b)])}catch{}};return n.$$set=_=>{"table"in _&&s(4,c=_.table),"action"in _&&s(5,l=_.action),"advanced_search"in _&&s(0,u=_.advanced_search)},n.$$.update=()=>{n.$$.dirty[0]&35&&((l==null?void 0:l.name)=="CANCEL"&&(console.log(l),l==null||l.action()),(l==null?void 0:l.name)=="YES"&&(console.log(l),(u==null?void 0:u.length)===0&&(b!=null&&b.filed)&&(b!=null&&b.value)&&s(0,u=[...u,Object.assign({},b)]),l==null||l.action({data:u})))},[u,b,d,i,c,l,q,k,C,U,K,Y,G,H]}class Ye extends ve{constructor(e){super(),we(this,e,Ge,ze,Oe,{table:4,action:5,advanced_search:0},null,[-1,-1])}}export{Ye as default};
