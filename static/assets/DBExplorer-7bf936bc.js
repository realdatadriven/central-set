import{S as Hl,i as Wl,s as Pl,I as Be,v as fe,e as d,a as H,c as ae,t as Ne,w as Jt,b as c,B as ve,a0 as Ml,d as M,f as _,m as oe,C as Ee,a1 as el,l as W,G as zl,h as nt,j as B,k as pt,g as I,n as ze,o as z,p as ie,x as _t,D as Bt,q as ll,_ as Jl,r as Kl,a4 as sl,u as Gl,F as Rt,y as Pt,z as Pe,A as Je,U as Re,L as Ql,T as Vl,H as Xl,M as Yl,J as Zl,K as $l,W as ql,a5 as nl,P as yl,a6 as es,N as ts,$ as pl,O as ls}from"./index-8239faad.js";import"./pt-4424e41e.js";import{P as Fl}from"./Pagination-0cc50f26.js";function rl(t,s,l){const n=t.slice();return n[107]=s[l],n[115]=s,n[109]=l,n}function hl(t,s,l){const n=t.slice();return n[110]=s[l],n[116]=s,n[112]=l,n}function al(t,s,l){const n=t.slice();return n[117]=s[l],n}function ol(t,s,l){const n=t.slice();return n[110]=s[l],n[114]=l,n}function il(t,s,l){const n=t.slice();return n[107]=s[l],n[109]=l,n}function cl(t,s,l){const n=t.slice();return n[110]=s[l],n[112]=l,n}function fl(t,s,l){const n=t.slice();return n[110]=s[l],n[114]=l,n}function ul(t,s,l){const n=t.slice();return n[121]=s[l],n[122]=s,n[123]=l,n}function bl(t,s,l){const n=t.slice();return n[124]=s[l],n}function _l(t,s,l){const n=t.slice();return n[127]=s[l],n[123]=l,n}function ml(t,s,l){const n=t.slice();return n[129]=s[l],n[123]=l,n}function dl(t,s,l){const n=t.slice();return n[127]=s[l],n[123]=l,n}function ss(t){var Y;let s,l,n,a,p,h,b,i,m,u,E,v,g;a=new Be({props:{type:"outline",icon:"chevron-left",path:"icons"}});let L=fe((Y=t[8])==null?void 0:Y.tables),e=[];for(let D=0;D<L.length;D+=1)e[D]=gl(dl(t,L,D));return u=new Be({props:{type:"outline",icon:"chevron-right",path:"icons"}}),{c(){var D,Z,R,se;s=d("div"),l=d("div"),n=d("span"),ae(a.$$.fragment),p=H(),h=d("div");for(let N=0;N<e.length;N+=1)e[N].c();b=H(),i=d("div"),m=d("span"),ae(u.$$.fragment),c(n,"class","h-5 w-full"),c(l,"class","w-5 min-w-5 flex cursor-pointer hover:bg-slate-300 hover:rounded-md text-center"),ve(l,"display",((Z=(D=t[8])==null?void 0:D.tables)==null?void 0:Z.length)>0&&t[25](`${t[19]}-selected`,"width",t[8])?null:"none"),c(h,"id",t[19]+"-selected"),c(h,"class","flex-grow flex overflow-hidden pt-0.5 pb-0.5 align-middle"),c(m,"class","h-5 w-full"),c(i,"class","w-5 flex cursor-pointer hover:bg-slate-300 hover:rounded-md text-center"),ve(i,"display",((se=(R=t[8])==null?void 0:R.tables)==null?void 0:se.length)>0&&t[25](`${t[19]}-selected`,"width",t[8])?null:"none"),c(s,"class","w-full border-r-slate-200 flex flex-row")},m(D,Z){M(D,s,Z),_(s,l),_(l,n),oe(a,n,null),_(s,p),_(s,h);for(let R=0;R<e.length;R+=1)e[R]&&e[R].m(h,null);_(s,b),_(s,i),_(i,m),oe(u,m,null),E=!0,v||(g=[W(l,"click",t[29]),W(i,"click",t[28])],v=!0)},p(D,Z){var R,se,N,X,J;if(Z[0]&256&&ve(l,"display",((se=(R=D[8])==null?void 0:R.tables)==null?void 0:se.length)>0&&D[25](`${D[19]}-selected`,"width",D[8])?null:"none"),Z[0]&524608|Z[1]&2){L=fe((N=D[8])==null?void 0:N.tables);let O;for(O=0;O<L.length;O+=1){const G=dl(D,L,O);e[O]?e[O].p(G,Z):(e[O]=gl(G),e[O].c(),e[O].m(h,null))}for(;O<e.length;O+=1)e[O].d(1);e.length=L.length}Z[0]&256&&ve(i,"display",((J=(X=D[8])==null?void 0:X.tables)==null?void 0:J.length)>0&&D[25](`${D[19]}-selected`,"width",D[8])?null:"none")},i(D){E||(I(a.$$.fragment,D),I(u.$$.fragment,D),E=!0)},o(D){B(a.$$.fragment,D),B(u.$$.fragment,D),E=!1},d(D){D&&z(s),ie(a),_t(e,D),ie(u),v=!1,Bt(g)}}}function ns(t){let s,l=`${t[17].t("crud.drag")} ${t[17].t("crud.table")} ${t[17].t("crud.here")}!`,n;return{c(){s=d("div"),n=Ne(l),c(s,"class","border-dashed border-2 border-r-slate-400 text-center p-1 m-1 hover:border-none")},m(a,p){M(a,s,p),_(s,n)},p(a,p){p[0]&131072&&l!==(l=`${a[17].t("crud.drag")} ${a[17].t("crud.table")} ${a[17].t("crud.here")}!`)&&ze(n,l)},i:Re,o:Re,d(a){a&&z(s)}}}function gl(t){let s,l=Pe(t[127],20)+"",n,a,p,h,b,i,m;function u(){return t[51](t[127])}function E(...v){return t[52](t[127],...v)}return{c(){var v;s=d("div"),n=Ne(l),a=H(),c(s,"id",p=t[19]+"-selected-"+t[127]),c(s,"title",h=Je(t[127],20)),c(s,"class",b="mr-1 p-1 rounded-md border-dotted border-2 "+(((v=t[8])==null?void 0:v.selecetd_table)===t[127]?"bg-slate-200":"")+" border-slate-300 text-center cursor-pointer hover:bg-slate-200"),c(s,"draggable",!0)},m(v,g){M(v,s,g),_(s,n),_(s,a),i||(m=[W(s,"click",u),W(s,"dragstart",E)],i=!0)},p(v,g){var L;t=v,g[0]&256&&l!==(l=Pe(t[127],20)+"")&&ze(n,l),g[0]&262400&&p!==(p=t[19]+"-selected-"+t[127])&&c(s,"id",p),g[0]&262400&&h!==(h=Je(t[127],20))&&c(s,"title",h),g[0]&262400&&b!==(b="mr-1 p-1 rounded-md border-dotted border-2 "+(((L=t[8])==null?void 0:L.selecetd_table)===t[127]?"bg-slate-200":"")+" border-slate-300 text-center cursor-pointer hover:bg-slate-200")&&c(s,"class",b)},d(v){v&&z(s),i=!1,Bt(m)}}}function xl(t){let s,l,n,a,p,h,b,i,m,u;return a=new Be({props:{type:"outline",icon:"search",path:"icons"}}),{c(){s=d("div"),l=d("button"),n=d("span"),ae(a.$$.fragment),p=H(),h=d("input"),c(n,"class","w-5 h-5"),c(l,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(h,"type","text"),c(h,"placeholder",b=`${t[17].t("crud.filter")} ${t[17].t("crud.field")}`),c(h,"class","grow input pl-8 input-bordered w-full input-sm"),c(h,"autocomplete","off"),c(h,"autocorrect","off"),c(s,"class","w-full flex border-b border-b-slate-200 p-1")},m(E,v){M(E,s,v),_(s,l),_(l,n),oe(a,n,null),_(s,p),_(s,h),Ee(h,t[12]),i=!0,m||(u=W(h,"input",t[55]),m=!0)},p(E,v){(!i||v[0]&131072&&b!==(b=`${E[17].t("crud.filter")} ${E[17].t("crud.field")}`))&&c(h,"placeholder",b),v[0]&4096&&h.value!==E[12]&&Ee(h,E[12])},i(E){i||(I(a.$$.fragment,E),i=!0)},o(E){B(a.$$.fragment,E),i=!1},d(E){E&&z(s),ie(a),m=!1,u()}}}function wl(t){let s,l,n,a,p;return{c(){var h;s=d("div"),l=Ne("*"),c(s,"id",n=t[19]+"-"+((h=t[8])==null?void 0:h.selecetd_table)+"-*"),c(s,"class","w-full mt-1 mr-1 p-1 rounded-md border-dotted border-2 border-slate-300 text-center cursor-move hover:bg-slate-200"),c(s,"draggable",!0)},m(h,b){M(h,s,b),_(s,l),a||(p=W(s,"dragstart",t[56]),a=!0)},p(h,b){var i;b[0]&262400&&n!==(n=h[19]+"-"+((i=h[8])==null?void 0:i.selecetd_table)+"-*")&&c(s,"id",n)},d(h){h&&z(s),a=!1,p()}}}function kl(t){let s,l=Pe(t[129],20)+"",n,a,p,h,b,i;function m(...u){return t[58](t[129],...u)}return{c(){var u;s=d("div"),n=Ne(l),a=H(),c(s,"id",p=t[19]+"-"+((u=t[8])==null?void 0:u.selecetd_table)+"-"+t[129]),c(s,"title",h=Je(t[129],20)),c(s,"class","w-full mt-1 mr-1 p-1 rounded-md border-dotted border-2 border-slate-300 text-center cursor-move hover:bg-slate-200"),c(s,"draggable",!0)},m(u,E){M(u,s,E),_(s,n),_(s,a),b||(i=W(s,"dragstart",m),b=!0)},p(u,E){var v;t=u,E[0]&4416&&l!==(l=Pe(t[129],20)+"")&&ze(n,l),E[0]&266560&&p!==(p=t[19]+"-"+((v=t[8])==null?void 0:v.selecetd_table)+"-"+t[129])&&c(s,"id",p),E[0]&266560&&h!==(h=Je(t[129],20))&&c(s,"title",h)},d(u){u&&z(s),b=!1,i()}}}function vl(t){let s,l=Pe(t[127],20)+"",n,a,p,h,b,i;function m(...u){return t[60](t[127],...u)}return{c(){s=d("div"),n=Ne(l),a=H(),c(s,"id",p=t[127]),c(s,"title",h=Je(t[127],20)),c(s,"class","mr-1 p-1 rounded-md border-dotted border-2 border-slate-300 text-center cursor-move hover:bg-slate-200"),c(s,"draggable",!0)},m(u,E){M(u,s,E),_(s,n),_(s,a),b||(i=W(s,"dragstart",m),b=!0)},p(u,E){t=u,E[0]&2240&&l!==(l=Pe(t[127],20)+"")&&ze(n,l),E[0]&264384&&p!==(p=t[127])&&c(s,"id",p),E[0]&264384&&h!==(h=Je(t[127],20))&&c(s,"title",h)},d(u){u&&z(s),b=!1,i()}}}function El(t){let s,l=t[124]+"",n,a;return{c(){s=d("option"),n=Ne(l),s.__value=a=t[124],Ee(s,s.__value)},m(p,h){M(p,s,h),_(s,n)},p(p,h){h[0]&32768&&l!==(l=p[124]+"")&&ze(n,l),h[0]&32768&&a!==(a=p[124])&&(s.__value=a,Ee(s,s.__value))},d(p){p&&z(s)}}}function Nl(t){let s,l,n,a,p,h;return n=new Be({props:{type:"outline",icon:"arrow-uturn-left",path:"icons"}}),{c(){s=d("button"),l=d("span"),ae(n.$$.fragment),c(l,"class","w-6"),c(s,"class","btn btn-square btn-ghost btn-sm text-xs mr-2")},m(b,i){M(b,s,i),_(s,l),oe(n,l,null),a=!0,p||(h=W(s,"click",t[66]),p=!0)},p:Re,i(b){a||(I(n.$$.fragment,b),a=!0)},o(b){B(n.$$.fragment,b),a=!1},d(b){b&&z(s),ie(n),p=!1,h()}}}function Tl(t){let s,l,n,a,p,h;return n=new Be({props:{type:"outline",icon:"save",path:"icons"}}),{c(){s=d("button"),l=d("span"),ae(n.$$.fragment),c(l,"class","w-6"),c(s,"class","btn btn-square btn-ghost btn-sm text-xs mr-2")},m(b,i){M(b,s,i),_(s,l),oe(n,l,null),a=!0,p||(h=W(s,"click",t[67]),p=!0)},p:Re,i(b){a||(I(n.$$.fragment,b),a=!0)},o(b){B(n.$$.fragment,b),a=!1},d(b){b&&z(s),ie(n),p=!1,h()}}}function ps(t){var n,a,p;let s=Pe(((p=(a=(n=t[8])==null?void 0:n.tabs)==null?void 0:a[t[121]])==null?void 0:p.label)||t[121],20)+"",l;return{c(){l=Ne(s)},m(h,b){M(h,l,b)},p(h,b){var i,m,u;b[0]&256&&s!==(s=Pe(((u=(m=(i=h[8])==null?void 0:i.tabs)==null?void 0:m[h[121]])==null?void 0:u.label)||h[121],20)+"")&&ze(l,s)},d(h){h&&z(l)}}}function rs(t){let s,l,n;function a(){t[68].call(s,t[121])}return{c(){s=d("input"),c(s,"type","text"),c(s,"class","input input-xs p-0 w-auto")},m(p,h){M(p,s,h),Ee(s,t[8].tabs[t[121]].label),l||(n=W(s,"input",a),l=!0)},p(p,h){t=p,h[0]&262400&&s.value!==t[8].tabs[t[121]].label&&Ee(s,t[8].tabs[t[121]].label)},d(p){p&&z(s),l=!1,n()}}}function hs(t){let s,l,n,a,p;l=new Be({props:{type:"outline",icon:"x-mark",path:"icons"}});function h(){return t[69](t[121])}return{c(){s=d("span"),ae(l.$$.fragment),c(s,"class","ml-2 w-4 font-bold cursor-pointer -mr-2")},m(b,i){M(b,s,i),oe(l,s,null),n=!0,a||(p=W(s,"click",h),a=!0)},p(b,i){t=b},i(b){n||(I(l.$$.fragment,b),n=!0)},o(b){B(l.$$.fragment,b),n=!1},d(b){b&&z(s),ie(l),a=!1,p()}}}function Ol(t){let s,l,n,a,p,h,b,i,m,u;function E(Y,D){var Z,R,se;return(se=(R=(Z=Y[8])==null?void 0:Z.tabs)==null?void 0:R[Y[121]])!=null&&se.edit?rs:ps}let v=E(t),g=v(t),L=t[123]>0&&hs(t);function e(){return t[70](t[121])}return{c(){s=d("a"),l=d("div"),n=d("b"),g.c(),p=H(),L&&L.c(),b=H(),c(n,"title",a=Je(t[121],20)),c(l,"class","flex-grow"),c(s,"class",h="tab tab-lifted flex flex-row text-md "+(t[8].selected_tab===t[121]?"tab-active active":""))},m(Y,D){M(Y,s,D),_(s,l),_(l,n),g.m(n,null),_(s,p),L&&L.m(s,null),M(Y,b,D),i=!0,m||(u=[W(s,"click",zl(e)),W(s,"dblclick",t[41])],m=!0)},p(Y,D){t=Y,v===(v=E(t))&&g?g.p(t,D):(g.d(1),g=v(t),g&&(g.c(),g.m(n,null))),(!i||D[0]&262400&&a!==(a=Je(t[121],20)))&&c(n,"title",a),t[123]>0&&L.p(t,D),(!i||D[0]&262400&&h!==(h="tab tab-lifted flex flex-row text-md "+(t[8].selected_tab===t[121]?"tab-active active":"")))&&c(s,"class",h)},i(Y){i||(I(L),i=!0)},o(Y){B(L),i=!1},d(Y){Y&&(z(s),z(b)),g.d(),L&&L.d(),m=!1,Bt(u)}}}function as(t){let s,l,n=`${t[17].t("crud.drag")} ${t[17].t("crud.field")}s ${t[17].t("crud.here")}!`,a;return{c(){s=d("div"),l=d("p"),a=Ne(n),c(s,"class","border-dashed h-64 border-2 border-r-slate-400 text-center align-middle p-1 m-1 hover:border-4"),ve(s,"vertical-align","middle")},m(p,h){M(p,s,h),_(s,l),_(l,a)},p(p,h){h[0]&131072&&n!==(n=`${p[17].t("crud.drag")} ${p[17].t("crud.field")}s ${p[17].t("crud.here")}!`)&&ze(a,n)},i:Re,o:Re,d(p){p&&z(s)}}}function os(t){var mt,ct,S,P,be,Ze,_e,ft,Oe,Tt,st,ut,bt,dt;let s,l,n,a,p,h,b,i,m,u,E,v,g,L,e,Y,D,Z,R,se,N,X,J,O,G,q,K,Fe,we,Xe,ke=t[17].t("crud.use")+"",A,Q,ee,Te,Ke,Ue,He,Me,Ge,te,Qe,V,pe,ue,lt,rt;const et=[fs,cs],Ye=[];function We(j,y){var ge,me,de,xe;return(xe=(de=(ge=j[8])==null?void 0:ge.tabs)==null?void 0:de[(me=j[8])==null?void 0:me.selected_tab])!=null&&xe.show?0:1}return l=We(t),n=Ye[l]=et[l](t),u=new Be({props:{type:"outline",icon:"search",path:"icons"}}),Z=new Be({props:{type:"outline",icon:"play",path:"icons"}}),O=new Be({props:{type:"outline",icon:"code",path:"icons"}}),Ge=new Be({props:{type:"outline",icon:"save",path:"icons"}}),pe=new Fl({props:{lang:(mt=t[16])==null?void 0:mt.lang,conf:(ct=t[16])==null?void 0:ct.conf,rows_per_page:((Ze=(be=(S=t[8])==null?void 0:S.tabs)==null?void 0:be[(P=t[8])==null?void 0:P.selected_tab])==null?void 0:Ze.limit)||10,page:((Tt=(Oe=(_e=t[8])==null?void 0:_e.tabs)==null?void 0:Oe[(ft=t[8])==null?void 0:ft.selected_tab])==null?void 0:Tt.offset)||0,total_rows:(((dt=(bt=(st=t[8])==null?void 0:st.tabs)==null?void 0:bt[(ut=t[8])==null?void 0:ut.selected_tab])==null?void 0:dt.fields)||[]).length}}),pe.$on("pageChange",t[92]),{c(){var j,y,ge,me;s=d("div"),n.c(),a=H(),p=d("div"),h=d("div"),b=d("div"),i=d("button"),m=d("span"),ae(u.$$.fragment),E=H(),v=d("input"),L=H(),e=d("div"),Y=d("button"),D=d("span"),ae(Z.$$.fragment),se=H(),N=d("div"),X=d("button"),J=d("span"),ae(O.$$.fragment),q=H(),K=d("div"),Fe=d("label"),we=d("span"),Xe=d("b"),A=Ne(ke),Q=Ne(":"),ee=H(),Te=d("input"),Ke=H(),Ue=d("div"),He=d("button"),Me=d("span"),ae(Ge.$$.fragment),Qe=H(),V=d("div"),ae(pe.$$.fragment),c(s,"class","w-full overflow-x-auto text-center"),c(m,"class","w-5 h-5"),c(i,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(v,"type","text"),c(v,"placeholder",g=`${t[17].t("crud.filter")} ${t[17].t("crud.query")} ${t[17].t("crud.field")}`),c(v,"class","grow input pl-8 input-bordered w-full input-sm"),c(v,"autocomplete","off"),c(v,"autocorrect","off"),c(b,"class","grow flex max-w-xs mr-2"),c(D,"class","w-6"),c(Y,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(e,"class","tooltip tooltip-right"),c(e,"data-tip",R=t[17].t("crud.execute")),c(J,"class","w-6"),c(X,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(N,"class","tooltip tooltip-right"),c(N,"data-tip",G=t[17].t("crud.code")),c(we,"class","label-text"),c(Te,"type","checkbox"),c(Te,"class","toggle toggle-sm ml-2"),c(Fe,"class","label cursor-pointer justify-start"),c(K,"class","form-control mr-2"),c(Me,"class","w-6"),c(He,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(Ue,"class","tooltip tooltip-right"),c(Ue,"data-tip",te=t[17].t("crud.save")),c(h,"class","flex-grow flex flex-row align-middle p-2"),ve(h,"display",(((me=(ge=(j=t[8])==null?void 0:j.tabs)==null?void 0:ge[(y=t[8])==null?void 0:y.selected_tab])==null?void 0:me.fields)||[]).length>0?null:"none"),c(p,"class","w-full overflow-hidden flex flex-row")},m(j,y){var ge,me;M(j,s,y),Ye[l].m(s,null),M(j,a,y),M(j,p,y),_(p,h),_(h,b),_(b,i),_(i,m),oe(u,m,null),_(b,E),_(b,v),Ee(v,t[8].tabs[(ge=t[8])==null?void 0:ge.selected_tab].field_filter),_(h,L),_(h,e),_(e,Y),_(Y,D),oe(Z,D,null),_(h,se),_(h,N),_(N,X),_(X,J),oe(O,J,null),_(h,q),_(h,K),_(K,Fe),_(Fe,we),_(we,Xe),_(Xe,A),_(Xe,Q),_(Fe,ee),_(Fe,Te),Te.checked=t[8].tabs[(me=t[8])==null?void 0:me.selected_tab].use,_(h,Ke),_(h,Ue),_(Ue,He),_(He,Me),oe(Ge,Me,null),_(p,Qe),_(p,V),oe(pe,V,null),ue=!0,lt||(rt=[W(v,"input",t[87]),W(Y,"click",t[88]),W(X,"click",t[89]),W(Te,"change",t[90]),W(He,"click",t[91])],lt=!0)},p(j,y){var de,xe,Ot,gt,xt,ht,at,ot,$e,wt,Lt,Dt,qe,St,U,re,kt,Le,vt,De,Et;let ge=l;l=We(j),l===ge?Ye[l].p(j,y):(nt(),B(Ye[ge],1,1,()=>{Ye[ge]=null}),pt(),n=Ye[l],n?n.p(j,y):(n=Ye[l]=et[l](j),n.c()),I(n,1),n.m(s,null)),(!ue||y[0]&131072&&g!==(g=`${j[17].t("crud.filter")} ${j[17].t("crud.query")} ${j[17].t("crud.field")}`))&&c(v,"placeholder",g),y[0]&262400&&v.value!==j[8].tabs[(de=j[8])==null?void 0:de.selected_tab].field_filter&&Ee(v,j[8].tabs[(xe=j[8])==null?void 0:xe.selected_tab].field_filter),(!ue||y[0]&131072&&R!==(R=j[17].t("crud.execute")))&&c(e,"data-tip",R),(!ue||y[0]&131072&&G!==(G=j[17].t("crud.code")))&&c(N,"data-tip",G),(!ue||y[0]&131072)&&ke!==(ke=j[17].t("crud.use")+"")&&ze(A,ke),y[0]&262400&&(Te.checked=j[8].tabs[(Ot=j[8])==null?void 0:Ot.selected_tab].use),(!ue||y[0]&131072&&te!==(te=j[17].t("crud.save")))&&c(Ue,"data-tip",te),y[0]&256&&ve(h,"display",(((at=(ht=(gt=j[8])==null?void 0:gt.tabs)==null?void 0:ht[(xt=j[8])==null?void 0:xt.selected_tab])==null?void 0:at.fields)||[]).length>0?null:"none");const me={};y[0]&65536&&(me.lang=(ot=j[16])==null?void 0:ot.lang),y[0]&65536&&(me.conf=($e=j[16])==null?void 0:$e.conf),y[0]&256&&(me.rows_per_page=((qe=(Dt=(wt=j[8])==null?void 0:wt.tabs)==null?void 0:Dt[(Lt=j[8])==null?void 0:Lt.selected_tab])==null?void 0:qe.limit)||10),y[0]&256&&(me.page=((kt=(re=(St=j[8])==null?void 0:St.tabs)==null?void 0:re[(U=j[8])==null?void 0:U.selected_tab])==null?void 0:kt.offset)||0),y[0]&256&&(me.total_rows=(((Et=(De=(Le=j[8])==null?void 0:Le.tabs)==null?void 0:De[(vt=j[8])==null?void 0:vt.selected_tab])==null?void 0:Et.fields)||[]).length),pe.$set(me)},i(j){ue||(I(n),I(u.$$.fragment,j),I(Z.$$.fragment,j),I(O.$$.fragment,j),I(Ge.$$.fragment,j),I(pe.$$.fragment,j),ue=!0)},o(j){B(n),B(u.$$.fragment,j),B(Z.$$.fragment,j),B(O.$$.fragment,j),B(Ge.$$.fragment,j),B(pe.$$.fragment,j),ue=!1},d(j){j&&(z(s),z(a),z(p)),Ye[l].d(),ie(u),ie(Z),ie(O),ie(Ge),ie(pe),lt=!1,Bt(rt)}}}function is(t){let s,l,n,a;const p=[Os,Ts],h=[];function b(i,m){var u,E;return((u=i[14])==null?void 0:u.success)===!0?0:(E=i[14])!=null&&E.msg?1:-1}return~(s=b(t))&&(l=h[s]=p[s](t)),{c(){l&&l.c(),n=Jt()},m(i,m){~s&&h[s].m(i,m),M(i,n,m),a=!0},p(i,m){let u=s;s=b(i),s===u?~s&&h[s].p(i,m):(l&&(nt(),B(h[u],1,1,()=>{h[u]=null}),pt()),~s?(l=h[s],l?l.p(i,m):(l=h[s]=p[s](i),l.c()),I(l,1),l.m(n.parentNode,n)):l=null)},i(i){a||(I(l),a=!0)},o(i){B(l),a=!1},d(i){i&&z(n),~s&&h[s].d(i)}}}function cs(t){var we,Xe,ke,A,Q,ee,Te,Ke,Ue,He,Me,Ge,te,Qe,V,pe,ue,lt,rt,et,Ye,We,mt,ct;let s,l,n,a,p,h,b,i,m,u,E,v,g,L,e,Y,D,Z,R,se,N,X,J,O=fe(t[18]||[]),G=[];for(let S=0;S<O.length;S+=1)G[S]=Ll(ol(t,O,S));let q=fe((((A=(ke=(we=t[8])==null?void 0:we.tabs)==null?void 0:ke[(Xe=t[8])==null?void 0:Xe.selected_tab])==null?void 0:A.fields)||[]).filter(t[76]).slice((((Ke=(Te=(Q=t[8])==null?void 0:Q.tabs)==null?void 0:Te[(ee=t[8])==null?void 0:ee.selected_tab])==null?void 0:Ke.offset)||0)*(((Ge=(Me=(Ue=t[8])==null?void 0:Ue.tabs)==null?void 0:Me[(He=t[8])==null?void 0:He.selected_tab])==null?void 0:Ge.limit)||10),(((pe=(V=(te=t[8])==null?void 0:te.tabs)==null?void 0:V[(Qe=t[8])==null?void 0:Qe.selected_tab])==null?void 0:pe.offset)||0)*(((et=(rt=(ue=t[8])==null?void 0:ue.tabs)==null?void 0:rt[(lt=t[8])==null?void 0:lt.selected_tab])==null?void 0:et.limit)||10)+(((ct=(mt=(Ye=t[8])==null?void 0:Ye.tabs)==null?void 0:mt[(We=t[8])==null?void 0:We.selected_tab])==null?void 0:ct.limit)||10))),K=[];for(let S=0;S<q.length;S+=1)K[S]=Il(rl(t,q,S));const Fe=S=>B(K[S],1,1,()=>{K[S]=null});return R=new Be({props:{type:"outline",icon:"plus",path:"icons"}}),{c(){var S;s=d("table"),l=d("thead"),n=d("tr");for(let P=0;P<G.length;P+=1)G[P].c();a=H(),p=d("tbody");for(let P=0;P<K.length;P+=1)K[P].c();h=H(),b=d("tr"),i=d("td"),m=d("input"),E=H(),v=d("td"),g=d("input"),e=H(),Y=d("td"),D=d("button"),Z=d("span"),ae(R.$$.fragment),c(m,"type","text"),c(m,"class","input input-sm p-0 w-full bg-transparent"),c(m,"placeholder",u=t[17].t("crud.formula")),c(i,"class","p-0.5"),c(i,"colspan",((S=t[18]||[])==null?void 0:S.length)-3),c(g,"type","text"),c(g,"class","input input-sm p-0 w-full bg-transparent"),c(g,"placeholder",L=t[17].t("crud.label")),c(v,"class","p-0.5 w-32"),c(v,"colspan",2),c(Z,"class","w-5"),c(D,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),c(Y,"class","p-0.5 w-8 text-right"),c(Y,"title",se=t[17].t("crud.add")),c(s,"class","table table-zebra w-[98%] normal-case table-xs")},m(S,P){var be,Ze;M(S,s,P),_(s,l),_(l,n);for(let _e=0;_e<G.length;_e+=1)G[_e]&&G[_e].m(n,null);_(s,a),_(s,p);for(let _e=0;_e<K.length;_e+=1)K[_e]&&K[_e].m(p,null);_(p,h),_(p,b),_(b,i),_(i,m),Ee(m,t[8].tabs[(be=t[8])==null?void 0:be.selected_tab].formula),_(b,E),_(b,v),_(v,g),Ee(g,t[8].tabs[(Ze=t[8])==null?void 0:Ze.selected_tab].formula_label),_(b,e),_(b,Y),_(Y,D),_(D,Z),oe(R,Z,null),N=!0,X||(J=[W(m,"input",t[84]),W(g,"input",t[85]),W(D,"click",t[86])],X=!0)},p(S,P){var be,Ze,_e,ft,Oe,Tt,st,ut,bt,dt,j,y,ge,me,de,xe,Ot,gt,xt,ht,at,ot,$e,wt,Lt,Dt,qe,St;if(P[0]&393216){O=fe(S[18]||[]);let U;for(U=0;U<O.length;U+=1){const re=ol(S,O,U);G[U]?G[U].p(re,P):(G[U]=Ll(re),G[U].c(),G[U].m(n,null))}for(;U<G.length;U+=1)G[U].d(1);G.length=O.length}if(P[0]&393536|P[1]&6400){q=fe((((ft=(_e=(be=S[8])==null?void 0:be.tabs)==null?void 0:_e[(Ze=S[8])==null?void 0:Ze.selected_tab])==null?void 0:ft.fields)||[]).filter(S[76]).slice((((ut=(st=(Oe=S[8])==null?void 0:Oe.tabs)==null?void 0:st[(Tt=S[8])==null?void 0:Tt.selected_tab])==null?void 0:ut.offset)||0)*(((y=(j=(bt=S[8])==null?void 0:bt.tabs)==null?void 0:j[(dt=S[8])==null?void 0:dt.selected_tab])==null?void 0:y.limit)||10),(((xe=(de=(ge=S[8])==null?void 0:ge.tabs)==null?void 0:de[(me=S[8])==null?void 0:me.selected_tab])==null?void 0:xe.offset)||0)*(((ht=(xt=(Ot=S[8])==null?void 0:Ot.tabs)==null?void 0:xt[(gt=S[8])==null?void 0:gt.selected_tab])==null?void 0:ht.limit)||10)+(((wt=($e=(at=S[8])==null?void 0:at.tabs)==null?void 0:$e[(ot=S[8])==null?void 0:ot.selected_tab])==null?void 0:wt.limit)||10)));let U;for(U=0;U<q.length;U+=1){const re=rl(S,q,U);K[U]?(K[U].p(re,P),I(K[U],1)):(K[U]=Il(re),K[U].c(),I(K[U],1),K[U].m(p,h))}for(nt(),U=q.length;U<K.length;U+=1)Fe(U);pt()}(!N||P[0]&131072&&u!==(u=S[17].t("crud.formula")))&&c(m,"placeholder",u),P[0]&262400&&m.value!==S[8].tabs[(Lt=S[8])==null?void 0:Lt.selected_tab].formula&&Ee(m,S[8].tabs[(Dt=S[8])==null?void 0:Dt.selected_tab].formula),(!N||P[0]&131072&&L!==(L=S[17].t("crud.label")))&&c(g,"placeholder",L),P[0]&262400&&g.value!==S[8].tabs[(qe=S[8])==null?void 0:qe.selected_tab].formula_label&&Ee(g,S[8].tabs[(St=S[8])==null?void 0:St.selected_tab].formula_label),(!N||P[0]&131072&&se!==(se=S[17].t("crud.add")))&&c(Y,"title",se)},i(S){if(!N){for(let P=0;P<q.length;P+=1)I(K[P]);I(R.$$.fragment,S),N=!0}},o(S){K=K.filter(Boolean);for(let P=0;P<K.length;P+=1)B(K[P]);B(R.$$.fragment,S),N=!1},d(S){S&&z(s),_t(G,S),_t(K,S),ie(R),X=!1,Bt(J)}}}function fs(t){let s,l,n;return{c(){s=d("textarea"),c(s,"class","textarea textarea-bordered h-100 w-full textarea-xs --min-h-max"),c(s,"autocomplete","off"),c(s,"autocorrect","off"),c(s,"rows",10)},m(a,p){M(a,s,p),Ee(s,t[8].tabs[t[8].selected_tab].sql),l||(n=W(s,"input",t[75]),l=!0)},p(a,p){p[0]&262400&&Ee(s,a[8].tabs[a[8].selected_tab].sql)},i:Re,o:Re,d(a){a&&z(s),l=!1,n()}}}function Ll(t){var p,h;let s,l=(((p=t[110])==null?void 0:p.label)||t[17].t(`crud.${(h=t[110])==null?void 0:h.name}`))+"",n,a;return{c(){var b,i,m;s=d("th"),n=Ne(l),a=H(),c(s,"class","normal-case "+(((b=t[110])==null?void 0:b.width)||"")+" "+(((i=t[110])==null?void 0:i.type)==="button"?"p-1":"")),c(s,"style",((m=t[110])==null?void 0:m.style)||"")},m(b,i){M(b,s,i),_(s,n),_(s,a)},p(b,i){var m,u;i[0]&131072&&l!==(l=(((m=b[110])==null?void 0:m.label)||b[17].t(`crud.${(u=b[110])==null?void 0:u.name}`))+"")&&ze(n,l)},d(b){b&&z(s)}}}function us(t){let s,l,n,a;function p(){t[81].call(l,t[110],t[115],t[109])}return{c(){var h,b;s=d("td"),l=d("input"),c(l,"type","text"),c(l,"class","input input-sm p-0 "+(((h=t[110])==null?void 0:h.width)||"w-full")+" bg-transparent"),c(s,"class","p-0.5 "+(((b=t[110])==null?void 0:b.width)||""))},m(h,b){var i;M(h,s,b),_(s,l),Ee(l,t[107][(i=t[110])==null?void 0:i.name]),n||(a=W(l,"input",p),n=!0)},p(h,b){var i,m;t=h,b[0]&262464&&l.value!==t[107][(i=t[110])==null?void 0:i.name]&&Ee(l,t[107][(m=t[110])==null?void 0:m.name])},i:Re,o:Re,d(h){h&&z(s),n=!1,a()}}}function bs(t){let s,l,n,a;function p(){t[80].call(l,t[110],t[115],t[109])}return{c(){var h,b;s=d("td"),l=d("input"),c(l,"type","date"),c(l,"class","input input-sm p-0 pl-2 pr-2 "+(((h=t[110])==null?void 0:h.width)||"w-full")+" input-bordered bg-transparent"),c(s,"class","p-0.5 "+(((b=t[110])==null?void 0:b.width)||""))},m(h,b){var i;M(h,s,b),_(s,l),Ee(l,t[107][(i=t[110])==null?void 0:i.name]),n||(a=W(l,"input",p),n=!0)},p(h,b){var i;t=h,b[0]&262464&&Ee(l,t[107][(i=t[110])==null?void 0:i.name])},i:Re,o:Re,d(h){h&&z(s),n=!1,a()}}}function _s(t){var m;let s,l,n,a,p,h,b;a=new Be({props:{type:"outline",icon:(m=t[110])==null?void 0:m.icon,path:"icons"}});function i(){return t[79](t[110],t[107],t[109])}return{c(){var u;s=d("td"),l=d("button"),n=d("span"),ae(a.$$.fragment),c(n,"class","w-5"),c(l,"class","btn btn-circle btn-ghost btn-sm m-0 text-xs"),c(s,"class","p-0.5 w-8 text-right"),c(s,"title",(u=t[110])==null?void 0:u.label)},m(u,E){M(u,s,E),_(s,l),_(l,n),oe(a,n,null),p=!0,h||(b=W(l,"click",i),h=!0)},p(u,E){t=u},i(u){p||(I(a.$$.fragment,u),p=!0)},o(u){B(a.$$.fragment,u),p=!1},d(u){u&&z(s),ie(a),h=!1,b()}}}function ms(t){var i;let s,l,n,a,p=fe(((i=t[110])==null?void 0:i.options)||[]),h=[];for(let m=0;m<p.length;m+=1)h[m]=Dl(al(t,p,m));function b(){t[78].call(l,t[110],t[115],t[109])}return{c(){var m,u,E;s=d("td"),l=d("select");for(let v=0;v<h.length;v+=1)h[v].c();c(l,"class","select text-xs select-sm p-0.5 pr-2 "+(((m=t[110])==null?void 0:m.width)||"w-full bg-transparent")),t[107][(u=t[110])==null?void 0:u.name]===void 0&&Ml(b),c(s,"class","p-0.5 "+(((E=t[110])==null?void 0:E.width)||""))},m(m,u){var E;M(m,s,u),_(s,l);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(l,null);el(l,t[107][(E=t[110])==null?void 0:E.name],!0),n||(a=W(l,"change",b),n=!0)},p(m,u){var E,v;if(t=m,u[0]&393216){p=fe(((E=t[110])==null?void 0:E.options)||[]);let g;for(g=0;g<p.length;g+=1){const L=al(t,p,g);h[g]?h[g].p(L,u):(h[g]=Dl(L),h[g].c(),h[g].m(l,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=p.length}u[0]&262464&&el(l,t[107][(v=t[110])==null?void 0:v.name])},i:Re,o:Re,d(m){m&&z(s),_t(h,m),n=!1,a()}}}function ds(t){let s,l,n,a;function p(){t[77].call(l,t[110],t[115],t[109])}return{c(){var h;s=d("td"),l=d("input"),c(l,"type","checkbox"),c(l,"class","toggle toggle-sm toggle-primary"),c(s,"class","p-0.5 text-center align-middle "+(((h=t[110])==null?void 0:h.width)||""))},m(h,b){var i;M(h,s,b),_(s,l),l.checked=t[107][(i=t[110])==null?void 0:i.name],n||(a=W(l,"change",p),n=!0)},p(h,b){var i;t=h,b[0]&262464&&(l.checked=t[107][(i=t[110])==null?void 0:i.name])},i:Re,o:Re,d(h){h&&z(s),n=!1,a()}}}function gs(t){let s;function l(p,h){return p[112]!==0?ws:xs}let a=l(t)(t);return{c(){a.c(),s=Jt()},m(p,h){a.m(p,h),M(p,s,h)},p(p,h){a.p(p,h)},i:Re,o:Re,d(p){p&&z(s),a.d(p)}}}function Dl(t){var a,p;let s,l=((a=t[117])!=null&&a.label?t[17].t(`crud.${(p=t[117])==null?void 0:p.label}`):t[117].value)+"",n;return{c(){s=d("option"),n=Ne(l),s.__value=t[117].value,Ee(s,s.__value)},m(h,b){M(h,s,b),_(s,n)},p(h,b){var i,m;b[0]&131072&&l!==(l=((i=h[117])!=null&&i.label?h[17].t(`crud.${(m=h[117])==null?void 0:m.label}`):h[117].value)+"")&&ze(n,l)},d(h){h&&z(s)}}}function xs(t){let s;function l(p,h){return p[110].dt_frmt?vs:ks}let a=l(t)(t);return{c(){var p,h;s=d("th"),a.c(),c(s,"class","normal-case "+(((p=t[110])==null?void 0:p.width)||"")),c(s,"style",((h=t[110])==null?void 0:h.style)||"")},m(p,h){M(p,s,h),a.m(s,null)},p(p,h){a.p(p,h)},d(p){p&&z(s),a.d()}}}function ws(t){let s;function l(p,h){return p[110].dt_frmt?Ns:Es}let a=l(t)(t);return{c(){var p,h;s=d("td"),a.c(),c(s,"class","normal-case "+(((p=t[110])==null?void 0:p.width)||"")),c(s,"style",((h=t[110])==null?void 0:h.style)||"")},m(p,h){M(p,s,h),a.m(s,null)},p(p,h){a.p(p,h)},d(p){p&&z(s),a.d()}}}function ks(t){var p,h,b;let s,l=Pe((h=t[107])==null?void 0:h[(p=t[110])==null?void 0:p.name],((b=t[110])==null?void 0:b.ellipsis)||30)+"",n,a;return{c(){var i,m,u;s=d("span"),n=Ne(l),c(s,"title",a=t[107][(i=t[110])==null?void 0:i.tooltip]||Je(t[107][(m=t[110])==null?void 0:m.name],((u=t[110])==null?void 0:u.ellipsis)||30))},m(i,m){M(i,s,m),_(s,n)},p(i,m){var u,E,v,g,L,e;m[0]&320&&l!==(l=Pe((E=i[107])==null?void 0:E[(u=i[110])==null?void 0:u.name],((v=i[110])==null?void 0:v.ellipsis)||30)+"")&&ze(n,l),m[0]&262464&&a!==(a=i[107][(g=i[110])==null?void 0:g.tooltip]||Je(i[107][(L=i[110])==null?void 0:L.name],((e=i[110])==null?void 0:e.ellipsis)||30))&&c(s,"title",a)},d(i){i&&z(s)}}}function vs(t){var n,a;let s=Rt((a=t[107])==null?void 0:a[(n=t[110])==null?void 0:n.name]).format(t[110].dt_frmt)+"",l;return{c(){l=Ne(s)},m(p,h){M(p,l,h)},p(p,h){var b,i;h[0]&320&&s!==(s=Rt((i=p[107])==null?void 0:i[(b=p[110])==null?void 0:b.name]).format(p[110].dt_frmt)+"")&&ze(l,s)},d(p){p&&z(l)}}}function Es(t){var p,h,b;let s,l=Pe((h=t[107])==null?void 0:h[(p=t[110])==null?void 0:p.name],((b=t[110])==null?void 0:b.ellipsis)||30)+"",n,a;return{c(){var i,m,u;s=d("span"),n=Ne(l),c(s,"title",a=t[107][(i=t[110])==null?void 0:i.tooltip]||Je(t[107][(m=t[110])==null?void 0:m.name],((u=t[110])==null?void 0:u.ellipsis)||30))},m(i,m){M(i,s,m),_(s,n)},p(i,m){var u,E,v,g,L,e;m[0]&320&&l!==(l=Pe((E=i[107])==null?void 0:E[(u=i[110])==null?void 0:u.name],((v=i[110])==null?void 0:v.ellipsis)||30)+"")&&ze(n,l),m[0]&262464&&a!==(a=i[107][(g=i[110])==null?void 0:g.tooltip]||Je(i[107][(L=i[110])==null?void 0:L.name],((e=i[110])==null?void 0:e.ellipsis)||30))&&c(s,"title",a)},d(i){i&&z(s)}}}function Ns(t){var n,a;let s=Rt((a=t[107])==null?void 0:a[(n=t[110])==null?void 0:n.name]).format(t[110].dt_frmt)+"",l;return{c(){l=Ne(s)},m(p,h){M(p,l,h)},p(p,h){var b,i;h[0]&320&&s!==(s=Rt((i=p[107])==null?void 0:i[(b=p[110])==null?void 0:b.name]).format(p[110].dt_frmt)+"")&&ze(l,s)},d(p){p&&z(l)}}}function Sl(t){let s,l,n,a;const p=[gs,ds,ms,_s,bs,us],h=[];function b(i,m){var u,E,v,g,L,e;return((u=i[110])==null?void 0:u.type)==="data"&&!((E=i[107])!=null&&E.formula)?0:((v=i[110])==null?void 0:v.type)==="boolean"?1:((g=i[110])==null?void 0:g.type)==="select"?2:((L=i[110])==null?void 0:L.type)==="button"?3:((e=i[110])==null?void 0:e.type)==="date"?4:5}return s=b(t),l=h[s]=p[s](t),{c(){l.c(),n=Jt()},m(i,m){h[s].m(i,m),M(i,n,m),a=!0},p(i,m){let u=s;s=b(i),s===u?h[s].p(i,m):(nt(),B(h[u],1,1,()=>{h[u]=null}),pt(),l=h[s],l?l.p(i,m):(l=h[s]=p[s](i),l.c()),I(l,1),l.m(n.parentNode,n))},i(i){a||(I(l),a=!0)},o(i){B(l),a=!1},d(i){i&&z(n),h[s].d(i)}}}function Il(t){let s,l,n,a,p=fe(t[18]||[]),h=[];for(let u=0;u<p.length;u+=1)h[u]=Sl(hl(t,p,u));const b=u=>B(h[u],1,1,()=>{h[u]=null});function i(...u){return t[82](t[107],t[109],...u)}function m(...u){return t[83](t[107],t[109],...u)}return{c(){s=d("tr");for(let u=0;u<h.length;u+=1)h[u].c();c(s,"class","hover"),c(s,"draggable",!0),ve(s,"display",t[107].excluded?"None":null)},m(u,E){M(u,s,E);for(let v=0;v<h.length;v+=1)h[v]&&h[v].m(s,null);l=!0,n||(a=[W(s,"dragstart",i),W(s,"drop",m)],n=!0)},p(u,E){if(t=u,E[0]&393536|E[1]&256){p=fe(t[18]||[]);let v;for(v=0;v<p.length;v+=1){const g=hl(t,p,v);h[v]?(h[v].p(g,E),I(h[v],1)):(h[v]=Sl(g),h[v].c(),I(h[v],1),h[v].m(s,null))}for(nt(),v=p.length;v<h.length;v+=1)b(v);pt()}E[0]&320&&ve(s,"display",t[107].excluded?"None":null)},i(u){if(!l){for(let E=0;E<p.length;E+=1)I(h[E]);l=!0}},o(u){h=h.filter(Boolean);for(let E=0;E<h.length;E+=1)B(h[E]);l=!1},d(u){u&&z(s),_t(h,u),n=!1,Bt(a)}}}function Ts(t){var n;let s=((n=t[14])==null?void 0:n.msg)+"",l;return{c(){l=Ne(s)},m(a,p){M(a,l,p)},p(a,p){var h;p[0]&16384&&s!==(s=((h=a[14])==null?void 0:h.msg)+"")&&ze(l,s)},i:Re,o:Re,d(a){a&&z(l)}}}function Os(t){var G,q,K,Fe,we,Xe,ke;let s,l,n,a,p,h,b,i,m,u,E,v,g,L,e,Y,D,Z,R,se,N=fe(((G=t[14])==null?void 0:G.cols)||Object.keys(((K=(q=t[14])==null?void 0:q.data)==null?void 0:K[0])||{})||[]),X=[];for(let A=0;A<N.length;A+=1)X[A]=jl(fl(t,N,A));let J=fe((((Fe=t[14])==null?void 0:Fe.data)||[]).filter(t[72])),O=[];for(let A=0;A<J.length;A+=1)O[A]=Cl(il(t,J,A));return g=new Be({props:{type:"outline",icon:"save",path:"icons"}}),D=new Fl({props:{lang:(we=t[16])==null?void 0:we.lang,conf:(Xe=t[16])==null?void 0:Xe.conf,rows_per_page:t[4]||10,page:t[5]||0,total_rows:(ke=t[14])==null?void 0:ke.n_rows}}),D.$on("pageChange",t[74]),{c(){var A;s=d("div"),l=d("table"),n=d("thead"),a=d("tr");for(let Q=0;Q<X.length;Q+=1)X[Q].c();p=H(),h=d("tbody");for(let Q=0;Q<O.length;Q+=1)O[Q].c();b=H(),i=d("div"),m=d("div"),u=d("div"),E=d("button"),v=d("span"),ae(g.$$.fragment),e=H(),Y=d("div"),ae(D.$$.fragment),c(l,"class","table table-zebra w-[98%] normal-case table-xs"),c(s,"class","w-full overflow-x-auto text-center"),c(v,"class","w-6"),c(E,"class","btn btn-square btn-ghost btn-sm text-xs mr-2"),c(u,"class","tooltip tooltip-right"),c(u,"data-tip",L=t[17].t("crud.save")),c(m,"class","flex-grow flex flex-row align-middle p-2"),ve(m,"display",(((A=t[14])==null?void 0:A.data)||[]).length>0?null:"none"),c(i,"class","w-full overflow-hidden flex flex-row")},m(A,Q){M(A,s,Q),_(s,l),_(l,n),_(n,a);for(let ee=0;ee<X.length;ee+=1)X[ee]&&X[ee].m(a,null);_(l,p),_(l,h);for(let ee=0;ee<O.length;ee+=1)O[ee]&&O[ee].m(h,null);M(A,b,Q),M(A,i,Q),_(i,m),_(m,u),_(u,E),_(E,v),oe(g,v,null),_(i,e),_(i,Y),oe(D,Y,null),Z=!0,R||(se=W(E,"click",t[73]),R=!0)},p(A,Q){var Te,Ke,Ue,He,Me,Ge,te,Qe;if(Q[0]&16384){N=fe(((Te=A[14])==null?void 0:Te.cols)||Object.keys(((Ue=(Ke=A[14])==null?void 0:Ke.data)==null?void 0:Ue[0])||{})||[]);let V;for(V=0;V<N.length;V+=1){const pe=fl(A,N,V);X[V]?X[V].p(pe,Q):(X[V]=jl(pe),X[V].c(),X[V].m(a,null))}for(;V<X.length;V+=1)X[V].d(1);X.length=N.length}if(Q[0]&16384){J=fe((((He=A[14])==null?void 0:He.data)||[]).filter(A[72]));let V;for(V=0;V<J.length;V+=1){const pe=il(A,J,V);O[V]?O[V].p(pe,Q):(O[V]=Cl(pe),O[V].c(),O[V].m(h,null))}for(;V<O.length;V+=1)O[V].d(1);O.length=J.length}(!Z||Q[0]&131072&&L!==(L=A[17].t("crud.save")))&&c(u,"data-tip",L),Q[0]&16384&&ve(m,"display",(((Me=A[14])==null?void 0:Me.data)||[]).length>0?null:"none");const ee={};Q[0]&65536&&(ee.lang=(Ge=A[16])==null?void 0:Ge.lang),Q[0]&65536&&(ee.conf=(te=A[16])==null?void 0:te.conf),Q[0]&16&&(ee.rows_per_page=A[4]||10),Q[0]&32&&(ee.page=A[5]||0),Q[0]&16384&&(ee.total_rows=(Qe=A[14])==null?void 0:Qe.n_rows),D.$set(ee)},i(A){Z||(I(g.$$.fragment,A),I(D.$$.fragment,A),Z=!0)},o(A){B(g.$$.fragment,A),B(D.$$.fragment,A),Z=!1},d(A){A&&(z(s),z(b),z(i)),_t(X,A),_t(O,A),ie(g),ie(D),R=!1,se()}}}function jl(t){let s,l=Pe(t[110],20)+"",n,a;return{c(){s=d("th"),n=Ne(l),c(s,"class","normal-case"),c(s,"title",a=Je(t[110],20))},m(p,h){M(p,s,h),_(s,n)},p(p,h){h[0]&16384&&l!==(l=Pe(p[110],20)+"")&&ze(n,l),h[0]&16384&&a!==(a=Je(p[110],20))&&c(s,"title",a)},d(p){p&&z(s)}}}function Ls(t){var p;let s,l=Pe((p=t[107])==null?void 0:p[t[110]],30)+"",n,a;return{c(){var h;s=d("td"),n=Ne(l),c(s,"class","normal-case"),c(s,"title",a=Je((h=t[107])==null?void 0:h[t[110]],30))},m(h,b){M(h,s,b),_(s,n)},p(h,b){var i,m;b[0]&16384&&l!==(l=Pe((i=h[107])==null?void 0:i[h[110]],30)+"")&&ze(n,l),b[0]&16384&&a!==(a=Je((m=h[107])==null?void 0:m[h[110]],30))&&c(s,"title",a)},d(h){h&&z(s)}}}function Ds(t){var p;let s,l=Pe((p=t[107])==null?void 0:p[t[110]],30)+"",n,a;return{c(){var h;s=d("th"),n=Ne(l),c(s,"class","normal-case"),c(s,"title",a=Je((h=t[107])==null?void 0:h[t[110]],30))},m(h,b){M(h,s,b),_(s,n)},p(h,b){var i,m;b[0]&16384&&l!==(l=Pe((i=h[107])==null?void 0:i[h[110]],30)+"")&&ze(n,l),b[0]&16384&&a!==(a=Je((m=h[107])==null?void 0:m[h[110]],30))&&c(s,"title",a)},d(h){h&&z(s)}}}function Al(t){let s;function l(p,h){return p[112]===0?Ds:Ls}let a=l(t)(t);return{c(){a.c(),s=Jt()},m(p,h){a.m(p,h),M(p,s,h)},p(p,h){a.p(p,h)},d(p){p&&z(s),a.d(p)}}}function Cl(t){var p,h,b;let s,l,n=fe(((p=t[14])==null?void 0:p.cols)||Object.keys(((b=(h=t[14])==null?void 0:h.data)==null?void 0:b[0])||{})||[]),a=[];for(let i=0;i<n.length;i+=1)a[i]=Al(cl(t,n,i));return{c(){s=d("tr");for(let i=0;i<a.length;i+=1)a[i].c();l=H()},m(i,m){M(i,s,m);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(s,null);_(s,l)},p(i,m){var u,E,v;if(m[0]&16384){n=fe(((u=i[14])==null?void 0:u.cols)||Object.keys(((v=(E=i[14])==null?void 0:E.data)==null?void 0:v[0])||{})||[]);let g;for(g=0;g<n.length;g+=1){const L=cl(i,n,g);a[g]?a[g].p(L,m):(a[g]=Al(L),a[g].c(),a[g].m(s,l))}for(;g<a.length;g+=1)a[g].d(1);a.length=n.length}},d(i){i&&z(s),_t(a,i)}}}function Bl(t){let s,l;return s=new Ql({props:{open:t[13]}}),{c(){ae(s.$$.fragment)},m(n,a){oe(s,n,a),l=!0},p(n,a){const p={};a[0]&8192&&(p.open=n[13]),s.$set(p)},i(n){l||(I(s.$$.fragment,n),l=!0)},o(n){B(s.$$.fragment,n),l=!1},d(n){ie(s,n)}}}function Rl(t){let s,l;return s=new Vl({props:{open:t[9].open,type:t[9].type,msg:t[9].msg,timer:2e4}}),s.$on("dismiss",t[95]),{c(){ae(s.$$.fragment)},m(n,a){oe(s,n,a),l=!0},p(n,a){const p={};a[0]&512&&(p.open=n[9].open),a[0]&512&&(p.type=n[9].type),a[0]&512&&(p.msg=n[9].msg),s.$set(p)},i(n){l||(I(s.$$.fragment,n),l=!0)},o(n){B(s.$$.fragment,n),l=!1},d(n){ie(s,n)}}}function Ul(t){let s,l;const n=[t[10]];let a={};for(let p=0;p<n.length;p+=1)a=Xl(a,n[p]);return s=new Yl({props:a}),s.$on("dismiss",t[96]),{c(){ae(s.$$.fragment)},m(p,h){oe(s,p,h),l=!0},p(p,h){const b=h[0]&1024?Zl(n,[$l(p[10])]):{};s.$set(b)},i(p){l||(I(s.$$.fragment,p),l=!0)},o(p){B(s.$$.fragment,p),l=!1},d(p){ie(s,p)}}}function Ss(t){var Qt,Vt,Xt,Yt,Zt,$t,qt,r,f,x;let s,l,n,a,p,h,b,i,m,u,E,v,g,L,e,Y,D,Z,R,se,N,X,J,O,G,q,K,Fe,we,Xe,ke,A,Q,ee,Te,Ke,Ue,He,Me,Ge,te,Qe,V,pe,ue,lt,rt,et,Ye,We,mt,ct,S,P,be,Ze,_e,ft,Oe,Tt,st,ut,bt=`${t[17].t("crud.preview")} ${((Yt=(Xt=(Qt=t[8])==null?void 0:Qt.tabs)==null?void 0:Xt[(Vt=t[14])==null?void 0:Vt.tab])==null?void 0:Yt.label)||""}`,dt,j,y,ge,me,de,xe,Ot,gt,xt,ht,at,ot,$e,wt,Lt;const Dt=[ns,ss],qe=[];function St(o,w){var T,F;return((F=(T=o[8])==null?void 0:T.tables)==null?void 0:F.length)===0?0:1}p=St(t),h=qe[p]=Dt[p](t);let U=(($t=(Zt=t[8])==null?void 0:Zt.selected_table_fields)==null?void 0:$t.length)>0&&xl(t);g=new Be({props:{type:"outline",icon:"chevron-up",path:"icons"}});let re=((r=(qt=t[8])==null?void 0:qt.selected_table_fields)==null?void 0:r.length)>0&&wl(t),kt=fe((f=t[8])==null?void 0:f.selected_table_fields.filter(t[57])),Le=[];for(let o=0;o<kt.length;o+=1)Le[o]=kl(ml(t,kt,o));N=new Be({props:{type:"outline",icon:"chevron-down",path:"icons"}}),K=new Be({props:{type:"outline",icon:"chevron-left",path:"icons"}});let vt=fe(t[7].filter(t[59])),De=[];for(let o=0;o<vt.length;o+=1)De[o]=vl(_l(t,vt,o));Q=new Be({props:{type:"outline",icon:"chevron-right",path:"icons"}}),Me=new Be({props:{type:"outline",icon:"search",path:"icons"}}),et=new Be({props:{type:"outline",icon:"circle-stack",path:"icons"}});let Et=fe(t[15]),Ve=[];for(let o=0;o<Et.length;o+=1)Ve[o]=El(bl(t,Et,o));let Se=t[1]&&Nl(t),Ie=t[2]&&Tl(t),At=fe(Object.keys(((x=t[8])==null?void 0:x.tabs)||{})),ce=[];for(let o=0;o<At.length;o+=1)ce[o]=Ol(ul(t,At,o));const tl=o=>B(ce[o],1,1,()=>{ce[o]=null});Oe=new Be({props:{type:"outline",icon:"plus",path:"icons"}});const Kt=[is,os,as],It=[];function Gt(o,w){var T,F,$,ne;return o[8].selected_tab==="query_preview"?0:(((ne=($=(T=o[8])==null?void 0:T.tabs)==null?void 0:$[(F=o[8])==null?void 0:F.selected_tab])==null?void 0:ne.fields)||[]).length>0?1:2}de=Gt(t),xe=It[de]=Kt[de](t);let je=t[13]&&Bl(t),Ae=t[9].open&&Rl(t),Ce=t[10].open&&Ul(t);return{c(){var o,w,T,F,$,ne,k;s=d("div"),l=d("div"),n=d("div"),a=d("div"),h.c(),b=H(),i=d("div"),U&&U.c(),m=H(),u=d("div"),E=d("div"),v=d("span"),ae(g.$$.fragment),L=H(),e=d("div"),re&&re.c(),Y=H();for(let he=0;he<Le.length;he+=1)Le[he].c();Z=H(),R=d("div"),se=d("span"),ae(N.$$.fragment),X=H(),J=d("div"),O=d("div"),G=d("div"),q=d("span"),ae(K.$$.fragment),Fe=H(),we=d("div");for(let he=0;he<De.length;he+=1)De[he].c();Xe=H(),ke=d("div"),A=d("span"),ae(Q.$$.fragment),ee=H(),Te=d("div"),Ke=d("div"),Ue=d("button"),He=d("span"),ae(Me.$$.fragment),Ge=H(),te=d("input"),V=H(),pe=d("div"),ue=d("div"),lt=d("button"),rt=d("span"),ae(et.$$.fragment),Ye=H(),We=d("select");for(let he=0;he<Ve.length;he+=1)Ve[he].c();mt=H(),Se&&Se.c(),ct=H(),Ie&&Ie.c(),S=H(),P=d("div"),be=d("div");for(let he=0;he<ce.length;he+=1)ce[he].c();Ze=H(),_e=d("a"),ft=d("span"),ae(Oe.$$.fragment),Tt=H(),st=d("a"),ut=d("b"),dt=Ne(bt),y=H(),ge=d("a"),ge.innerHTML="<b></b>",me=H(),xe.c(),Ot=H(),gt=d("span"),xt=H(),je&&je.c(),ht=H(),Ae&&Ae.c(),at=H(),Ce&&Ce.c(),ot=Jt(),c(a,"class","w-full h-10 align-middle border-b border-r-slate-200 hover:border-dashed"),c(v,"class","h-5 w-5 m-auto"),c(E,"class","h-5 w-full flex cursor-pointer hover:bg-slate-300 hover:rounded-md !text-center"),ve(E,"display",((w=(o=t[8])==null?void 0:o.tables)==null?void 0:w.length)>0&&t[25](`${t[19]}-${t[8].selecetd_table}-selected`,"height",t[8])?null:"none"),c(e,"id",D=t[19]+"-"+((T=t[8])==null?void 0:T.selecetd_table)+"-selected"),c(e,"class","flex-grow flex flex-col overflow-hidden pt-0.5 pb-0.5"),c(se,"class","h-5 w-5 m-auto"),c(R,"class","h-5 flex cursor-pointer hover:bg-slate-300 hover:rounded-md !text-center"),ve(R,"display",(($=(F=t[8])==null?void 0:F.tables)==null?void 0:$.length)>0&&t[25](`${t[19]}-${t[8].selecetd_table}-selected`,"height",t[8])?null:"none"),c(u,"class","w-full flex flex-col flex-grow h-["+(window.innerHeight-200)+"px]"),c(i,"class","w-full align-middle border-r border-r-slate-200 hover:border-dashed flex flex-col"),c(n,"class","w-[18%] min-h-[90%] max-h-[90%] border-r border-r-slate-200"),ve(n,"min-height",t[47]-130+"px"),ve(n,"max-height",t[47]-130+"px"),c(q,"class","h-5 w-full"),c(G,"class","w-5 min-w-5 flex cursor-pointer hover:bg-slate-300 hover:rounded-md text-center"),ve(G,"display",((ne=t[7])==null?void 0:ne.length)>0&&t[25](t[19],"width",t[7])?null:"none"),c(we,"id",t[19]),c(we,"class","flex-grow flex overflow-hidden pt-0.5 pb-0.5 align-middle"),c(A,"class","h-5 w-full"),c(ke,"class","w-5 min-w-5 flex cursor-pointer hover:bg-slate-300 hover:rounded-md text-center"),ve(ke,"display",((k=t[7])==null?void 0:k.length)>0&&t[25](t[19],"width",t[7])?null:"none"),c(He,"class","w-5 h-5"),c(Ue,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(te,"type","text"),c(te,"placeholder",Qe=`${t[17].t("crud.filter")} ${t[17].t("crud.table")}`),c(te,"class","grow input pl-8 input-bordered w-full input-sm"),c(te,"autocomplete","off"),c(te,"autocorrect","off"),c(Ke,"class","grow flex"),c(Te,"class","w-[20%] min-w-[20%] border-l border-l-slate-200 pl-1 pt-0.5 flex flex-row"),c(rt,"class","w-5 h-5"),c(lt,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),c(We,"class","grow pl-8 select select-sm select-bordered w-full"),t[0].database===void 0&&Ml(()=>t[64].call(We)),c(ue,"class","grow flex"),c(pe,"class","w-[20%] min-w-[20%] border-l border-l-slate-200 pl-1 ml-1 pt-0.5 flex flex-row"),c(O,"class","w-full h-10 border-b border-r-slate-200 flex flex-row align-baseline"),c(ft,"class","w-5 font-bold"),c(_e,"class","tab tab-lifted text-md"),c(st,"class",j="tab tab-lifted text-md "+(t[8].selected_tab==="query_preview"?"tab-active active":"")),c(ge,"class","tab tab-lifted text-md grow"),c(be,"class","tabs w-full"),c(P,"class","w-full flex-grow h-["+(window.innerHeight-200)+"px]"),c(J,"class","w-[82%] flex flex-col"),c(l,"class","flex flex-row"),c(gt,"class","w-10 w-20 h-[300px] h-[301px] h-[302px] h-[303px] h-[304px] h-[305px] h-[306px] h-[307px] h-[308px] h-[309px] h-[310px] h-[311px] h-[312px] h-[313px] h-[314px] h-[315px] h-[316px] h-[317px] h-[318px] h-[319px] h-[320px] h-[321px] h-[322px] h-[323px] h-[324px] h-[325px] h-[326px] h-[327px] h-[328px] h-[329px] h-[330px] h-[331px] h-[332px] h-[333px] h-[334px] h-[335px] h-[336px] h-[337px] h-[338px] h-[339px] h-[340px] h-[341px] h-[342px] h-[343px] h-[344px] h-[345px] h-[346px] h-[347px] h-[348px] h-[349px] h-[350px] h-[351px] h-[352px] h-[353px] h-[354px] h-[355px] h-[356px] h-[357px] h-[358px] h-[359px] h-[360px] h-[361px] h-[362px] h-[363px] h-[364px] h-[365px] h-[366px] h-[367px] h-[368px] h-[369px] h-[370px] h-[371px] h-[372px] h-[373px] h-[374px] h-[375px] h-[376px] h-[377px] h-[378px] h-[379px] h-[380px] h-[381px] h-[382px] h-[383px] h-[384px] h-[385px] h-[386px] h-[387px] h-[388px] h-[389px] h-[390px] h-[391px] h-[392px] h-[393px] h-[394px] h-[395px] h-[396px] h-[397px] h-[398px] h-[399px] h-[400px] h-[401px] h-[402px] h-[403px] h-[404px] h-[405px] h-[406px] h-[407px] h-[408px] h-[409px] h-[410px] h-[411px] h-[412px] h-[413px] h-[414px] h-[415px] h-[416px] h-[417px] h-[418px] h-[419px] h-[420px] h-[421px] h-[422px] h-[423px] h-[424px] h-[425px] h-[426px] h-[427px] h-[428px] h-[429px] h-[430px] h-[431px] h-[432px] h-[433px] h-[434px] h-[435px] h-[436px] h-[437px] h-[438px] h-[439px] h-[440px] h-[441px] h-[442px] h-[443px] h-[444px] h-[445px] h-[446px] h-[447px] h-[448px] h-[449px] h-[450px] h-[451px] h-[452px] h-[453px] h-[454px] h-[455px] h-[456px] h-[457px] h-[458px] h-[459px] h-[460px] h-[461px] h-[462px] h-[463px] h-[464px] h-[465px] h-[466px] h-[467px] h-[468px] h-[469px] h-[470px] h-[471px] h-[472px] h-[473px] h-[474px] h-[475px] h-[476px] h-[477px] h-[478px] h-[479px] h-[480px] h-[481px] h-[482px] h-[483px] h-[484px] h-[485px] h-[486px] h-[487px] h-[488px] h-[489px] h-[490px] h-[491px] h-[492px] h-[493px] h-[494px] h-[495px] h-[496px] h-[497px] h-[498px] h-[499px] h-[500px] h-[501px] h-[502px] h-[503px] h-[504px] h-[505px] h-[506px] h-[507px] h-[508px] h-[509px] h-[510px] h-[511px] h-[512px] h-[513px] h-[514px] h-[515px] h-[516px] h-[517px] h-[518px] h-[519px] h-[520px] h-[521px] h-[522px] h-[523px] h-[524px] h-[525px] h-[526px] h-[527px] h-[528px] h-[529px] h-[530px] h-[531px] h-[532px] h-[533px] h-[534px] h-[535px] h-[536px] h-[537px] h-[538px] h-[539px] h-[540px] h-[541px] h-[542px] h-[543px] h-[544px] h-[545px] h-[546px] h-[547px] h-[548px] h-[549px] h-[550px] h-[551px] h-[552px] h-[553px] h-[554px] h-[555px] h-[556px] h-[557px] h-[558px] h-[559px] h-[560px] h-[561px] h-[562px] h-[563px] h-[564px] h-[565px] h-[566px] h-[567px] h-[568px] h-[569px] h-[570px] h-[571px] h-[572px] h-[573px] h-[574px] h-[575px] h-[576px] h-[577px] h-[578px] h-[579px] h-[580px] h-[581px] h-[582px] h-[583px] h-[584px] h-[585px] h-[586px] h-[587px] h-[588px] h-[589px] h-[590px] h-[591px] h-[592px] h-[593px] h-[594px] h-[595px] h-[596px] h-[597px] h-[598px] h-[599px] h-[600px] h-[601px] h-[602px] h-[603px] h-[604px] h-[605px] h-[606px] h-[607px] h-[608px] h-[609px] h-[610px] h-[611px] h-[612px] h-[613px] h-[614px] h-[615px] h-[616px] h-[617px] h-[618px] h-[619px] h-[620px] h-[621px] h-[622px] h-[623px] h-[624px] h-[625px] h-[626px] h-[627px] h-[628px] h-[629px] h-[630px] h-[631px] h-[632px] h-[633px] h-[634px] h-[635px] h-[636px] h-[637px] h-[638px] h-[639px] h-[640px] h-[641px] h-[642px] h-[643px] h-[644px] h-[645px] h-[646px] h-[647px] h-[648px] h-[649px] h-[650px] h-[651px] h-[652px] h-[653px] h-[654px] h-[655px] h-[656px] h-[657px] h-[658px] h-[659px] h-[660px] h-[661px] h-[662px] h-[663px] h-[664px] h-[665px] h-[666px] h-[667px] h-[668px] h-[669px] h-[670px] h-[671px] h-[672px] h-[673px] h-[674px] h-[675px] h-[676px] h-[677px] h-[678px] h-[679px] h-[680px] h-[681px] h-[682px] h-[683px] h-[684px] h-[685px] h-[686px] h-[687px] h-[688px] h-[689px] h-[690px] h-[691px] h-[692px] h-[693px] h-[694px] h-[695px] h-[696px] h-[697px] h-[698px] h-[699px] h-[700px] h-[701px] h-[702px] h-[703px] h-[704px] h-[705px] h-[706px] h-[707px] h-[708px] h-[709px] h-[710px] h-[711px] h-[712px] h-[713px] h-[714px] h-[715px] h-[716px] h-[717px] h-[718px] h-[719px] h-[720px] h-[721px] h-[722px] h-[723px] h-[724px] h-[725px] h-[726px] h-[727px] h-[728px] h-[729px] h-[730px] h-[731px] h-[732px] h-[733px] h-[734px] h-[735px] h-[736px] h-[737px] h-[738px] h-[739px] h-[740px] h-[741px] h-[742px] h-[743px] h-[744px] h-[745px] h-[746px] h-[747px] h-[748px] h-[749px] h-[750px] h-[751px] h-[752px] h-[753px] h-[754px] h-[755px] h-[756px] h-[757px] h-[758px] h-[759px] h-[760px] h-[761px] h-[762px] h-[763px] h-[764px] h-[765px] h-[766px] h-[767px] h-[768px] h-[769px] h-[770px] h-[771px] h-[772px] h-[773px] h-[774px] h-[775px] h-[776px] h-[777px] h-[778px] h-[779px] h-[780px] h-[781px] h-[782px] h-[783px] h-[784px] h-[785px] h-[786px] h-[787px] h-[788px] h-[789px] h-[790px] h-[791px] h-[792px] h-[793px] h-[794px] h-[795px] h-[796px] h-[797px] h-[798px] h-[799px] h-[800px] h-[801px] h-[802px] h-[803px] h-[804px] h-[805px] h-[806px] h-[807px] h-[808px] h-[809px] h-[810px] h-[811px] h-[812px] h-[813px] h-[814px] h-[815px] h-[816px] h-[817px] h-[818px] h-[819px] h-[820px] h-[821px] h-[822px] h-[823px] h-[824px] h-[825px] h-[826px] h-[827px] h-[828px] h-[829px] h-[830px] h-[831px] h-[832px] h-[833px] h-[834px] h-[835px] h-[836px] h-[837px] h-[838px] h-[839px] h-[840px] h-[841px] h-[842px] h-[843px] h-[844px] h-[845px] h-[846px] h-[847px] h-[848px] h-[849px] h-[850px] h-[851px] h-[852px] h-[853px] h-[854px] h-[855px] h-[856px] h-[857px] h-[858px] h-[859px] h-[860px] h-[861px] h-[862px] h-[863px] h-[864px] h-[865px] h-[866px] h-[867px] h-[868px] h-[869px] h-[870px] h-[871px] h-[872px] h-[873px] h-[874px] h-[875px] h-[876px] h-[877px] h-[878px] h-[879px] h-[880px] h-[881px] h-[882px] h-[883px] h-[884px] h-[885px] h-[886px] h-[887px] h-[888px] h-[889px] h-[890px] h-[891px] h-[892px] h-[893px] h-[894px] h-[895px] h-[896px] h-[897px] h-[898px] h-[899px] h-[900px] h-[901px] h-[902px] h-[903px] h-[904px] h-[905px] h-[906px] h-[907px] h-[908px] h-[909px] h-[910px] h-[911px] h-[912px] h-[913px] h-[914px] h-[915px] h-[916px] h-[917px] h-[918px] h-[919px] h-[920px] h-[921px] h-[922px] h-[923px] h-[924px] h-[925px] h-[926px] h-[927px] h-[928px] h-[929px] h-[930px] h-[931px] h-[932px] h-[933px] h-[934px] h-[935px] h-[936px] h-[937px] h-[938px] h-[939px] h-[940px] h-[941px] h-[942px] h-[943px] h-[944px] h-[945px] h-[946px] h-[947px] h-[948px] h-[949px] h-[950px] h-[951px] h-[952px] h-[953px] h-[954px] h-[955px] h-[956px] h-[957px] h-[958px] h-[959px] h-[960px] h-[961px] h-[962px] h-[963px] h-[964px] h-[965px] h-[966px] h-[967px] h-[968px] h-[969px] h-[970px] h-[971px] h-[972px] h-[973px] h-[974px] h-[975px] h-[976px] h-[977px] h-[978px] h-[979px] h-[980px] h-[981px] h-[982px] h-[983px] h-[984px] h-[985px] h-[986px] h-[987px] h-[988px] h-[989px] h-[990px] h-[991px] h-[992px] h-[993px] h-[994px] h-[995px] h-[996px] h-[997px] h-[998px] h-[999px] "),c(s,"class","w-full --m-3")},m(o,w){M(o,s,w),_(s,l),_(l,n),_(n,a),qe[p].m(a,null),_(n,b),_(n,i),U&&U.m(i,null),_(i,m),_(i,u),_(u,E),_(E,v),oe(g,v,null),_(u,L),_(u,e),re&&re.m(e,null),_(e,Y);for(let T=0;T<Le.length;T+=1)Le[T]&&Le[T].m(e,null);_(u,Z),_(u,R),_(R,se),oe(N,se,null),_(l,X),_(l,J),_(J,O),_(O,G),_(G,q),oe(K,q,null),_(O,Fe),_(O,we);for(let T=0;T<De.length;T+=1)De[T]&&De[T].m(we,null);_(O,Xe),_(O,ke),_(ke,A),oe(Q,A,null),_(O,ee),_(O,Te),_(Te,Ke),_(Ke,Ue),_(Ue,He),oe(Me,He,null),_(Ke,Ge),_(Ke,te),Ee(te,t[11]),_(O,V),_(O,pe),_(pe,ue),_(ue,lt),_(lt,rt),oe(et,rt,null),_(ue,Ye),_(ue,We);for(let T=0;T<Ve.length;T+=1)Ve[T]&&Ve[T].m(We,null);el(We,t[0].database,!0),_(O,mt),Se&&Se.m(O,null),_(O,ct),Ie&&Ie.m(O,null),_(J,S),_(J,P),_(P,be);for(let T=0;T<ce.length;T+=1)ce[T]&&ce[T].m(be,null);_(be,Ze),_(be,_e),_(_e,ft),oe(Oe,ft,null),_(be,Tt),_(be,st),_(st,ut),_(ut,dt),_(be,y),_(be,ge),_(P,me),It[de].m(P,null),_(s,Ot),_(s,gt),M(o,xt,w),je&&je.m(o,w),M(o,ht,w),Ae&&Ae.m(o,w),M(o,at,w),Ce&&Ce.m(o,w),M(o,ot,w),$e=!0,wt||(Lt=[W(a,"drop",t[53]),W(a,"dragover",t[54]),W(E,"click",t[31]),W(R,"click",t[30]),W(G,"click",t[27]),W(we,"drop",t[61]),W(we,"dragover",t[62]),W(ke,"click",t[26]),W(te,"input",t[63]),W(We,"change",t[64]),W(We,"change",t[65]),W(_e,"click",t[40]),W(st,"click",zl(t[71])),W(P,"drop",t[93]),W(P,"dragover",t[94])],wt=!0)},p(o,w){var $,ne,k,he,it,ye,le,jt,tt,Ut,Mt,zt,Ft,Ht,Ct,Wt,yt;let T=p;if(p=St(o),p===T?qe[p].p(o,w):(nt(),B(qe[T],1,1,()=>{qe[T]=null}),pt(),h=qe[p],h?h.p(o,w):(h=qe[p]=Dt[p](o),h.c()),I(h,1),h.m(a,null)),((ne=($=o[8])==null?void 0:$.selected_table_fields)==null?void 0:ne.length)>0?U?(U.p(o,w),w[0]&256&&I(U,1)):(U=xl(o),U.c(),I(U,1),U.m(i,m)):U&&(nt(),B(U,1,1,()=>{U=null}),pt()),w[0]&256&&ve(E,"display",((he=(k=o[8])==null?void 0:k.tables)==null?void 0:he.length)>0&&o[25](`${o[19]}-${o[8].selecetd_table}-selected`,"height",o[8])?null:"none"),((ye=(it=o[8])==null?void 0:it.selected_table_fields)==null?void 0:ye.length)>0?re?re.p(o,w):(re=wl(o),re.c(),re.m(e,Y)):re&&(re.d(1),re=null),w[0]&528704|w[1]&32){kt=fe((le=o[8])==null?void 0:le.selected_table_fields.filter(o[57]));let C;for(C=0;C<kt.length;C+=1){const Nt=ml(o,kt,C);Le[C]?Le[C].p(Nt,w):(Le[C]=kl(Nt),Le[C].c(),Le[C].m(e,null))}for(;C<Le.length;C+=1)Le[C].d(1);Le.length=kt.length}if((!$e||w[0]&262400&&D!==(D=o[19]+"-"+((jt=o[8])==null?void 0:jt.selecetd_table)+"-selected"))&&c(e,"id",D),w[0]&256&&ve(R,"display",((Ut=(tt=o[8])==null?void 0:tt.tables)==null?void 0:Ut.length)>0&&o[25](`${o[19]}-${o[8].selecetd_table}-selected`,"height",o[8])?null:"none"),w[0]&128&&ve(G,"display",((Mt=o[7])==null?void 0:Mt.length)>0&&o[25](o[19],"width",o[7])?null:"none"),w[0]&2240|w[1]&2){vt=fe(o[7].filter(o[59]));let C;for(C=0;C<vt.length;C+=1){const Nt=_l(o,vt,C);De[C]?De[C].p(Nt,w):(De[C]=vl(Nt),De[C].c(),De[C].m(we,null))}for(;C<De.length;C+=1)De[C].d(1);De.length=vt.length}if(w[0]&128&&ve(ke,"display",((zt=o[7])==null?void 0:zt.length)>0&&o[25](o[19],"width",o[7])?null:"none"),(!$e||w[0]&131072&&Qe!==(Qe=`${o[17].t("crud.filter")} ${o[17].t("crud.table")}`))&&c(te,"placeholder",Qe),w[0]&2048&&te.value!==o[11]&&Ee(te,o[11]),w[0]&32768){Et=fe(o[15]);let C;for(C=0;C<Et.length;C+=1){const Nt=bl(o,Et,C);Ve[C]?Ve[C].p(Nt,w):(Ve[C]=El(Nt),Ve[C].c(),Ve[C].m(We,null))}for(;C<Ve.length;C+=1)Ve[C].d(1);Ve.length=Et.length}if(w[0]&32769&&el(We,o[0].database),o[1]?Se?(Se.p(o,w),w[0]&2&&I(Se,1)):(Se=Nl(o),Se.c(),I(Se,1),Se.m(O,ct)):Se&&(nt(),B(Se,1,1,()=>{Se=null}),pt()),o[2]?Ie?(Ie.p(o,w),w[0]&4&&I(Ie,1)):(Ie=Tl(o),Ie.c(),I(Ie,1),Ie.m(O,null)):Ie&&(nt(),B(Ie,1,1,()=>{Ie=null}),pt()),w[0]&256|w[1]&1024){At=fe(Object.keys(((Ft=o[8])==null?void 0:Ft.tabs)||{}));let C;for(C=0;C<At.length;C+=1){const Nt=ul(o,At,C);ce[C]?(ce[C].p(Nt,w),I(ce[C],1)):(ce[C]=Ol(Nt),ce[C].c(),I(ce[C],1),ce[C].m(be,Ze))}for(nt(),C=At.length;C<ce.length;C+=1)tl(C);pt()}(!$e||w[0]&147712)&&bt!==(bt=`${o[17].t("crud.preview")} ${((yt=(Wt=(Ht=o[8])==null?void 0:Ht.tabs)==null?void 0:Wt[(Ct=o[14])==null?void 0:Ct.tab])==null?void 0:yt.label)||""}`)&&ze(dt,bt),(!$e||w[0]&262400&&j!==(j="tab tab-lifted text-md "+(o[8].selected_tab==="query_preview"?"tab-active active":"")))&&c(st,"class",j);let F=de;de=Gt(o),de===F?It[de].p(o,w):(nt(),B(It[F],1,1,()=>{It[F]=null}),pt(),xe=It[de],xe?xe.p(o,w):(xe=It[de]=Kt[de](o),xe.c()),I(xe,1),xe.m(P,null)),o[13]?je?(je.p(o,w),w[0]&8192&&I(je,1)):(je=Bl(o),je.c(),I(je,1),je.m(ht.parentNode,ht)):je&&(nt(),B(je,1,1,()=>{je=null}),pt()),o[9].open?Ae?(Ae.p(o,w),w[0]&512&&I(Ae,1)):(Ae=Rl(o),Ae.c(),I(Ae,1),Ae.m(at.parentNode,at)):Ae&&(nt(),B(Ae,1,1,()=>{Ae=null}),pt()),o[10].open?Ce?(Ce.p(o,w),w[0]&1024&&I(Ce,1)):(Ce=Ul(o),Ce.c(),I(Ce,1),Ce.m(ot.parentNode,ot)):Ce&&(nt(),B(Ce,1,1,()=>{Ce=null}),pt())},i(o){if(!$e){I(h),I(U),I(g.$$.fragment,o),I(N.$$.fragment,o),I(K.$$.fragment,o),I(Q.$$.fragment,o),I(Me.$$.fragment,o),I(et.$$.fragment,o),I(Se),I(Ie);for(let w=0;w<At.length;w+=1)I(ce[w]);I(Oe.$$.fragment,o),I(xe),I(je),I(Ae),I(Ce),$e=!0}},o(o){B(h),B(U),B(g.$$.fragment,o),B(N.$$.fragment,o),B(K.$$.fragment,o),B(Q.$$.fragment,o),B(Me.$$.fragment,o),B(et.$$.fragment,o),B(Se),B(Ie),ce=ce.filter(Boolean);for(let w=0;w<ce.length;w+=1)B(ce[w]);B(Oe.$$.fragment,o),B(xe),B(je),B(Ae),B(Ce),$e=!1},d(o){o&&(z(s),z(xt),z(ht),z(at),z(ot)),qe[p].d(),U&&U.d(),ie(g),re&&re.d(),_t(Le,o),ie(N),ie(K),_t(De,o),ie(Q),ie(Me),ie(et),_t(Ve,o),Se&&Se.d(),Ie&&Ie.d(),_t(ce,o),ie(Oe),It[de].d(),je&&je.d(o),Ae&&Ae.d(o),Ce&&Ce.d(o),wt=!1,Bt(Lt)}}}function Is(t,s,l){let n,a;ll(t,Jl,r=>l(16,n=r)),ll(t,Kl,r=>l(17,a=r));let{data:p}=s,{return_query:h}=s,{extra_save_op:b}=s,{option:i={}}=s,{action:m={}}=s,u={manage_query_id:null,manage_query:null,database:null,manage_query_conf:null,active:!0},E=10,v=0,g={},L=[],e={tables:[],selecetd_table:null,selected_table_fields:[],selected_tab:"Query 1",selected_tab_2_prev:null,tabs:{"Query 1":{label:"Query 1",fields:[],sql:null,show:!1,use:!1,limit:10,offset:0}}};const R=[{name:"field",type:"data",ellipsis:30},{name:"table",type:"data",ellipsis:30},{name:"func",type:"select",input:!0,options:[{value:"",label:""},{value:"COUNT",label:"COUNT",agreg:!0},{value:"SUM",label:"SUM",agreg:!0},{value:"AVG",label:"AVG",agreg:!0},{value:"MAX",label:"MAX",agreg:!0},{value:"MIN",label:"MIN",agreg:!0}],width:"w-10"},{name:"join",type:"text",input:!0,width:"w-10"},{name:"where_cond",type:"select",input:!0,options:[{value:"",label:""},{value:"=",label:"equal"},{value:">",label:"gt"},{value:">=",label:"gt_eq"},{value:"<",label:"lt"},{value:"<=",label:"lt_eq"},{value:"!=",label:"dif"},{value:"LIKE",label:"like"},{value:"NOT LIKE",label:"not_like"},{value:"IN",label:"in"},{value:"NOT IN",label:"not_in"},{value:"BETWEEN",label:"between"},{value:"NOT BETWEEN",label:"not_between"},{value:"IS NULL",label:"is_null"},{value:"IS NOT NULL",label:"is_not_null"},{value:"IS TRUE",label:"is_true"},{value:"IS FALSE",label:"is_false"}],width:"w-10"},{name:"where_val",type:"text",input:!0,width:"w-10"},{name:"group_by",type:"boolean",input:!0},{name:"order_by",type:"select",input:!0,options:[{value:"",label:""},{value:"ASC",label:"ASC"},{value:"DESC",label:"DESC"}]},{name:"label",type:"text",input:!0,width:"w-10"},{name:"ignore",type:"boolean",input:!0},{name:"formula",type:"boolean",input:!0},{name:"tousnd_sep",type:"boolean",input:!0},{name:"hidden",type:"boolean",input:!0},{name:"delete",type:"button",input:!0,action:"delete",icon:"trash",width:"w-10"}];let se=sl("database-tables"),N={open:!1,msg:null,type:null},X={format:"csv",name:"export",compress:!1,compress_format:"gz",display_fields:"interface_fields",records:"all_records",column_names:"comments",csv:{sep:",",decimal:".",encoding:"utf-8",chunksize:1e4}},J={open:!1,width:12,heigth:85,header:!0,title:"Dialog Title",header_actions:[],component:null},O="",G="",q=!1,K={};const Fe=async r=>{var o,w;if(!(r!=null&&r.data)){const T={...u,manage_query_conf:JSON.stringify(e)};T.manage_query=(w=(o=e==null?void 0:e.tabs)==null?void 0:o[e==null?void 0:e.selected_tab])==null?void 0:w.label,r.data=T}l(13,q=!0);const f={lang:n==null?void 0:n.lang,conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,table:r.table||"manage_query",data:r.data};if(!f.data||!f.table)return l(13,q=!1),null;const x=await ql(f);console.log("save res:",x,f.data),x.success===!0?(l(9,N.open=!0,N),l(9,N.type="success",N),l(9,N.msg=x.msg,N),x!=null&&x.inserted_primary_key&&l(3,u.manage_query_id=x.inserted_primary_key,u),m!=null&&m.action&&m.action({})):(l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=x.msg,N)),l(13,q=!1)},we=async r=>{l(13,q=!0);try{const f={lang:r.lang||(n==null?void 0:n.lang),conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:r.app,database:r==null?void 0:r.database},x=await ls(f);if(l(13,q=!1),x.success===!0&&x.data)return x.data;l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=x.msg,N)}catch(f){console.log(f.message),l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=f.message,N)}l(13,q=!1)},Xe=r=>{r.detail.type==="next"?l(8,e.tabs[e.selected_tab].offset+=1,e):r.detail.type==="back"?l(8,e.tabs[e.selected_tab].offset-=1,e):r.detail.type==="first"?l(8,e.tabs[e.selected_tab].offset=0,e):r.detail.type==="last"?l(8,e.tabs[e.selected_tab].offset=Math.ceil(e.tabs[e.selected_tab].limit/((r==null?void 0:r.length)||e.tabs[e.selected_tab].limit)),e):r.detail.type==="rows_per_page"&&(l(8,e.tabs[e.selected_tab].limit=r.detail.rows_per_page,e),l(8,e.tabs[e.selected_tab].offset=0,e)),l(8,e={...e})},ke=r=>{let f=E,x=v;r.detail.type==="next"?l(5,v+=1):r.detail.type==="back"?l(5,v-=1):r.detail.type==="first"?l(5,v=0):r.detail.type==="last"?l(5,v=Math.ceil(E/((r==null?void 0:r.length)||E))):r.detail.type==="rows_per_page"&&(l(4,E=r.detail.rows_per_page),l(5,v=0)),P({tab:(e==null?void 0:e.selected_tab_2_prev)||(e==null?void 0:e.selected_tab),limit:f,offset:x})},A=r=>{l(10,J.open=!1,J)},Q=async r=>{var x,o;r=r||{database:(x=n==null?void 0:n.selected_app)==null?void 0:x.db,...p};const f=await we({database:r==null?void 0:r.database,app:n==null?void 0:n.selected_app,lang:r.lang});l(6,g={...f}),p!=null&&p.table&&(g!=null&&g[p==null?void 0:p.table])&&(e.tables.push(p==null?void 0:p.table),l(8,e.selecetd_table=p==null?void 0:p.table,e),l(8,e.selected_table_fields=Object.keys((o=g==null?void 0:g[p==null?void 0:p.table])==null?void 0:o.fields),e),l(8,e={...e})),l(7,L=Object.keys(g||{}))},ee=(r,f,x)=>{try{const o=document.getElementById(r);let w=!1;return f==="width"?w=(o==null?void 0:o.clientWidth)<(o==null?void 0:o.scrollWidth):w=(o==null?void 0:o.clientHeight)<(o==null?void 0:o.scrollHeight),w}catch(o){return console.log(o.message),!1}},Te=()=>{const r=L[0];L.push(r),L.splice(0,1),l(7,L=[...L])},Ke=()=>{const r=L[L.length-1];L.splice(L.length-1,1),L.unshift(r),l(7,L=[...L])},Ue=()=>{const r=e==null?void 0:e.tables[0];e==null||e.tables.push(r),e==null||e.tables.splice(0,1),l(8,e={...e})},He=()=>{var f,x;const r=e==null?void 0:e.tables[(e==null?void 0:e.tables.length)-1];(f=e==null?void 0:e.tables)==null||f.splice((e==null?void 0:e.tables.length)-1,1),(x=e==null?void 0:e.tables)==null||x.unshift(r),l(8,e={...e})},Me=()=>{var f,x,o;const r=(f=e==null?void 0:e.selected_table_fields)==null?void 0:f[0];(x=e==null?void 0:e.selected_table_fields)==null||x.push(r),(o=e==null?void 0:e.selected_table_fields)==null||o.splice(0,1),l(8,e={...e})},Ge=()=>{var f,x,o,w,T;const r=(x=e==null?void 0:e.selected_table_fields)==null?void 0:x[((f=e==null?void 0:e.selected_table_fields)==null?void 0:f.length)-1];(w=e==null?void 0:e.selected_table_fields)==null||w.splice(((o=e==null?void 0:e.selected_table_fields)==null?void 0:o.length)-1,1),(T=e==null?void 0:e.selected_table_fields)==null||T.unshift(r),l(8,e={...e})},te=(r,f)=>{r.dataTransfer.setData("TABLE",f)},Qe=r=>{r.preventDefault()},V=r=>{var x,o;r.preventDefault();const f=r.dataTransfer.getData("TABLE");e!=null&&e.tables||l(8,e.tables=[],e),!((x=e==null?void 0:e.tables)!=null&&x.includes(f))&&f&&(e.tables.push(f),l(8,e.selecetd_table=f,e),l(8,e.selected_table_fields=Object.keys((o=g==null?void 0:g[f])==null?void 0:o.fields),e),l(8,e={...e}))},pe=r=>{var x,o,w,T,F;r.preventDefault();const f=r.dataTransfer.getData("TABLE");if(e!=null&&e.tables||l(8,e.tables=[],e),(x=e==null?void 0:e.tables)!=null&&x.includes(f)&&f){if(e.tables.splice((o=e==null?void 0:e.tables)==null?void 0:o.indexOf(f),1),e.selecetd_table===f)if(((w=e==null?void 0:e.tables)==null?void 0:w.length)>0){const $=(T=e==null?void 0:e.tables)==null?void 0:T[0];l(8,e.selected_table_fields=Object.keys((F=g==null?void 0:g[$])==null?void 0:F.fields),e)}else l(8,e.selected_table_fields=[],e);l(8,e={...e})}},ue=(r,f,x)=>{r.dataTransfer.setData("TABLE",f),r.dataTransfer.setData("FIELD",x)},lt=r=>{r.preventDefault()},rt=(r,f)=>{var x,o;r.preventDefault();try{const w=r.dataTransfer.getData("TABLE"),T=r.dataTransfer.getData("FIELD");(o=(x=e==null?void 0:e.tabs)==null?void 0:x[f])!=null&&o.fields||l(8,e.tabs[f].fields=[],e),w&&T&&f&&(e.tabs[f].fields.push({table:w,field:T}),e.tabs[f].fields.map((F,$)=>(F.index=$,F)),l(8,e={...e}))}catch{}},et=r=>{var f,x,o,w;((f=r==null?void 0:r.field)==null?void 0:f.action)==="delete"&&((w=(o=(x=e==null?void 0:e.tabs)==null?void 0:x[r==null?void 0:r.tab])==null?void 0:o.fields)==null||w.splice(r==null?void 0:r.index,1),e.tabs[r==null?void 0:r.tab].fields.map((T,F)=>(T.index=F,T)),l(8,e={...e}))},Ye=()=>{const f={label:`Query ${Object.keys(e==null?void 0:e.tabs).length+1}`,fields:[],sql:null,show:!1,use:!1,limit:10,offset:0};l(8,e={...e,tabs:{...e==null?void 0:e.tabs,[f==null?void 0:f.label]:Pt.cloneDeep(f)}})},We=()=>{var r,f,x;l(8,e={...e,tabs:{...e==null?void 0:e.tabs,[e==null?void 0:e.selected_tab]:{...(r=e==null?void 0:e.tabs)==null?void 0:r[e==null?void 0:e.selected_tab],edit:!((x=(f=e==null?void 0:e.tabs)==null?void 0:f[e==null?void 0:e.selected_tab])!=null&&x.edit)}}})},mt=(r,f,x)=>{r.dataTransfer.setData("TAB",f),r.dataTransfer.setData("INDEX",x)},ct=(r,f,x)=>{var F,$,ne,k,he,it,ye,le,jt,tt,Ut,Mt,zt,Ft,Ht;r.preventDefault();const o=r.dataTransfer.getData("TAB"),w=Number(r.dataTransfer.getData("INDEX")),T=x;if(console.log({_tab:o,_org_field_index:w,_dest_field_index:T}),w!==T&&((ne=($=(F=e==null?void 0:e.tabs)==null?void 0:F[o])==null?void 0:$.fields)!=null&&ne[w])&&((it=(he=(k=e==null?void 0:e.tabs)==null?void 0:k[o])==null?void 0:he.fields)!=null&&it[T]))try{const Ct=Pt.cloneDeep((jt=(le=(ye=e==null?void 0:e.tabs)==null?void 0:ye[o])==null?void 0:le.fields)==null?void 0:jt[w]);(Mt=(Ut=(tt=e==null?void 0:e.tabs)==null?void 0:tt[o])==null?void 0:Ut.fields)==null||Mt.splice(w,1),(Ht=(Ft=(zt=e==null?void 0:e.tabs)==null?void 0:zt[o])==null?void 0:Ft.fields)==null||Ht.splice(T,0,Pt.cloneDeep(Ct)),e.tabs[o].fields.map((Wt,yt)=>(Wt.index=yt,Wt)),l(8,e={...e})}catch(Ct){console.log(Ct==null?void 0:Ct.message)}},S=r=>{var o,w,T,F,$,ne;const f={select:"",from:"",join:"",where:"",group_by:"",order_by:""};(T=(w=(o=e==null?void 0:e.tabs)==null?void 0:o[r==null?void 0:r.tab])==null?void 0:w.fields)==null||T.forEach((k,he)=>{if(!(k!=null&&k.ignore)){let it=` AS "${k==null?void 0:k.field}"`,ye=`"${k==null?void 0:k.table}"."${k==null?void 0:k.field}"`;if(k!=null&&k.label&&(it=` AS "${k==null?void 0:k.label}"`),(k==null?void 0:k.field)==="*"&&(it="",ye=`"${k==null?void 0:k.table}".${k==null?void 0:k.field}`),k!=null&&k.formula&&(ye=`${k==null?void 0:k.field}`),k!=null&&k.hidden||(k!=null&&k.func?f.select+=`${f.select?", ":""}${k==null?void 0:k.func}(${ye})${it}`:f.select+=`${f.select?", ":""}${ye}${it}`),!f.from&&(k!=null&&k.table)&&(f.from+=`"${k==null?void 0:k.table}"`),k!=null&&k.join&&(f.join+=`${f.join?`
`:""}LEFT OUTER JOIN "${k==null?void 0:k.table}" ON "${k==null?void 0:k.table}"."${k==null?void 0:k.field}" = ${k==null?void 0:k.join}`),k!=null&&k.where_cond){let le=`'${k==null?void 0:k.where_val}'`,jt=!1;if(["LIKE","NOT LIKE"].includes(k==null?void 0:k.where_cond))le.indexOf("%")!==-1?le=`${le}`:le=`'%${k==null?void 0:k.where_val}%'`;else if(["IN","NOT IN"].includes(k==null?void 0:k.where_cond)){const tt=le.split(";");(tt==null?void 0:tt.length)>0?le=`(${tt.join("', '")})`:jt=!0}else if(["BETWEEN","NOT BETWEEN"].includes(k==null?void 0:k.where_cond)){const tt=le.split(";");(tt==null?void 0:tt.length)===2?le=`${tt.join("' AND '")}`:jt=!0}else["IS NULL","IS NOT NULL","IS TRUE","IS FALSE"].includes(k==null?void 0:k.where_cond)&&(console.log(k==null?void 0:k.where_cond),le="");!le&&!["IS NULL","IS NOT NULL","IS TRUE","IS FALSE"].includes(k==null?void 0:k.where_cond)&&(jt=!0),jt===!1&&(f.where+=`${f.where?" AND ":""}${ye} ${k==null?void 0:k.where_cond} ${le}`)}k!=null&&k.group_by&&!(k!=null&&k.hidden)&&(f.group_by+=`${f.group_by?", ":""}${ye}`),k!=null&&k.order_by&&(f.order_by+=`${f.order_by?", ":""}${ye} ${k==null?void 0:k.order_by}`)}}),console.log({_query_parts:f});const x=`SELECT ${f==null?void 0:f.select}
FROM ${f==null?void 0:f.from}${f!=null&&f.join?`
${f==null?void 0:f.join}`:""}${f!=null&&f.where?`
WHERE ${f==null?void 0:f.where}`:""}${f!=null&&f.group_by?`
GROUP BY ${f==null?void 0:f.group_by}`:""}${f!=null&&f.order_by?`
ORDER BY ${f==null?void 0:f.order_by}`:""}`;return(F=e==null?void 0:e.tabs)!=null&&F[r==null?void 0:r.tab]&&!((ne=($=e==null?void 0:e.tabs)==null?void 0:$[r==null?void 0:r.tab])!=null&&ne.use)&&l(8,e.tabs[r==null?void 0:r.tab].sql=x,e),x},P=async r=>{var o,w,T,F,$,ne,k,he,it,ye;let f=S(r);(w=(o=e==null?void 0:e.tabs)==null?void 0:o[r==null?void 0:r.tab])!=null&&w.use&&(f=(F=(T=e==null?void 0:e.tabs)==null?void 0:T[r==null?void 0:r.tab])==null?void 0:F.sql);const x={class:"crud",method:"query",conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,data:{build_query:(ne=($=e==null?void 0:e.tabs)==null?void 0:$[r==null?void 0:r.tab])!=null&&ne.use?null:(he=(k=e==null?void 0:e.tabs)==null?void 0:k[r==null?void 0:r.tab])==null?void 0:he.fields,query:f,use_query_string:(ye=(it=e==null?void 0:e.tabs)==null?void 0:it[r==null?void 0:r.tab])==null?void 0:ye.use,database:p==null?void 0:p.database,limit:E,offset:v}};l(13,q=!0),(r==null?void 0:r.tab)!=="query_preview"&&(l(8,e.selected_tab_2_prev=r==null?void 0:r.tab,e),console.log("selected_tab_2_prev:",e.selected_tab_2_prev));try{const le=await nl(x);console.log("query run res:",le),l(14,K={...le,tab:r==null?void 0:r.tab}),l(8,e.selected_tab="query_preview",e),le.success===!0||(l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=le.msg||le.toString(),N))}catch(le){l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=`${le==null?void 0:le.message}`,N)}l(13,q=!1)},be=async r=>{var f,x,o,w,T,F;if((f=e==null?void 0:e.tabs)!=null&&f[r==null?void 0:r.tab]&&!((o=(x=e==null?void 0:e.tabs)==null?void 0:x[r==null?void 0:r.tab])!=null&&o.show)){if(!((T=(w=e==null?void 0:e.tabs)==null?void 0:w[r==null?void 0:r.tab])!=null&&T.use)){const $=S(r);l(8,e.tabs[r==null?void 0:r.tab].sql=$,e)}l(8,e.tabs[r==null?void 0:r.tab].show=!0,e)}else(F=e==null?void 0:e.tabs)!=null&&F[r==null?void 0:r.tab]&&l(8,e.tabs[r==null?void 0:r.tab].show=!1,e)},Ze=async r=>{var f,x;X.name=(x=(f=e==null?void 0:e.tabs)==null?void 0:f[r==null?void 0:r.tab])==null?void 0:x.label,l(10,J.header=!0,J),l(10,J.title=`${a.t("crud.export")} ${a.t("crud.query")} - ${X.name}`,J),l(10,J.component=(await yl(()=>import("./Export-cb688ad6.js"),["assets/Export-cb688ad6.js","assets/index-8239faad.js","assets/index-72afd4a3.css","assets/pt-4424e41e.js"])).default,J),l(10,J.data={type:"query",tab:r==null?void 0:r.tab,table:r.table,default_export:X},J),l(10,J.actions=[{type:"btn",icon:"ban",name:"CANCEL",class:"btn-sm text-error",label:a.t("crud.cancel"),action:A},{type:"btn",icon:"lightning-bolt",name:"YES",class:"btn-sm text-success",label:a.t("crud.exec"),action:_e}],J),l(10,J.width=4,J),l(10,J.heigth=null,J),l(10,J.open=!0,J)},_e=async r=>{var f,x;if(r!=null&&r.data){console.log("export_confirm:",r.data),X=r.data;const o=S(r),w={class:"export",method:"query",conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,data:{build_query:(x=(f=e==null?void 0:e.tabs)==null?void 0:f[(r==null?void 0:r.tab)||(e==null?void 0:e.selected_tab_2_prev)||(e==null?void 0:e.selected_tab)])==null?void 0:x.fields,query:o,database:p==null?void 0:p.database,limit:-1}};w.data._conf=X,A(),l(13,q=!0);const T=await nl(w);if(console.log("data:",T),T.success===!0&&T.fname)try{const F=document.createElement("a");F.download=T.fname,F.target="_blank",F.href=`${es(n==null?void 0:n.conf,!0)}/${T.fname}?download`,console.log(F.href),F.setAttribute("style","display: none"),document.body.appendChild(F),F.click(),document.body.removeChild(F)}catch(F){console.log(F.message)}else l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=T.msg,N);l(13,q=!1)}},ft=["etl_report_base","etl_rbase_output"];let Oe=[];const Tt=async r=>{var o,w,T,F;r.no_loding||l(13,q=!0);const f={lang:n==null?void 0:n.lang,conf:n==null?void 0:n.conf,token:n==null?void 0:n.token,app:n==null?void 0:n.selected_app,table:r==null?void 0:r.tables,fields:["database"],distinct:!0,limit:-1},x=await ts(f);if(l(15,Oe=(o=n==null?void 0:n.apps)==null?void 0:o.map($=>$.db)),x.success===!0&&x.data){for(const $ in x.data)if(Object.hasOwnProperty.call(x.data,$))for(let ne=0;ne<((w=x.data[$])==null?void 0:w.data.length);ne++)Oe.indexOf((T=x.data[$].data[ne])==null?void 0:T.database)===-1&&Oe.push((F=x.data[$].data[ne])==null?void 0:F.database);l(15,Oe=[...Oe])}else l(9,N.open=!0,N),l(9,N.type="error",N),l(9,N.msg=x.msg,N);l(13,q=!1)};Gl(async()=>{var r,f,x,o,w;a.changeLanguage(n==null?void 0:n.lang);try{Rt.locale(n==null?void 0:n.lang)}catch{Rt.locale("en-us")}if(p!=null&&p.manage_query_id&&l(3,u={...p}),p!=null&&p.manage_query_conf){if(typeof(p==null?void 0:p.manage_query_conf)=="string")try{l(8,e=JSON.parse(p==null?void 0:p.manage_query_conf))}catch(T){console.log("ERR trying to parse manage_query_conf: ",T.message)}else if(typeof(p==null?void 0:p.manage_query_conf)=="object"){if((r=p==null?void 0:p.manage_query_conf)!=null&&r.tabs&&((f=p==null?void 0:p.manage_query_conf)!=null&&f.tabs))try{l(8,e=Pt.cloneDeep(p==null?void 0:p.manage_query_conf))}catch(T){console.log("ERR trying to parse manage_query_conf: ",T.message)}}}(p!=null&&p.database||(x=n==null?void 0:n.selected_app)!=null&&x.db)&&(l(3,u.database=(p==null?void 0:p.database)||((o=n==null?void 0:n.selected_app)==null?void 0:o.db),u),p!=null&&p.database||l(0,p.database=u.database,p),await Q({database:(w=n==null?void 0:n.selected_app)==null?void 0:w.db,...p}),Tt({tables:ft}))});const st=window.innerHeight;sl("db");const ut=r=>{var o,w;const f=S(r);l(8,e.tabs[r==null?void 0:r.tab].sql=f,e);const x={...u,database:p==null?void 0:p.database,manage_query_conf:JSON.stringify(e),sql:f};x.manage_query=(w=(o=e==null?void 0:e.tabs)==null?void 0:o[e==null?void 0:e.selected_tab])==null?void 0:w.label,h(x)},bt=r=>{var f;l(8,e.selecetd_table=r,e),l(8,e.selected_table_fields=Object.keys(((f=g==null?void 0:g[r])==null?void 0:f.fields)||{}),e)},dt=(r,f)=>te(f,r),j=r=>V(r),y=r=>Qe(r);function ge(){G=this.value,l(12,G)}const me=r=>ue(r,e==null?void 0:e.selecetd_table,"*"),de=r=>{var x,o;let f=!0;if(G){if(G.length>2){const w=new RegExp(G,"i");let T=((o=(x=g==null?void 0:g[e==null?void 0:e.selecetd_table])==null?void 0:x.fields[r])==null?void 0:o.comment)||r;f=!1,(r.match(w)||T.match(w))&&(f=!0)}}return f},xe=(r,f)=>ue(f,e==null?void 0:e.selecetd_table,r),Ot=r=>{var x;let f=!0;if(O){if(O.length>2){const o=new RegExp(O,"i");let w=(x=g==null?void 0:g[r])==null?void 0:x.comment;f=!1,(r.match(o)||w.match(o))&&(f=!0)}}return f},gt=(r,f)=>te(f,r),xt=r=>pe(r),ht=r=>Qe(r);function at(){O=this.value,l(11,O)}function ot(){p.database=pl(this),l(0,p),l(15,Oe)}const $e=r=>Q(p),wt=r=>ut({tab:(e==null?void 0:e.selected_tab)=="query_preview"?e==null?void 0:e.selected_tab_2_prev:e==null?void 0:e.selected_tab}),Lt=r=>{var o,w;const f=(e==null?void 0:e.selected_tab)=="query_preview"?e==null?void 0:e.selected_tab_2_prev:e==null?void 0:e.selected_tab,x={...u,manage_query_conf:JSON.stringify(e)};x.manage_query=(w=(o=e==null?void 0:e.tabs)==null?void 0:o[f])==null?void 0:w.label,Fe({table:"manage_query",data:x})};function Dt(r){e.tabs[r].label=this.value,l(8,e),l(18,R)}const qe=r=>{var x;const f=Object.keys((e==null?void 0:e.tabs)||{});(x=e==null?void 0:e.tabs)==null||delete x[r],l(8,e.selected_tab=f[0],e)},St=r=>{(e==null?void 0:e.selected_tab)!==r&&l(8,e={...e,selected_tab:r})},U=()=>{(e==null?void 0:e.selected_tab)!=="query_preview"&&l(8,e={...e,selected_tab:"query_preview"})},re=r=>!0,kt=r=>Ze({tab:e==null?void 0:e.selected_tab_2_prev}),Le=r=>ke({detail:r.detail,length:K==null?void 0:K.n_rows});function vt(){e.tabs[e.selected_tab].sql=this.value,l(8,e),l(18,R)}const De=r=>{var x,o,w,T,F;let f=!0;if(e.tabs[e==null?void 0:e.selected_tab].field_filter){if(e.tabs[e==null?void 0:e.selected_tab].field_filter.length>2){const $=new RegExp(e.tabs[e==null?void 0:e.selected_tab].field_filter,"i");let ne=(w=(o=(x=g==null?void 0:g[e==null?void 0:e.selecetd_table])==null?void 0:x.fields)==null?void 0:o[r])==null?void 0:w.comment;f=!1,((T=r==null?void 0:r.field)!=null&&T.match($)||(F=r==null?void 0:r.label)!=null&&F.match($)||ne!=null&&ne.match($))&&(f=!0)}}return f};function Et(r,f,x){f[x][r==null?void 0:r.name]=this.checked,l(8,e),l(6,g),l(18,R)}function Ve(r,f,x){f[x][r==null?void 0:r.name]=pl(this),l(8,e),l(6,g),l(18,R)}const Se=(r,f,x)=>{var o;return et({field:r,data:f,index:(f==null?void 0:f.index)||x,tab:e==null?void 0:e.selected_tab,name:f[(o=R==null?void 0:R[0])==null?void 0:o.name]})};function Ie(r,f,x){f[x][r==null?void 0:r.name]=this.value,l(8,e),l(6,g),l(18,R)}function At(r,f,x){f[x][r==null?void 0:r.name]=this.value,l(8,e),l(6,g),l(18,R)}const ce=(r,f,x)=>mt(x,e==null?void 0:e.selected_tab,(r==null?void 0:r.index)||f),tl=(r,f,x)=>ct(x,e==null?void 0:e.selected_tab,(r==null?void 0:r.index)||f);function Kt(){e.tabs[e==null?void 0:e.selected_tab].formula=this.value,l(8,e),l(18,R)}function It(){e.tabs[e==null?void 0:e.selected_tab].formula_label=this.value,l(8,e),l(18,R)}const Gt=()=>{var r,f,x;(x=(f=(r=e==null?void 0:e.tabs)==null?void 0:r[e==null?void 0:e.selected_tab])==null?void 0:f.fields)==null||x.push(Pt.cloneDeep({field:e.tabs[e==null?void 0:e.selected_tab].formula,table:e==null?void 0:e.selected_table,label:e.tabs[e==null?void 0:e.selected_tab].formula_label,formula:!0})),l(8,e.tabs[e==null?void 0:e.selected_tab].formula="",e),l(8,e.tabs[e==null?void 0:e.selected_tab].formula_label="",e),l(8,e={...e})};function je(){e.tabs[e==null?void 0:e.selected_tab].field_filter=this.value,l(8,e),l(18,R)}const Ae=r=>P({tab:e==null?void 0:e.selected_tab}),Ce=r=>be({tab:e==null?void 0:e.selected_tab});function Qt(){e.tabs[e==null?void 0:e.selected_tab].use=this.checked,l(8,e),l(18,R)}const Vt=r=>Ze({tab:e==null?void 0:e.selected_tab_2_prev}),Xt=r=>{var f,x,o;return Xe({detail:r.detail,data:(f=e==null?void 0:e.tabs)==null?void 0:f[e==null?void 0:e.selected_tab],length:(((o=(x=e==null?void 0:e.tabs)==null?void 0:x[e==null?void 0:e.selected_tab])==null?void 0:o.fields)||[]).length})},Yt=r=>rt(r,e==null?void 0:e.selected_tab),Zt=r=>lt(r),$t=r=>{l(9,N.open=!1,N)},qt=r=>A(r.detail);return t.$$set=r=>{"data"in r&&l(0,p=r.data),"return_query"in r&&l(1,h=r.return_query),"extra_save_op"in r&&l(2,b=r.extra_save_op),"option"in r&&l(49,i=r.option),"action"in r&&l(50,m=r.action)},t.$$.update=()=>{var r,f,x;t.$$.dirty[0]&1&&console.log(p==null?void 0:p.database),t.$$.dirty[1]&524288&&(((r=m==null?void 0:m.name)==null?void 0:r.toLowerCase())=="CANCEL".toLowerCase()&&(m==null||m.action()),((f=m==null?void 0:m.name)==null?void 0:f.toLowerCase())=="REFRESH".toLowerCase()&&Q(null),((x=m==null?void 0:m.name)==null?void 0:x.toLowerCase())=="SAVE".toLowerCase()&&Fe({table:"manage_query"}))},[p,h,b,u,E,v,g,L,e,N,J,O,G,q,K,Oe,n,a,R,se,Fe,Xe,ke,A,Q,ee,Te,Ke,Ue,He,Me,Ge,te,Qe,V,pe,ue,lt,rt,et,Ye,We,mt,ct,P,be,Ze,st,ut,i,m,bt,dt,j,y,ge,me,de,xe,Ot,gt,xt,ht,at,ot,$e,wt,Lt,Dt,qe,St,U,re,kt,Le,vt,De,Et,Ve,Se,Ie,At,ce,tl,Kt,It,Gt,je,Ae,Ce,Qt,Vt,Xt,Yt,Zt,$t,qt]}class Bs extends Hl{constructor(s){super(),Wl(this,s,Is,Ss,Pl,{data:0,return_query:1,extra_save_op:2,option:49,action:50},null,[-1,-1,-1,-1,-1])}}export{Bs as default};
