import{S as qe,i as Ce,s as Ne,v as ne,I as se,e as _,a as D,c as oe,t as J,b as u,a0 as Ee,d as I,f as o,m as ae,C as y,a1 as de,l as K,g as H,h as Le,k as Se,n as $,j as W,o as j,x as be,p as ue,D as De,q as ge,_ as ze,r as Ae,F as N,u as Ie,$ as je}from"./index-8239faad.js";import"./pt-4424e41e.js";function we(t,c,s){const r=t.slice();return r[18]=c[s],r}function ve(t,c,s){const r=t.slice();return r[21]=c[s],r[23]=s,r}function ke(t){let c,s,r,g=N(t[21]).format(t[3].t("fmrt.date"))+"",n,i,d,m,v,b,k,E,q;v=new se({props:{type:"outline",icon:"trash",path:"icons"}});function B(){return t[9](t[21],t[23])}return{c(){c=_("li"),s=_("a"),r=_("span"),n=J(g),i=D(),d=_("button"),m=_("span"),oe(v.$$.fragment),b=D(),u(r,"class","grow"),u(m,"class","w-5 h-5"),u(d,"class","btn btn-circle btn-ghost btn-sm p-0 m-0"),u(s,"class","p-0 pl-2 flex flex-row"),u(c,"class","list-item bordered w-full flex-row")},m(h,L){I(h,c,L),o(c,s),o(s,r),o(r,n),o(s,i),o(s,d),o(d,m),ae(v,m,null),o(c,b),k=!0,E||(q=[K(d,"click",B),K(s,"click",t[10])],E=!0)},p(h,L){t=h,(!k||L&9)&&g!==(g=N(t[21]).format(t[3].t("fmrt.date"))+"")&&$(n,g)},i(h){k||(H(v.$$.fragment,h),k=!0)},o(h){W(v.$$.fragment,h),k=!1},d(h){h&&j(c),ue(v),E=!1,De(q)}}}function Ye(t){let c,s=t[3].t(`crud.${t[18]}`)+"",r,g;return{c(){c=_("option"),r=J(s),g=D(),c.__value=t[18],y(c,c.__value)},m(n,i){I(n,c,i),o(c,r),o(c,g)},p(n,i){i&8&&s!==(s=n[3].t(`crud.${n[18]}`)+"")&&$(r,s)},d(n){n&&j(c)}}}function Be(t){let c,s,r,g,n,i,d,m,v,b,k,E,q,B,h,L,S,P,Q,C,a=t[3].t("crud.last")+"",Y,M,T=t[3].t("crud.time")+"",R,ie,x=t[3].t("crud.unit")+"",re,fe,_e,F,ee,z,pe,te,A,me,X,le,U,O,ce,he,G=ne(t[0]),p=[];for(let e=0;e<G.length;e+=1)p[e]=ke(ve(t,G,e));const Me=e=>W(p[e],1,1,()=>{p[e]=null});m=new se({props:{type:"outline",icon:"calendar-days",path:"icons"}}),h=new se({props:{type:"outline",icon:"plus",path:"icons"}});let V=ne(t[4]),w=[];for(let e=0;e<V.length;e+=1)w[e]=Ye(we(t,V,e));return U=new se({props:{type:"outline",icon:"plus",path:"icons"}}),{c(){c=_("div"),s=D(),r=_("ul");for(let e=0;e<p.length;e+=1)p[e].c();g=D(),n=_("div"),i=_("button"),d=_("span"),oe(m.$$.fragment),v=D(),b=_("input"),E=D(),q=_("button"),B=_("span"),oe(h.$$.fragment),L=D(),S=_("div"),P=_("label"),Q=_("span"),C=_("b"),Y=J(a),M=J(" N "),R=J(T),ie=D(),re=J(x),fe=J(":"),_e=D(),F=_("div"),ee=_("div"),z=_("input"),pe=D(),te=_("div"),A=_("select");for(let e=0;e<w.length;e+=1)w[e].c();me=D(),X=_("button"),le=_("span"),oe(U.$$.fragment),u(c,"class","flex flex-coll"),u(r,"class","grow mt-0 p-1 shadow menu menu-compact menu-vertical bg-base-100 w-full --max-h-56 overflow-y-auto overflow-x-hidden"),u(d,"class","w-5 h-5"),u(i,"class","btn btn-square btn-ghost btn-sm -mr-8 z-[1]"),u(b,"type","date"),u(b,"placeholder",k=`${t[3].t("crud.filter")} ${t[3].t("crud.apps")}`),u(b,"class","grow input pl-8 pr-8 input-bordered w-full input-sm"),u(b,"autocomplete","off"),u(b,"autocorrect","off"),u(B,"class","w-5 h-5"),u(q,"class","btn btn-square btn-ghost btn-sm -ml-8 z-[1]"),u(n,"class","flex"),u(Q,"class","label-text"),u(P,"class","label"),u(P,"for",""),u(z,"type","text"),u(z,"placeholder","N"),u(z,"class","input input-bordered input-sm"),u(ee,"class","form-control w-16"),u(A,"class","grow pl-8 select select-sm select-bordered w-full"),t[1].unit===void 0&&Ee(()=>t[14].call(A)),u(te,"class","form-control mr-2 ml-2 grow"),u(le,"class","w-5 h-5"),u(X,"class","btn btn-square btn-ghost btn-sm ml-2"),u(F,"class","flex flex-row pl-6 w-full"),u(S,"class","form-control")},m(e,f){I(e,c,f),I(e,s,f),I(e,r,f);for(let l=0;l<p.length;l+=1)p[l]&&p[l].m(r,null);I(e,g,f),I(e,n,f),o(n,i),o(i,d),ae(m,d,null),o(n,v),o(n,b),y(b,t[2]),o(n,E),o(n,q),o(q,B),ae(h,B,null),I(e,L,f),I(e,S,f),o(S,P),o(P,Q),o(Q,C),o(C,Y),o(C,M),o(C,R),o(C,ie),o(C,re),o(C,fe),o(S,_e),o(S,F),o(F,ee),o(ee,z),y(z,t[1].n),o(F,pe),o(F,te),o(te,A);for(let l=0;l<w.length;l+=1)w[l]&&w[l].m(A,null);de(A,t[1].unit,!0),o(F,me),o(F,X),o(X,le),ae(U,le,null),O=!0,ce||(he=[K(b,"input",t[11]),K(q,"click",t[12]),K(z,"input",t[13]),K(A,"change",t[14]),K(X,"click",t[15])],ce=!0)},p(e,[f]){if(f&137){G=ne(e[0]);let l;for(l=0;l<G.length;l+=1){const Z=ve(e,G,l);p[l]?(p[l].p(Z,f),H(p[l],1)):(p[l]=ke(Z),p[l].c(),H(p[l],1),p[l].m(r,null))}for(Le(),l=G.length;l<p.length;l+=1)Me(l);Se()}if((!O||f&8&&k!==(k=`${e[3].t("crud.filter")} ${e[3].t("crud.apps")}`))&&u(b,"placeholder",k),f&4&&y(b,e[2]),(!O||f&8)&&a!==(a=e[3].t("crud.last")+"")&&$(Y,a),(!O||f&8)&&T!==(T=e[3].t("crud.time")+"")&&$(R,T),(!O||f&8)&&x!==(x=e[3].t("crud.unit")+"")&&$(re,x),f&18&&z.value!==e[1].n&&y(z,e[1].n),f&24){V=ne(e[4]);let l;for(l=0;l<V.length;l+=1){const Z=we(e,V,l);w[l]?w[l].p(Z,f):(w[l]=Ye(Z),w[l].c(),w[l].m(A,null))}for(;l<w.length;l+=1)w[l].d(1);w.length=V.length}f&18&&de(A,e[1].unit)},i(e){if(!O){for(let f=0;f<G.length;f+=1)H(p[f]);H(m.$$.fragment,e),H(h.$$.fragment,e),H(U.$$.fragment,e),O=!0}},o(e){p=p.filter(Boolean);for(let f=0;f<p.length;f+=1)W(p[f]);W(m.$$.fragment,e),W(h.$$.fragment,e),W(U.$$.fragment,e),O=!1},d(e){e&&(j(c),j(s),j(r),j(g),j(n),j(L),j(S)),be(p,e),ue(m),ue(h),be(w,e),ue(U),ce=!1,De(he)}}}function Fe(t,c,s){let r,g;ge(t,ze,a=>s(16,r=a)),ge(t,Ae,a=>s(3,g=a));let{dates_refs:n=[]}=c,{action:i={}}=c,d={n:null,unit:"months"},m=N().subtract(1,"days").format("YYYY-MM-DD"),v=["days","months","quarters","years"];const b=a=>{if(console.log({payload:a,dates_refs:n}),a.n&&a.unit&&(n.length>0||m)){let Y=N((n==null?void 0:n[0])||m);const M=[];M.push(Y);let T=Y.clone();for(let R=0;R<a.n-1;R++)T.subtract(1,a.unit),M.push(T.clone());s(0,n=[...M])}},k=a=>{const Y=N(a).format("YYYYMMDD");n.map(M=>N(M).format("YYYYMMDD")).indexOf(Y)===-1&&s(0,n=[...n,N(a)])},E=a=>{N(a.dt).format("YYYYMMDD");const Y=a.index,M=n;M.splice(Y,1),s(0,n=[...M])},q=a=>{a==null||a.action(n)};Ie(async()=>{g.changeLanguage(r==null?void 0:r.lang);try{N.locale(r==null?void 0:r.lang)}catch{N.locale("en-us")}});const B=(a,Y)=>E({dt:a,index:Y}),h=()=>{console.log(1)};function L(){m=this.value,s(2,m)}const S=a=>{k(m)};function P(){d.n=this.value,s(1,d),s(4,v)}function Q(){d.unit=je(this),s(1,d),s(4,v)}const C=a=>{b(d)};return t.$$set=a=>{"dates_refs"in a&&s(0,n=a.dates_refs),"action"in a&&s(8,i=a.action)},t.$$.update=()=>{t.$$.dirty&256&&((i==null?void 0:i.name)=="CANCEL"&&(i==null||i.action()),(i==null?void 0:i.name)=="CLEAN"&&s(0,n=[]),(i==null?void 0:i.name)=="SET"&&q(i))},[n,d,m,g,v,b,k,E,i,B,h,L,S,P,Q,C]}class Te extends qe{constructor(c){super(),Ce(this,c,Fe,Be,Ne,{dates_refs:0,action:8})}}export{Te as default};
